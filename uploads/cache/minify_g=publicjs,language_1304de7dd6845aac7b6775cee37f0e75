/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory(jQuery);}}(function($){var pluses=/\+/g;function raw(s){return s;}
function decoded(s){return decodeURIComponent(s.replace(pluses,' '));}
function converted(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{return config.json?JSON.parse(s):s;}catch(er){}}
var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=config.json?JSON.stringify(value):String(value);return(document.cookie=[config.raw?key:encodeURIComponent(key),'=',config.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var decode=config.raw?raw:decoded;var cookies=document.cookie.split('; ');var result=key?undefined:{};for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=decode(parts.join('='));if(key&&key===name){result=converted(cookie);break;}
if(!key){result[name]=converted(cookie);}}
return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==undefined){$.cookie(key,'',$.extend({},options,{expires:-1}));return true;}
return false;};}));;(function($){if(typeof $.fn.each2=="undefined"){$.fn.extend({each2:function(c){var j=$([0]),i=-1,l=this.length;while(++i<l&&(j.context=j[0]=this[i])&&c.call(j[0],i,j)!==false);return this;}});}})(jQuery);(function($,undefined){"use strict";if(window.Select2!==undefined){return;}
var KEY,AbstractSelect2,SingleSelect2,MultiSelect2,nextUid,sizer,lastMousePosition,$document;KEY={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(k){k=k.which?k.which:k;switch(k){case KEY.LEFT:case KEY.RIGHT:case KEY.UP:case KEY.DOWN:return true;}
return false;},isControl:function(e){var k=e.which;switch(k){case KEY.SHIFT:case KEY.CTRL:case KEY.ALT:return true;}
if(e.metaKey)return true;return false;},isFunctionKey:function(k){k=k.which?k.which:k;return k>=112&&k<=123;}};$document=$(document);nextUid=(function(){var counter=1;return function(){return counter++;};}());function indexOf(value,array){var i=0,l=array.length,v;if(typeof value==="undefined"){return-1;}
if(value.constructor===String){for(;i<l;i=i+1)if(value.localeCompare(array[i])===0)return i;}else{for(;i<l;i=i+1){v=array[i];if(v.constructor===String){if(v.localeCompare(value)===0)return i;}else{if(v===value)return i;}}}
return-1;}
function equal(a,b){if(a===b)return true;if(a===undefined||b===undefined)return false;if(a===null||b===null)return false;if(a.constructor===String)return a.localeCompare(b)===0;if(b.constructor===String)return b.localeCompare(a)===0;return false;}
function splitVal(string,separator){var val,i,l;if(string===null||string.length<1)return[];val=string.split(separator);for(i=0,l=val.length;i<l;i=i+1)val[i]=$.trim(val[i]);return val;}
function getSideBorderPadding(element){return element.outerWidth()-element.width();}
function installKeyUpChangeEvent(element){var key="keyup-change-value";element.bind("keydown",function(){if($.data(element,key)===undefined){$.data(element,key,element.val());}});element.bind("keyup",function(){var val=$.data(element,key);if(val!==undefined&&element.val()!==val){$.removeData(element,key);element.trigger("keyup-change");}});}
$document.bind("mousemove",function(e){lastMousePosition={x:e.pageX,y:e.pageY};});function installFilteredMouseMove(element){element.bind("mousemove",function(e){var lastpos=lastMousePosition;if(lastpos===undefined||lastpos.x!==e.pageX||lastpos.y!==e.pageY){$(e.target).trigger("mousemove-filtered",e);}});}
function debounce(quietMillis,fn,ctx){ctx=ctx||undefined;var timeout;return function(){var args=arguments;window.clearTimeout(timeout);timeout=window.setTimeout(function(){fn.apply(ctx,args);},quietMillis);};}
function thunk(formula){var evaluated=false,value;return function(){if(evaluated===false){value=formula();evaluated=true;}
return value;};};function installDebouncedScroll(threshold,element){var notify=debounce(threshold,function(e){element.trigger("scroll-debounced",e);});element.bind("scroll",function(e){if(indexOf(e.target,element.get())>=0)notify(e);});}
function killEvent(event){event.preventDefault();event.stopPropagation();}
function killEventImmediately(event){event.preventDefault();event.stopImmediatePropagation();}
function measureTextWidth(e){if(!sizer){var style=e[0].currentStyle||window.getComputedStyle(e[0],null);sizer=$("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:style.fontSize,fontFamily:style.fontFamily,fontStyle:style.fontStyle,fontWeight:style.fontWeight,letterSpacing:style.letterSpacing,textTransform:style.textTransform,whiteSpace:"nowrap"});$("body").append(sizer);}
sizer.text(e.val());return sizer.width();}
function markMatch(text,term,markup){var match=text.toUpperCase().indexOf(term.toUpperCase()),tl=term.length;if(match<0){markup.push(text);return;}
markup.push(text.substring(0,match));markup.push("<span class='select2-match'>");markup.push(text.substring(match,match+tl));markup.push("</span>");markup.push(text.substring(match+tl,text.length));}
function ajax(options){var timeout,requestSequence=0,handler=null,quietMillis=options.quietMillis||100;return function(query){window.clearTimeout(timeout);timeout=window.setTimeout(function(){requestSequence+=1;var requestNumber=requestSequence,data=options.data,transport=options.transport||$.ajax,traditional=options.traditional||false,type=options.type||'GET';data=data.call(this,query.term,query.page,query.context);if(null!==handler){handler.abort();}
handler=transport.call(null,{url:options.url,dataType:options.dataType,data:data,type:type,traditional:traditional,success:function(data){if(requestNumber<requestSequence){return;}
var results=options.results(data,query.page);query.callback(results);}});},quietMillis);};}
function local(options){var data=options,dataText,text=function(item){return""+item.text;};if(!$.isArray(data)){text=data.text;if(!$.isFunction(text)){dataText=data.text;text=function(item){return item[dataText];};}
data=data.results;}
return function(query){var t=query.term,filtered={results:[]},process;if(t===""){query.callback({results:data});return;}
process=function(datum,collection){var group,attr;datum=datum[0];if(datum.children){group={};for(attr in datum){if(datum.hasOwnProperty(attr))group[attr]=datum[attr];}
group.children=[];$(datum.children).each2(function(i,childDatum){process(childDatum,group.children);});if(group.children.length){collection.push(group);}}else{if(query.matcher(t,text(datum))){collection.push(datum);}}};$(data).each2(function(i,datum){process(datum,filtered.results);});query.callback(filtered);};}
function tags(data){if($.isFunction(data)){return data;}
return function(query){var t=query.term,filtered={results:[]};$(data).each(function(){var isObject=this.text!==undefined,text=isObject?this.text:this;if(t===""||query.matcher(t,text)){filtered.results.push(isObject?this:{id:this,text:this});}});query.callback(filtered);};}
function checkFormatter(formatter,formatterName){if($.isFunction(formatter))return true;if(!formatter)return false;throw new Error("formatterName must be a function or a falsy value");}
function evaluate(val){return $.isFunction(val)?val():val;}
function countResults(results){var count=0;$.each(results,function(i,item){if(item.children){count+=countResults(item.children);}else{count++;}});return count;}
function defaultTokenizer(input,selection,selectCallback,opts){var original=input,dupe=false,token,index,i,l,separator;if(!opts.createSearchChoice||!opts.tokenSeparators||opts.tokenSeparators.length<1)return undefined;while(true){index=-1;for(i=0,l=opts.tokenSeparators.length;i<l;i++){separator=opts.tokenSeparators[i];index=input.indexOf(separator);if(index>=0)break;}
if(index<0)break;token=input.substring(0,index);input=input.substring(index+separator.length);if(token.length>0){token=opts.createSearchChoice(token,selection);if(token!==undefined&&token!==null&&opts.id(token)!==undefined&&opts.id(token)!==null){dupe=false;for(i=0,l=selection.length;i<l;i++){if(equal(opts.id(token),opts.id(selection[i]))){dupe=true;break;}}
if(!dupe)selectCallback(token);}}}
if(original.localeCompare(input)!=0)return input;}
$document.ready(function(){$document.bind("mousedown touchend",function(e){var target=$(e.target).closest("div.select2-container").get(0),attr;if(target){$document.find("div.select2-container-active").each(function(){if(this!==target)$(this).data("select2").blur();});}else{target=$(e.target).closest("div.select2-drop").get(0);$document.find("div.select2-drop-active").each(function(){if(this!==target)$(this).data("select2").blur();});}
target=$(e.target);attr=target.attr("for");if("LABEL"===e.target.tagName&&attr&&attr.length>0){target=$("#"+attr);target=target.data("select2");if(target!==undefined){target.focus();e.preventDefault();}}});});function clazz(SuperClass,methods){var constructor=function(){};constructor.prototype=new SuperClass;constructor.prototype.constructor=constructor;constructor.prototype.parent=SuperClass.prototype;constructor.prototype=$.extend(constructor.prototype,methods);return constructor;}
AbstractSelect2=clazz(Object,{bind:function(func){var self=this;return function(){func.apply(self,arguments);};},init:function(opts){var results,search,resultsSelector=".select2-results";this.opts=opts=this.prepareOpts(opts);this.id=opts.id;if(opts.element.data("select2")!==undefined&&opts.element.data("select2")!==null){this.destroy();}
this.enabled=true;this.container=this.createContainer();this.containerId="s2id_"+(opts.element.attr("id")||"autogen"+nextUid());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,'\\$1');this.container.attr("id",this.containerId);this.body=thunk(function(){return opts.element.closest("body");});if(opts.element.attr("class")!==undefined){this.container.addClass(opts.element.attr("class").replace(/validate\[[\S ]+] ?/,''));}
this.container.css(evaluate(opts.containerCss));this.container.addClass(evaluate(opts.containerCssClass));this.opts.element.data("select2",this).hide().before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(evaluate(opts.dropdownCssClass));this.dropdown.data("select2",this);this.results=results=this.container.find(resultsSelector);this.search=search=this.container.find("input.select2-input");search.attr("tabIndex",this.opts.element.attr("tabIndex"));this.resultsPage=0;this.context=null;this.initContainer();this.initContainerWidth();installFilteredMouseMove(this.results);this.dropdown.delegate(resultsSelector,"mousemove-filtered",this.bind(this.highlightUnderEvent));installDebouncedScroll(80,this.results);this.dropdown.delegate(resultsSelector,"scroll-debounced",this.bind(this.loadMoreIfNeeded));if($.fn.mousewheel){results.mousewheel(function(e,delta,deltaX,deltaY){var top=results.scrollTop(),height;if(deltaY>0&&top-deltaY<=0){results.scrollTop(0);killEvent(e);}else if(deltaY<0&&results.get(0).scrollHeight-results.scrollTop()+deltaY<=results.height()){results.scrollTop(results.get(0).scrollHeight-results.height());killEvent(e);}});}
installKeyUpChangeEvent(search);search.bind("keyup-change",this.bind(this.updateResults));search.bind("focus",function(){search.addClass("select2-focused");if(search.val()===" ")search.val("");});search.bind("blur",function(){search.removeClass("select2-focused");});this.dropdown.delegate(resultsSelector,"mouseup",this.bind(function(e){if($(e.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0){this.highlightUnderEvent(e);this.selectHighlighted(e);}else{this.focusSearch();}
killEvent(e);}));this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation();});if($.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource();}
if(opts.element.is(":disabled")||opts.element.is("[readonly='readonly']"))this.disable();},destroy:function(){var select2=this.opts.element.data("select2");if(select2!==undefined){select2.container.remove();select2.dropdown.remove();select2.opts.element.removeData("select2").unbind(".select2").show();}},prepareOpts:function(opts){var element,select,idKey,ajaxUrl;element=opts.element;if(element.get(0).tagName.toLowerCase()==="select"){this.select=select=opts.element;}
if(select){$.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in opts){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");}});}
opts=$.extend({},{populateResults:function(container,results,query){var populate,data,result,children,id=this.opts.id,self=this;populate=function(results,container,depth){var i,l,result,selectable,compound,node,label,innerContainer,formatted;for(i=0,l=results.length;i<l;i=i+1){result=results[i];selectable=id(result)!==undefined;compound=result.children&&result.children.length>0;node=$("<li></li>");node.addClass("select2-results-dept-"+depth);node.addClass("select2-result");node.attr("data-id",result.id);node.addClass(selectable?"select2-result-selectable":"select2-result-unselectable");if(compound){node.addClass("select2-result-with-children");}
node.addClass(self.opts.formatResultCssClass(result));label=$("<div></div>");label.addClass("select2-result-label");formatted=opts.formatResult(result,label,query);if(formatted!==undefined){label.html(self.opts.escapeMarkup(formatted));}
node.append(label);if(compound){innerContainer=$("<ul></ul>");innerContainer.addClass("select2-result-sub");populate(result.children,innerContainer,depth+1);node.append(innerContainer);}
node.data("select2-data",result);container.append(node);}};populate(results,container,0);}},$.fn.select2.defaults,opts);if(typeof(opts.id)!=="function"){idKey=opts.id;opts.id=function(e){return e[idKey];};}
if(select){opts.query=this.bind(function(query){var data={results:[],more:false},term=query.term,children,firstChild,process;process=function(element,collection){var group;if(element.is("option")){if(query.matcher(term,element.text(),element)){collection.push({id:element.attr("value"),text:element.text(),element:element.get(),css:element.attr("class")});}}else if(element.is("optgroup")){group={text:element.attr("label"),children:[],element:element.get(),css:element.attr("class")};element.children().each2(function(i,elm){process(elm,group.children);});if(group.children.length>0){collection.push(group);}}};children=element.children();if(this.getPlaceholder()!==undefined&&children.length>0){firstChild=children[0];if($(firstChild).text()===""){children=children.not(firstChild);}}
children.each2(function(i,elm){process(elm,data.results);});query.callback(data);});opts.id=function(e){return e.id;};opts.formatResultCssClass=function(data){return data.css;}}else{if(!("query"in opts)){if("ajax"in opts){ajaxUrl=opts.element.data("ajax-url");if(ajaxUrl&&ajaxUrl.length>0){opts.ajax.url=ajaxUrl;}
opts.query=ajax(opts.ajax);}else if("data"in opts){opts.query=local(opts.data);}else if("tags"in opts){opts.query=tags(opts.tags);opts.createSearchChoice=function(term){return{id:term,text:term};};opts.initSelection=function(element,callback){var data=[];$(splitVal(element.val(),opts.separator)).each(function(){var id=this,text=this,tags=opts.tags;if($.isFunction(tags))tags=tags();$(tags).each(function(){if(equal(this.id,id)){text=this.text;return false;}});data.push({id:id,text:text});});callback(data);};}}}
if(typeof(opts.query)!=="function"){throw"query function not defined for Select2 "+opts.element.attr("id");}
return opts;},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(e){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection();}}));},triggerChange:function(details){details=details||{};details=$.extend({},details,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(details);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange)
this.opts.element.blur();},enable:function(){if(this.enabled)return;this.enabled=true;this.container.removeClass("select2-container-disabled");},disable:function(){if(!this.enabled)return;this.close();this.enabled=false;this.container.addClass("select2-container-disabled");},opened:function(){return this.container.hasClass("select2-dropdown-open");},positionDropdown:function(){var offset=this.container.offset(),height=this.container.outerHeight(),width=this.container.outerWidth(),dropHeight=this.dropdown.outerHeight(),viewportBottom=$(window).scrollTop()+document.documentElement.clientHeight,dropTop=offset.top+height,dropLeft=offset.left,enoughRoomBelow=dropTop+dropHeight<=viewportBottom,enoughRoomAbove=(offset.top-dropHeight)>=this.body().scrollTop(),aboveNow=this.dropdown.hasClass("select2-drop-above"),bodyOffset,above,css;if(this.body().css('position')!=='static'){bodyOffset=this.body().offset();dropTop-=bodyOffset.top;dropLeft-=bodyOffset.left;}
if(aboveNow){above=true;if(!enoughRoomAbove&&enoughRoomBelow)above=false;}else{above=false;if(!enoughRoomBelow&&enoughRoomAbove)above=true;}
if(above){dropTop=offset.top-dropHeight;this.container.addClass("select2-drop-above");this.dropdown.addClass("select2-drop-above");}
else{this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above");}
css=$.extend({top:dropTop,left:dropLeft,width:width},evaluate(this.opts.dropdownCss));this.dropdown.css(css);this.opts.element.trigger($.Event("resizeddropdown"));},shouldOpen:function(){var event;if(this.opened())return false;event=$.Event("open");this.opts.element.trigger(event);return!event.isDefaultPrevented();},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above");},open:function(){if(!this.shouldOpen())return false;window.setTimeout(this.bind(this.opening),1);return true;},opening:function(){var cid=this.containerId,selector=this.containerSelector,scroll="scroll."+cid,resize="resize."+cid;this.container.parents().each(function(){$(this).bind(scroll,function(){var s2=$(selector);if(s2.length==0){$(this).unbind(scroll);}
s2.select2("close");});});window.setTimeout(function(){$(window).bind(resize,function(){var s2=$(selector);if(s2.length==0){$(window).unbind(resize);}
s2.select2("close");})},10);this.clearDropdownAlignmentPreference();if(this.search.val()===" "){this.search.val("");}
this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.updateResults(true);if(this.dropdown[0]!==this.body().children().last()[0]){this.dropdown.detach().appendTo(this.body());}
this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();this.focusSearch();},close:function(){if(!this.opened())return;var self=this;this.container.parents().each(function(){$(this).unbind("scroll."+self.containerId);});$(window).unbind("resize."+this.containerId);this.clearDropdownAlignmentPreference();this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.opts.element.trigger($.Event("close"));},clearSearch:function(){},ensureHighlightVisible:function(){var results=this.results,children,index,child,hb,rb,y,more;index=this.highlight();if(index<0)return;if(index==0){results.scrollTop(0);return;}
children=results.find(".select2-result-selectable");child=$(children[index]);hb=child.offset().top+child.outerHeight();if(index===children.length-1){more=results.find("li.select2-more-results");if(more.length>0){hb=more.offset().top+more.outerHeight();}}
rb=results.offset().top+results.outerHeight();if(hb>rb){results.scrollTop(results.scrollTop()+(hb-rb));}
y=child.offset().top-results.offset().top;if(y<0){results.scrollTop(results.scrollTop()+y);}},moveHighlight:function(delta){var choices=this.results.find(".select2-result-selectable"),index=this.highlight();while(index>-1&&index<choices.length){index+=delta;var choice=$(choices[index]);if(choice.hasClass("select2-result-selectable")&&!choice.hasClass("select2-disabled")){this.highlight(index);break;}}},highlight:function(index){var choices=this.results.find(".select2-result-selectable").not(".select2-disabled");if(arguments.length===0){return indexOf(choices.filter(".select2-highlighted")[0],choices.get());}
if(index>=choices.length)index=choices.length-1;if(index<0)index=0;choices.removeClass("select2-highlighted");$(choices[index]).addClass("select2-highlighted");this.ensureHighlightVisible();},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length;},highlightUnderEvent:function(event){var el=$(event.target).closest(".select2-result-selectable");if(el.length>0&&!el.is(".select2-highlighted")){var choices=this.results.find('.select2-result-selectable');this.highlight(choices.index(el));}else if(el.length==0){this.results.find(".select2-highlighted").removeClass("select2-highlighted");}},loadMoreIfNeeded:function(){var results=this.results,more=results.find("li.select2-more-results"),below,offset=-1,page=this.resultsPage+1,self=this,term=this.search.val(),context=this.context;if(more.length===0){return;}
below=more.offset().top-results.offset().top-results.height();if(below<=0){more.addClass("select2-active");this.opts.query({term:term,page:page,context:context,matcher:this.opts.matcher,callback:this.bind(function(data){if(!self.opened())return;self.opts.populateResults.call(this,results,data.results,{term:term,page:page,context:context});if(data.more===true){more.detach().appendTo(results).text(self.opts.formatLoadMore(page+1));window.setTimeout(function(){self.loadMoreIfNeeded();},10);}else{more.remove();}
self.positionDropdown();self.resultsPage=page;})});}},tokenize:function(){},updateResults:function(initial){var search=this.search,results=this.results,opts=this.opts,data,self=this,input;if(initial!==true&&(this.showSearchInput===false||!this.opened())){return;}
search.addClass("select2-active");function postRender(){results.scrollTop(0);search.removeClass("select2-active");self.positionDropdown();}
function render(html){results.html(self.opts.escapeMarkup(html));postRender();}
if(opts.maximumSelectionSize>=1){data=this.data();if($.isArray(data)&&data.length>=opts.maximumSelectionSize&&checkFormatter(opts.formatSelectionTooBig,"formatSelectionTooBig")){render("<li class='select2-selection-limit'>"+opts.formatSelectionTooBig(opts.maximumSelectionSize)+"</li>");return;}}
if(search.val().length<opts.minimumInputLength&&checkFormatter(opts.formatInputTooShort,"formatInputTooShort")){render("<li class='select2-no-results'>"+opts.formatInputTooShort(search.val(),opts.minimumInputLength)+"</li>");return;}
else{render("<li class='select2-searching'>"+opts.formatSearching()+"</li>");}
input=this.tokenize();if(input!=undefined&&input!=null){search.val(input);}
this.resultsPage=1;opts.query({term:search.val(),page:this.resultsPage,context:null,matcher:opts.matcher,callback:this.bind(function(data){var def;if(!this.opened())return;this.context=(data.context===undefined)?null:data.context;if(this.opts.createSearchChoice&&search.val()!==""){def=this.opts.createSearchChoice.call(null,search.val(),data.results);if(def!==undefined&&def!==null&&self.id(def)!==undefined&&self.id(def)!==null){if($(data.results).filter(function(){return equal(self.id(this),self.id(def));}).length===0){data.results.unshift(def);}}}
if(data.results.length===0&&checkFormatter(opts.formatNoMatches,"formatNoMatches")){render("<li class='select2-no-results'>"+opts.formatNoMatches(search.val())+"</li>");return;}
results.empty();self.opts.populateResults.call(this,results,data.results,{term:search.val(),page:this.resultsPage,context:null});if(data.more===true&&checkFormatter(opts.formatLoadMore,"formatLoadMore")){results.append("<li class='select2-more-results'>"+self.opts.escapeMarkup(opts.formatLoadMore(this.resultsPage))+"</li>");window.setTimeout(function(){self.loadMoreIfNeeded();},10);}
this.postprocessResults(data,initial);postRender();})});},cancel:function(){this.close();},blur:function(){this.close();this.container.removeClass("select2-container-active");this.dropdown.removeClass("select2-drop-active");if(this.search[0]===document.activeElement){this.search.blur();}
this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.opts.element.triggerHandler("blur");},focusSearch:function(){this.search.show();this.search.focus();window.setTimeout(this.bind(function(){this.search.show();this.search.focus();this.search.val(this.search.val());}),10);this.opts.element.triggerHandler("focus");},selectHighlighted:function(){var index=this.highlight(),highlighted=this.results.find(".select2-highlighted").not(".select2-disabled"),data=highlighted.closest('.select2-result-selectable').data("select2-data");if(data){highlighted.addClass("select2-disabled");this.highlight(index);this.onSelect(data);}},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder;},initContainerWidth:function(){function resolveContainerWidth(){var style,attrs,matches,i,l;if(this.opts.width==="off"){return null;}else if(this.opts.width==="element"){return this.opts.element.outerWidth()===0?'auto':this.opts.element.outerWidth()+'px';}else if(this.opts.width==="copy"||this.opts.width==="resolve"){style=this.opts.element.attr('style');if(style!==undefined){attrs=style.split(';');for(i=0,l=attrs.length;i<l;i=i+1){matches=attrs[i].replace(/\s/g,'').match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(matches!==null&&matches.length>=1)
return matches[1];}}
if(this.opts.width==="resolve"){style=this.opts.element.css('width');if(style.indexOf("%")>0)return style;return(this.opts.element.outerWidth()===0?'auto':this.opts.element.outerWidth()+'px');}
return null;}else if($.isFunction(this.opts.width)){return this.opts.width();}else{return this.opts.width;}};var width=resolveContainerWidth.call(this);if(width!==null){this.container.attr("style","width: "+width);}}});SingleSelect2=clazz(AbstractSelect2,{createContainer:function(){var container=$("<div></div>",{"class":"select2-container"}).html(["    <a href='#' onclick='return false;' class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return container;},opening:function(){this.search.show();this.parent.opening.apply(this,arguments);this.dropdown.removeClass("select2-offscreen");},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments);this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show();},focus:function(){this.close();this.selection.focus();},isFocused:function(){return this.selection[0]===document.activeElement;},cancel:function(){this.parent.cancel.apply(this,arguments);this.selection.focus();},initContainer:function(){var selection,container=this.container,dropdown=this.dropdown,clickingInside=false;this.selection=selection=container.find(".select2-choice");this.search.bind("keydown",this.bind(function(e){if(!this.enabled)return;if(e.which===KEY.PAGE_UP||e.which===KEY.PAGE_DOWN){killEvent(e);return;}
if(this.opened()){switch(e.which){case KEY.UP:case KEY.DOWN:this.moveHighlight((e.which===KEY.UP)?-1:1);killEvent(e);return;case KEY.TAB:case KEY.ENTER:this.selectHighlighted();killEvent(e);return;case KEY.ESC:this.cancel(e);killEvent(e);return;}}else{if(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.ESC){return;}
if(this.opts.openOnEnter===false&&e.which===KEY.ENTER){return;}
this.open();if(e.which===KEY.ENTER){return;}}}));this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1");}));this.search.bind("blur",this.bind(function(){if(!this.opened())this.container.removeClass("select2-container-active");window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex"));}),10);}));selection.delegate("abbr","mousedown",this.bind(function(e){if(!this.enabled)return;this.clear();killEventImmediately(e);this.close();this.triggerChange();this.selection.focus();}));selection.bind("mousedown",this.bind(function(e){clickingInside=true;if(this.opened()){this.close();this.selection.focus();}else if(this.enabled){this.open();}
clickingInside=false;}));dropdown.bind("mousedown",this.bind(function(){this.search.focus();}));selection.bind("focus",this.bind(function(){if(this.container.hasClass("select2-container-disabled"))return false;this.container.addClass("select2-container-active");this.search.attr("tabIndex","-1");}));selection.bind("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");}
window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"));}),10);}));selection.bind("keydown",this.bind(function(e){if(!this.enabled)return;if(e.which==KEY.DOWN||e.which==KEY.UP||(e.which==KEY.ENTER&&this.opts.openOnEnter)){this.open();killEvent(e);return;}
if(e.which==KEY.DELETE||e.which==KEY.BACKSPACE){if(this.opts.allowClear){this.clear();}
killEvent(e);return;}}));selection.bind("keypress",this.bind(function(e){var key=String.fromCharCode(e.which);this.search.val(key);this.open();}));this.setPlaceholder();this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active");}));},clear:function(){this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder();},initSelection:function(){var selected;if(this.opts.element.val()===""){this.close();this.setPlaceholder();}else{var self=this;this.opts.initSelection.call(null,this.opts.element,function(selected){if(selected!==undefined&&selected!==null){self.updateSelection(selected);self.close();self.setPlaceholder();}});}},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments);if(opts.element.get(0).tagName.toLowerCase()==="select"){opts.initSelection=function(element,callback){var selected=element.find(":selected");if($.isFunction(callback))
callback({id:selected.attr("value"),text:selected.text()});};}
return opts;},setPlaceholder:function(){var placeholder=this.getPlaceholder();if(this.opts.element.val()===""&&placeholder!==undefined){if(this.select&&this.select.find("option:first").text()!=="")return;this.selection.find("span").html(this.opts.escapeMarkup(placeholder));this.selection.addClass("select2-default");this.selection.find("abbr").hide();}},postprocessResults:function(data,initial){var selected=0,self=this,showSearchInput=true;this.results.find(".select2-result-selectable").each2(function(i,elm){if(equal(self.id(elm.data("select2-data")),self.opts.element.val())){selected=i;return false;}});this.highlight(selected);if(initial===true){showSearchInput=this.showSearchInput=countResults(data.results)>=this.opts.minimumResultsForSearch;this.dropdown.find(".select2-search")[showSearchInput?"removeClass":"addClass"]("select2-search-hidden");$(this.dropdown,this.container)[showSearchInput?"addClass":"removeClass"]("select2-with-searchbox");}},onSelect:function(data){var old=this.opts.element.val();this.opts.element.val(this.id(data));this.updateSelection(data);this.close();this.selection.focus();if(!equal(old,this.id(data))){this.triggerChange();}},updateSelection:function(data){var container=this.selection.find("span"),formatted;this.selection.data("select2-data",data);container.empty();formatted=this.opts.formatSelection(data,container);if(formatted!==undefined){container.append(this.opts.escapeMarkup(formatted));}
this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==undefined){this.selection.find("abbr").show();}},val:function(){var val,data=null,self=this;if(arguments.length===0){return this.opts.element.val();}
val=arguments[0];if(this.select){this.select.val(val).find(":selected").each2(function(i,elm){data={id:elm.attr("value"),text:elm.text()};return false;});this.updateSelection(data);this.setPlaceholder();}else{if(this.opts.initSelection===undefined){throw new Error("cannot call val() if initSelection() is not defined");}
if(!val){this.clear();return;}
this.opts.element.val(val);this.opts.initSelection(this.opts.element,function(data){self.opts.element.val(!data?"":self.id(data));self.updateSelection(data);self.setPlaceholder();});}},clearSearch:function(){this.search.val("");},data:function(value){var data;if(arguments.length===0){data=this.selection.data("select2-data");if(data==undefined)data=null;return data;}else{if(!value||value===""){this.clear();}else{this.opts.element.val(!value?"":this.id(value));this.updateSelection(value);}}}});MultiSelect2=clazz(AbstractSelect2,{createContainer:function(){var container=$("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return container;},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments);if(opts.element.get(0).tagName.toLowerCase()==="select"){opts.initSelection=function(element,callback){var data=[];element.find(":selected").each2(function(i,elm){data.push({id:elm.attr("value"),text:elm.text()});});if($.isFunction(callback))
callback(data);};}
return opts;},initContainer:function(){var selector=".select2-choices",selection;this.searchContainer=this.container.find(".select2-search-field");this.selection=selection=this.container.find(selector);this.search.bind("keydown",this.bind(function(e){if(!this.enabled)return;if(e.which===KEY.BACKSPACE&&this.search.val()===""){this.close();var choices,selected=selection.find(".select2-search-choice-focus");if(selected.length>0){this.unselect(selected.first());this.search.width(10);killEvent(e);return;}
choices=selection.find(".select2-search-choice");if(choices.length>0){choices.last().addClass("select2-search-choice-focus");}}else{selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");}
if(this.opened()){switch(e.which){case KEY.UP:case KEY.DOWN:this.moveHighlight((e.which===KEY.UP)?-1:1);killEvent(e);return;case KEY.ENTER:case KEY.TAB:this.selectHighlighted();killEvent(e);return;case KEY.ESC:this.cancel(e);killEvent(e);return;}}
if(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.BACKSPACE||e.which===KEY.ESC){return;}
if(this.opts.openOnEnter===false&&e.which===KEY.ENTER){return;}
this.open();if(e.which===KEY.PAGE_UP||e.which===KEY.PAGE_DOWN){killEvent(e);}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.clearSearch();e.stopImmediatePropagation();}));this.container.delegate(selector,"mousedown",this.bind(function(e){if(!this.enabled)return;if($(e.target).closest(".select2-search-choice").length>0){return;}
this.clearPlaceholder();this.open();this.focusSearch();e.preventDefault();}));this.container.delegate(selector,"focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder();}));this.clearSearch();},enable:function(){if(this.enabled)return;this.parent.enable.apply(this,arguments);this.search.removeAttr("disabled");},disable:function(){if(!this.enabled)return;this.parent.disable.apply(this,arguments);this.search.attr("disabled",true);},initSelection:function(){var data;if(this.opts.element.val()===""){this.updateSelection([]);this.close();this.clearSearch();}
if(this.select||this.opts.element.val()!==""){var self=this;this.opts.initSelection.call(null,this.opts.element,function(data){if(data!==undefined&&data!==null){self.updateSelection(data);self.close();self.clearSearch();}});}},clearSearch:function(){var placeholder=this.getPlaceholder();if(placeholder!==undefined&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(placeholder).addClass("select2-default");this.resizeSearch();}else{this.search.val(" ").width(10);}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default");}else{if(this.search.val()===" ")this.search.val("");}},opening:function(){this.parent.opening.apply(this,arguments);this.clearPlaceholder();this.resizeSearch();this.focusSearch();},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments);},focus:function(){this.close();this.search.focus();},isFocused:function(){return this.search.hasClass("select2-focused");},updateSelection:function(data){var ids=[],filtered=[],self=this;$(data).each(function(){if(indexOf(self.id(this),ids)<0){ids.push(self.id(this));filtered.push(this);}});data=filtered;this.selection.find(".select2-search-choice").remove();$(data).each(function(){self.addSelectedChoice(this);});self.postprocessResults();},tokenize:function(){var input=this.search.val();input=this.opts.tokenizer(input,this.data(),this.bind(this.onSelect),this.opts);if(input!=null&&input!=undefined){this.search.val(input);if(input.length>0){this.open();}}},add:function(data){if(data instanceof Array){for(var i=0;i<data.length;i++){this.addSelectedChoice(data[i]);this.postprocessResults();this.clearSearch();this.search.width(10);this.triggerChange({added:data[i]});}}else{this.addSelectedChoice(data);this.postprocessResults();this.clearSearch();this.search.width(10);this.triggerChange({added:data});}},onSelect:function(data){this.addSelectedChoice(data);if(this.select){this.postprocessResults();}
if(this.opts.closeOnSelect){this.close();this.search.width(10);}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();this.positionDropdown();}else{this.close();}}
this.triggerChange({added:data});this.focusSearch();},cancel:function(){this.close();this.focusSearch();},addSelectedChoice:function(data){data.disabled=data.disabled||false;var choice=$("<li class='select2-search-choice"+(data.disabled?" select2-search-choice-disabled":"")+"'>"+"    <div></div>"+
(data.disabled?"":"    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a>")+"</li>"),id=this.id(data),val=this.getVal(),formatted;formatted=this.opts.formatSelection(data,choice);choice.find("div").replaceWith("<div>"+this.opts.escapeMarkup(formatted)+"</div>");if(!data.disabled){choice.find(".select2-search-choice-close").bind("mousedown",killEvent).bind("click dblclick",this.bind(function(e){if(!this.enabled)return;$(e.target).closest(".select2-search-choice").fadeOut('fast',this.bind(function(){this.unselect($(e.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch();})).dequeue();killEvent(e);})).bind("focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");}));}
choice.data("select2-data",data);choice.insertBefore(this.searchContainer);val.push(id);this.setVal(val);},unselect:function(selected){var val=this.getVal(),data,index;selected=selected.closest(".select2-search-choice");if(selected.length===0){throw"Invalid argument: "+selected+". Must be .select2-search-choice";}
data=selected.data("select2-data");index=indexOf(this.id(data),val);if(index>=0){val.splice(index,1);this.setVal(val);if(this.select)this.postprocessResults();}
selected.remove();this.triggerChange({removed:data});},postprocessResults:function(){var val=this.getVal(),choices=this.results.find(".select2-result-selectable"),compound=this.results.find(".select2-result-with-children"),self=this;choices.each2(function(i,choice){var id=self.id(choice.data("select2-data"));if(indexOf(id,val)>=0){choice.addClass("select2-disabled").removeClass("select2-result-selectable");}else{choice.removeClass("select2-disabled").addClass("select2-result-selectable");}});compound.each2(function(i,e){if(e.find(".select2-result-selectable").length==0){e.addClass("select2-disabled");}else{e.removeClass("select2-disabled");}});choices.each2(function(i,choice){if(!choice.hasClass("select2-disabled")&&choice.hasClass("select2-result-selectable")){self.highlight(0);return false;}});},resizeSearch:function(){var minimumWidth,left,maxWidth,containerLeft,searchWidth,sideBorderPadding=getSideBorderPadding(this.search);minimumWidth=measureTextWidth(this.search)+10;left=this.search.offset().left;maxWidth=this.selection.width();containerLeft=this.selection.offset().left;searchWidth=maxWidth-(left-containerLeft)-sideBorderPadding;if(searchWidth<minimumWidth){searchWidth=maxWidth-sideBorderPadding;}
if(searchWidth<40){searchWidth=maxWidth-sideBorderPadding;}
this.search.width(searchWidth);},getVal:function(){var val;if(this.select){val=this.select.val();return val===null?[]:val;}else{val=this.opts.element.val();return splitVal(val,this.opts.separator);}},setVal:function(val){var unique;if(this.select){this.select.val(val);}else{unique=[];$(val).each(function(){if(indexOf(this,unique)<0)unique.push(this);});this.opts.element.val(unique.length===0?"":unique.join(this.opts.separator));}},val:function(){var val,data=[],self=this;if(arguments.length===0){return this.getVal();}
val=arguments[0];if(!val){this.opts.element.val("");this.updateSelection([]);this.clearSearch();return;}
this.setVal(val);if(this.select){this.select.find(":selected").each(function(){data.push({id:$(this).attr("value"),text:$(this).text()});});this.updateSelection(data);}else{if(this.opts.initSelection===undefined){throw new Error("val() cannot be called if initSelection() is not defined")}
this.opts.initSelection(this.opts.element,function(data){var ids=$(data).map(self.id);self.setVal(ids);self.updateSelection(data);self.clearSearch();});}
this.clearSearch();},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");}
this.search.width(0);this.searchContainer.hide();},onSortEnd:function(){var val=[],self=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){val.push(self.opts.id($(this).data("select2-data")));});this.setVal(val);this.triggerChange();},data:function(values){var self=this,ids;if(arguments.length===0){return this.selection.find(".select2-search-choice").map(function(){return $(this).data("select2-data");}).get();}else{if(!values){values=[];}
ids=$.map(values,function(e){return self.opts.id(e)});this.setVal(ids);this.updateSelection(values);this.clearSearch();}}});$.fn.select2=function(){var args=Array.prototype.slice.call(arguments,0),opts,select2,value,multiple,allowedMethods=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data","add"];this.each(function(){if(args.length===0||typeof(args[0])==="object"){opts=args.length===0?{}:$.extend({},args[0]);opts.element=$(this);if(opts.element.get(0).tagName.toLowerCase()==="select"){multiple=opts.element.attr("multiple");}else{multiple=opts.multiple||false;if("tags"in opts){opts.multiple=multiple=true;}}
select2=multiple?new MultiSelect2():new SingleSelect2();select2.init(opts);}else if(typeof(args[0])==="string"){if(indexOf(args[0],allowedMethods)<0){throw"Unknown method: "+args[0];}
value=undefined;select2=$(this).data("select2");if(select2===undefined)return;if(args[0]==="container"){value=select2.container;}else{value=select2[args[0]].apply(select2,args.slice(1));}
if(value!==undefined){return false;}}else{throw"Invalid arguments to select2 plugin: "+args;}});return(value===undefined)?this:value;};$.fn.select2.defaults={width:"copy",closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(result,container,query){var markup=[];markMatch(result.text,query.term,markup);return markup.join("");},formatSelection:function(data,container){return data?data.text:undefined;},formatResultCssClass:function(data){return undefined;},formatNoMatches:function(){return"No matches found";},formatInputTooShort:function(input,min){return"Please enter "+(min-input.length)+" more characters";},formatSelectionTooBig:function(limit){return"You can only select "+limit+" item"+(limit==1?"":"s");},formatLoadMore:function(pageNumber){return"Loading more results...";},formatSearching:function(){return"Searching...";},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(e){return e.id;},matcher:function(term,text){return text.toUpperCase().indexOf(term.toUpperCase())>=0;},separator:",",tokenSeparators:[],tokenizer:defaultTokenizer,escapeMarkup:function(markup){if(markup&&typeof(markup)==="string"){return markup.replace(/&/g,"&amp;");}
return markup;},blurOnChange:false};window.Select2={query:{ajax:ajax,local:local,tags:tags},util:{debounce:debounce,markMatch:markMatch},"class":{"abstract":AbstractSelect2,"single":SingleSelect2,"multi":MultiSelect2}};}(jQuery));;(function($){var $window=$(window);function UTCDate(){return new Date(Date.UTC.apply(Date,arguments));}
function UTCToday(){var today=new Date();return UTCDate(today.getUTCFullYear(),today.getUTCMonth(),today.getUTCDate());}
var Datepicker=function(element,options){var that=this;this._process_options(options);this.element=$(element);this.isInline=false;this.isInput=this.element.is('input');this.component=this.element.is('.date')?this.element.find('.add-on, .btn'):false;this.hasInput=this.component&&this.element.find('input').length;if(this.component&&this.component.length===0)
this.component=false;this.picker=$(DPGlobal.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass('datepicker-inline').appendTo(this.element);}else{this.picker.addClass('datepicker-dropdown dropdown-menu');}
if(this.o.rtl){this.picker.addClass('datepicker-rtl');this.picker.find('.prev i, .next i').toggleClass('icon-arrow-left icon-arrow-right');}
this.viewMode=this.o.startView;if(this.o.calendarWeeks)
this.picker.find('tfoot th.today').attr('colspan',function(i,val){return parseInt(val)+1;});this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show();}};Datepicker.prototype={constructor:Datepicker,_process_options:function(opts){this._o=$.extend({},this._o,opts);var o=this.o=$.extend({},this._o);var lang=o.language;if(!dates[lang]){lang=lang.split('-')[0];if(!dates[lang])
lang=defaults.language;}
o.language=lang;switch(o.startView){case 2:case'decade':o.startView=2;break;case 1:case'year':o.startView=1;break;default:o.startView=0;}
switch(o.minViewMode){case 1:case'months':o.minViewMode=1;break;case 2:case'years':o.minViewMode=2;break;default:o.minViewMode=0;}
o.startView=Math.max(o.startView,o.minViewMode);o.weekStart%=7;o.weekEnd=((o.weekStart+6)%7);var format=DPGlobal.parseFormat(o.format);if(o.startDate!==-Infinity){if(!!o.startDate){if(o.startDate instanceof Date)
o.startDate=this._local_to_utc(this._zero_time(o.startDate));else
o.startDate=DPGlobal.parseDate(o.startDate,format,o.language);}else{o.startDate=-Infinity;}}
if(o.endDate!==Infinity){if(!!o.endDate){if(o.endDate instanceof Date)
o.endDate=this._local_to_utc(this._zero_time(o.endDate));else
o.endDate=DPGlobal.parseDate(o.endDate,format,o.language);}else{o.endDate=Infinity;}}
o.daysOfWeekDisabled=o.daysOfWeekDisabled||[];if(!$.isArray(o.daysOfWeekDisabled))
o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/);o.daysOfWeekDisabled=$.map(o.daysOfWeekDisabled,function(d){return parseInt(d,10);});var plc=String(o.orientation).toLowerCase().split(/\s+/g),_plc=o.orientation.toLowerCase();plc=$.grep(plc,function(word){return(/^auto|left|right|top|bottom$/).test(word);});o.orientation={x:'auto',y:'auto'};if(!_plc||_plc==='auto');else if(plc.length===1){switch(plc[0]){case'top':case'bottom':o.orientation.y=plc[0];break;case'left':case'right':o.orientation.x=plc[0];break;}}
else{_plc=$.grep(plc,function(word){return(/^left|right$/).test(word);});o.orientation.x=_plc[0]||'auto';_plc=$.grep(plc,function(word){return(/^top|bottom$/).test(word);});o.orientation.y=_plc[0]||'auto';}},_events:[],_secondaryEvents:[],_applyEvents:function(evs){for(var i=0,el,ev;i<evs.length;i++){el=evs[i][0];ev=evs[i][1];el.on(ev);}},_unapplyEvents:function(evs){for(var i=0,el,ev;i<evs.length;i++){el=evs[i][0];ev=evs[i][1];el.off(ev);}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:$.proxy(this.show,this),keyup:$.proxy(this.update,this),keydown:$.proxy(this.keydown,this)}]];}
else if(this.component&&this.hasInput){this._events=[[this.element.find('input'),{focus:$.proxy(this.show,this),keyup:$.proxy(this.update,this),keydown:$.proxy(this.keydown,this)}],[this.component,{click:$.proxy(this.show,this)}]];}
else if(this.element.is('div')){this.isInline=true;}
else{this._events=[[this.element,{click:$.proxy(this.show,this)}]];}
this._secondaryEvents=[[this.picker,{click:$.proxy(this.click,this)}],[$(window),{resize:$.proxy(this.place,this)}],[$(document),{mousedown:$.proxy(function(e){if(!(this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length)){this.hide();}},this)}]];},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events);},_detachEvents:function(){this._unapplyEvents(this._events);},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents);},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents);},_trigger:function(event,altdate){var date=altdate||this.date,local_date=this._utc_to_local(date);this.element.trigger({type:event,date:local_date,format:$.proxy(function(altformat){var format=altformat||this.o.format;return DPGlobal.formatDate(date,format,this.o.language);},this)});},show:function(e){if(!this.isInline)
this.picker.appendTo('body');this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();if(e){e.preventDefault();}
this._trigger('show');},hide:function(e){if(this.isInline)return;if(!this.picker.is(':visible'))return;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find('input').val()))
this.setValue();this._trigger('hide');},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date;}},_utc_to_local:function(utc){return new Date(utc.getTime()+(utc.getTimezoneOffset()*60000));},_local_to_utc:function(local){return new Date(local.getTime()-(local.getTimezoneOffset()*60000));},_zero_time:function(local){return new Date(local.getFullYear(),local.getMonth(),local.getDate());},_zero_utc_time:function(utc){return new Date(Date.UTC(utc.getUTCFullYear(),utc.getUTCMonth(),utc.getUTCDate()));},getDate:function(){return this._utc_to_local(this.getUTCDate());},getUTCDate:function(){return this.date;},setDate:function(d){this.setUTCDate(this._local_to_utc(d));},setUTCDate:function(d){this.date=d;this.setValue();},setValue:function(){var formatted=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find('input').val(formatted).change();}}else{this.element.val(formatted).change();}},getFormattedDate:function(format){if(format===undefined)
format=this.o.format;return DPGlobal.formatDate(this.date,format,this.o.language);},setStartDate:function(startDate){this._process_options({startDate:startDate});this.update();this.updateNavArrows();},setEndDate:function(endDate){this._process_options({endDate:endDate});this.update();this.updateNavArrows();},setDaysOfWeekDisabled:function(daysOfWeekDisabled){this._process_options({daysOfWeekDisabled:daysOfWeekDisabled});this.update();this.updateNavArrows();},place:function(){if(this.isInline)return;var calendarWidth=this.picker.outerWidth(),calendarHeight=this.picker.outerHeight(),visualPadding=10,windowWidth=$window.width(),windowHeight=$window.height(),scrollTop=$window.scrollTop();var zIndex=parseInt(this.element.parents().filter(function(){return $(this).css('z-index')!='auto';}).first().css('z-index'))+10;var offset=this.component?this.component.parent().offset():this.element.offset();var height=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var width=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var left=offset.left,top=offset.top;this.picker.removeClass('datepicker-orient-top datepicker-orient-bottom '+'datepicker-orient-right datepicker-orient-left');if(this.o.orientation.x!=='auto'){this.picker.addClass('datepicker-orient-'+this.o.orientation.x);if(this.o.orientation.x==='right')
left-=calendarWidth-width;}
else{this.picker.addClass('datepicker-orient-left');if(offset.left<0)
left-=offset.left-visualPadding;else if(offset.left+calendarWidth>windowWidth)
left=windowWidth-calendarWidth-visualPadding;}
var yorient=this.o.orientation.y,top_overflow,bottom_overflow;if(yorient==='auto'){top_overflow=-scrollTop+offset.top-calendarHeight;bottom_overflow=scrollTop+windowHeight-(offset.top+height+calendarHeight);if(Math.max(top_overflow,bottom_overflow)===bottom_overflow)
yorient='top';else
yorient='bottom';}
this.picker.addClass('datepicker-orient-'+yorient);if(yorient==='top')
top+=height;else
top-=calendarHeight+parseInt(this.picker.css('padding-top'));this.picker.css({top:top,left:left,zIndex:zIndex});},_allow_update:true,update:function(){if(!this._allow_update)return;var oldDate=new Date(this.date),date,fromArgs=false;if(arguments&&arguments.length&&(typeof arguments[0]==='string'||arguments[0]instanceof Date)){date=arguments[0];if(date instanceof Date)
date=this._local_to_utc(date);fromArgs=true;}else{date=this.isInput?this.element.val():this.element.data('date')||this.element.find('input').val();delete this.element.data().date;}
this.date=DPGlobal.parseDate(date,this.o.format,this.o.language);if(fromArgs){this.setValue();}else if(date){if(oldDate.getTime()!==this.date.getTime())
this._trigger('changeDate');}else{this._trigger('clearDate');}
if(this.date<this.o.startDate){this.viewDate=new Date(this.o.startDate);this.date=new Date(this.o.startDate);}else if(this.date>this.o.endDate){this.viewDate=new Date(this.o.endDate);this.date=new Date(this.o.endDate);}else{this.viewDate=new Date(this.date);this.date=new Date(this.date);}
this.fill();},fillDow:function(){var dowCnt=this.o.weekStart,html='<tr>';if(this.o.calendarWeeks){var cell='<th class="cw">&nbsp;</th>';html+=cell;this.picker.find('.datepicker-days thead tr:first-child').prepend(cell);}
while(dowCnt<this.o.weekStart+7){html+='<th class="dow">'+dates[this.o.language].daysMin[(dowCnt++)%7]+'</th>';}
html+='</tr>';this.picker.find('.datepicker-days thead').append(html);},fillMonths:function(){var html='',i=0;while(i<12){html+='<span class="month">'+dates[this.o.language].monthsShort[i++]+'</span>';}
this.picker.find('.datepicker-months td').html(html);},setRange:function(range){if(!range||!range.length)
delete this.range;else
this.range=$.map(range,function(d){return d.valueOf();});this.fill();},getClassNames:function(date){var cls=[],year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),currentDate=this.date.valueOf(),today=new Date();if(date.getUTCFullYear()<year||(date.getUTCFullYear()==year&&date.getUTCMonth()<month)){cls.push('old');}else if(date.getUTCFullYear()>year||(date.getUTCFullYear()==year&&date.getUTCMonth()>month)){cls.push('new');}
if(this.o.todayHighlight&&date.getUTCFullYear()==today.getFullYear()&&date.getUTCMonth()==today.getMonth()&&date.getUTCDate()==today.getDate()){cls.push('today');}
if(currentDate&&date.valueOf()==currentDate){cls.push('active');}
if(date.valueOf()<this.o.startDate||date.valueOf()>this.o.endDate||$.inArray(date.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){cls.push('disabled');}
if(this.range){if(date>this.range[0]&&date<this.range[this.range.length-1]){cls.push('range');}
if($.inArray(date.valueOf(),this.range)!=-1){cls.push('selected');}}
return cls;},fill:function(){var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth(),startYear=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,startMonth=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,endYear=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,endMonth=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,currentDate=this.date&&this.date.valueOf(),tooltip;this.picker.find('.datepicker-days thead th.datepicker-switch').text(dates[this.o.language].months[month]+' '+year);this.picker.find('tfoot th.today').text(dates[this.o.language].today).toggle(this.o.todayBtn!==false);this.picker.find('tfoot th.clear').text(dates[this.o.language].clear).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var prevMonth=UTCDate(year,month-1,28,0,0,0,0),day=DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(),prevMonth.getUTCMonth());prevMonth.setUTCDate(day);prevMonth.setUTCDate(day-(prevMonth.getUTCDay()-this.o.weekStart+7)%7);var nextMonth=new Date(prevMonth);nextMonth.setUTCDate(nextMonth.getUTCDate()+42);nextMonth=nextMonth.valueOf();var html=[];var clsName;while(prevMonth.valueOf()<nextMonth){if(prevMonth.getUTCDay()==this.o.weekStart){html.push('<tr>');if(this.o.calendarWeeks){var
ws=new Date(+prevMonth+(this.o.weekStart-prevMonth.getUTCDay()-7)%7*864e5),th=new Date(+ws+(7+4-ws.getUTCDay())%7*864e5),yth=new Date(+(yth=UTCDate(th.getUTCFullYear(),0,1))+(7+4-yth.getUTCDay())%7*864e5),calWeek=(th-yth)/864e5/7+1;html.push('<td class="cw">'+calWeek+'</td>');}}
clsName=this.getClassNames(prevMonth);clsName.push('day');if(this.o.beforeShowDay!==$.noop){var before=this.o.beforeShowDay(this._utc_to_local(prevMonth));if(before===undefined)
before={};else if(typeof(before)==='boolean')
before={enabled:before};else if(typeof(before)==='string')
before={classes:before};if(before.enabled===false)
clsName.push('disabled');if(before.classes)
clsName=clsName.concat(before.classes.split(/\s+/));if(before.tooltip)
tooltip=before.tooltip;}
clsName=$.unique(clsName);html.push('<td class="'+clsName.join(' ')+'"'+(tooltip?' title="'+tooltip+'"':'')+'>'+prevMonth.getUTCDate()+'</td>');if(prevMonth.getUTCDay()==this.o.weekEnd){html.push('</tr>');}
prevMonth.setUTCDate(prevMonth.getUTCDate()+1);}
this.picker.find('.datepicker-days tbody').empty().append(html.join(''));var currentYear=this.date&&this.date.getUTCFullYear();var months=this.picker.find('.datepicker-months').find('th:eq(1)').text(year).end().find('span').removeClass('active');if(currentYear&&currentYear==year){months.eq(this.date.getUTCMonth()).addClass('active');}
if(year<startYear||year>endYear){months.addClass('disabled');}
if(year==startYear){months.slice(0,startMonth).addClass('disabled');}
if(year==endYear){months.slice(endMonth+1).addClass('disabled');}
html='';year=parseInt(year/10,10)*10;var yearCont=this.picker.find('.datepicker-years').find('th:eq(1)').text(year+'-'+(year+9)).end().find('td');year-=1;for(var i=-1;i<11;i++){html+='<span class="year'+(i==-1?' old':i==10?' new':'')+(currentYear==year?' active':'')+(year<startYear||year>endYear?' disabled':'')+'">'+year+'</span>';year+=1;}
yearCont.html(html);},updateNavArrows:function(){if(!this._allow_update)return;var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&year<=this.o.startDate.getUTCFullYear()&&month<=this.o.startDate.getUTCMonth()){this.picker.find('.prev').css({visibility:'hidden'});}else{this.picker.find('.prev').css({visibility:'visible'});}
if(this.o.endDate!==Infinity&&year>=this.o.endDate.getUTCFullYear()&&month>=this.o.endDate.getUTCMonth()){this.picker.find('.next').css({visibility:'hidden'});}else{this.picker.find('.next').css({visibility:'visible'});}
break;case 1:case 2:if(this.o.startDate!==-Infinity&&year<=this.o.startDate.getUTCFullYear()){this.picker.find('.prev').css({visibility:'hidden'});}else{this.picker.find('.prev').css({visibility:'visible'});}
if(this.o.endDate!==Infinity&&year>=this.o.endDate.getUTCFullYear()){this.picker.find('.next').css({visibility:'hidden'});}else{this.picker.find('.next').css({visibility:'visible'});}
break;}},click:function(e){e.preventDefault();var target=$(e.target).closest('span, td, th');if(target.length==1){switch(target[0].nodeName.toLowerCase()){case'th':switch(target[0].className){case'datepicker-switch':this.showMode(1);break;case'prev':case'next':var dir=DPGlobal.modes[this.viewMode].navStep*(target[0].className=='prev'?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,dir);this._trigger('changeMonth',this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,dir);if(this.viewMode===1)
this._trigger('changeYear',this.viewDate);break;}
this.fill();break;case'today':var date=new Date();date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);this.showMode(-2);var which=this.o.todayBtn=='linked'?null:'view';this._setDate(date,which);break;case'clear':var element;if(this.isInput)
element=this.element;else if(this.component)
element=this.element.find('input');if(element)
element.val("").change();this._trigger('changeDate');this.update();if(this.o.autoclose)
this.hide();break;}
break;case'span':if(!target.is('.disabled')){this.viewDate.setUTCDate(1);if(target.is('.month')){var day=1;var month=target.parent().find('span').index(target);var year=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(month);this._trigger('changeMonth',this.viewDate);if(this.o.minViewMode===1){this._setDate(UTCDate(year,month,day,0,0,0,0));}}else{var year=parseInt(target.text(),10)||0;var day=1;var month=0;this.viewDate.setUTCFullYear(year);this._trigger('changeYear',this.viewDate);if(this.o.minViewMode===2){this._setDate(UTCDate(year,month,day,0,0,0,0));}}
this.showMode(-1);this.fill();}
break;case'td':if(target.is('.day')&&!target.is('.disabled')){var day=parseInt(target.text(),10)||1;var year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth();if(target.is('.old')){if(month===0){month=11;year-=1;}else{month-=1;}}else if(target.is('.new')){if(month==11){month=0;year+=1;}else{month+=1;}}
this._setDate(UTCDate(year,month,day,0,0,0,0));}
break;}}},_setDate:function(date,which){if(!which||which=='date')
this.date=new Date(date);if(!which||which=='view')
this.viewDate=new Date(date);this.fill();this.setValue();this._trigger('changeDate');var element;if(this.isInput){element=this.element;}else if(this.component){element=this.element.find('input');}
if(element){element.change();}
if(this.o.autoclose&&(!which||which=='date')){this.hide();}},moveMonth:function(date,dir){if(!dir)return date;var new_date=new Date(date.valueOf()),day=new_date.getUTCDate(),month=new_date.getUTCMonth(),mag=Math.abs(dir),new_month,test;dir=dir>0?1:-1;if(mag==1){test=dir==-1?function(){return new_date.getUTCMonth()==month;}:function(){return new_date.getUTCMonth()!=new_month;};new_month=month+dir;new_date.setUTCMonth(new_month);if(new_month<0||new_month>11)
new_month=(new_month+12)%12;}else{for(var i=0;i<mag;i++)
new_date=this.moveMonth(new_date,dir);new_month=new_date.getUTCMonth();new_date.setUTCDate(day);test=function(){return new_month!=new_date.getUTCMonth();};}
while(test()){new_date.setUTCDate(--day);new_date.setUTCMonth(new_month);}
return new_date;},moveYear:function(date,dir){return this.moveMonth(date,dir*12);},dateWithinRange:function(date){return date>=this.o.startDate&&date<=this.o.endDate;},keydown:function(e){if(this.picker.is(':not(:visible)')){if(e.keyCode==27)
this.show();return;}
var dateChanged=false,dir,day,month,newDate,newViewDate;switch(e.keyCode){case 27:this.hide();e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;dir=e.keyCode==37?-1:1;if(e.ctrlKey){newDate=this.moveYear(this.date,dir);newViewDate=this.moveYear(this.viewDate,dir);this._trigger('changeYear',this.viewDate);}else if(e.shiftKey){newDate=this.moveMonth(this.date,dir);newViewDate=this.moveMonth(this.viewDate,dir);this._trigger('changeMonth',this.viewDate);}else{newDate=new Date(this.date);newDate.setUTCDate(this.date.getUTCDate()+dir);newViewDate=new Date(this.viewDate);newViewDate.setUTCDate(this.viewDate.getUTCDate()+dir);}
if(this.dateWithinRange(newDate)){this.date=newDate;this.viewDate=newViewDate;this.setValue();this.update();e.preventDefault();dateChanged=true;}
break;case 38:case 40:if(!this.o.keyboardNavigation)break;dir=e.keyCode==38?-1:1;if(e.ctrlKey){newDate=this.moveYear(this.date,dir);newViewDate=this.moveYear(this.viewDate,dir);this._trigger('changeYear',this.viewDate);}else if(e.shiftKey){newDate=this.moveMonth(this.date,dir);newViewDate=this.moveMonth(this.viewDate,dir);this._trigger('changeMonth',this.viewDate);}else{newDate=new Date(this.date);newDate.setUTCDate(this.date.getUTCDate()+dir*7);newViewDate=new Date(this.viewDate);newViewDate.setUTCDate(this.viewDate.getUTCDate()+dir*7);}
if(this.dateWithinRange(newDate)){this.date=newDate;this.viewDate=newViewDate;this.setValue();this.update();e.preventDefault();dateChanged=true;}
break;case 13:this.hide();e.preventDefault();break;case 9:this.hide();break;}
if(dateChanged){this._trigger('changeDate');var element;if(this.isInput){element=this.element;}else if(this.component){element=this.element.find('input');}
if(element){element.change();}}},showMode:function(dir){if(dir){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+dir));}
this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).css('display','block');this.updateNavArrows();}};var DateRangePicker=function(element,options){this.element=$(element);this.inputs=$.map(options.inputs,function(i){return i.jquery?i[0]:i;});delete options.inputs;$(this.inputs).datepicker(options).bind('changeDate',$.proxy(this.dateUpdated,this));this.pickers=$.map(this.inputs,function(i){return $(i).data('datepicker');});this.updateDates();};DateRangePicker.prototype={updateDates:function(){this.dates=$.map(this.pickers,function(i){return i.date;});this.updateRanges();},updateRanges:function(){var range=$.map(this.dates,function(d){return d.valueOf();});$.each(this.pickers,function(i,p){p.setRange(range);});},dateUpdated:function(e){var dp=$(e.target).data('datepicker'),new_date=dp.getUTCDate(),i=$.inArray(e.target,this.inputs),l=this.inputs.length;if(i==-1)return;if(new_date<this.dates[i]){while(i>=0&&new_date<this.dates[i]){this.pickers[i--].setUTCDate(new_date);}}
else if(new_date>this.dates[i]){while(i<l&&new_date>this.dates[i]){this.pickers[i++].setUTCDate(new_date);}}
this.updateDates();},remove:function(){$.map(this.pickers,function(p){p.remove();});delete this.element.data().datepicker;}};function opts_from_el(el,prefix){var data=$(el).data(),out={},inkey,replace=new RegExp('^'+prefix.toLowerCase()+'([A-Z])'),prefix=new RegExp('^'+prefix.toLowerCase());for(var key in data)
if(prefix.test(key)){inkey=key.replace(replace,function(_,a){return a.toLowerCase();});out[inkey]=data[key];}
return out;}
function opts_from_locale(lang){var out={};if(!dates[lang]){lang=lang.split('-')[0]
if(!dates[lang])
return;}
var d=dates[lang];$.each(locale_opts,function(i,k){if(k in d)
out[k]=d[k];});return out;}
var old=$.fn.datepicker;$.fn.datepicker=function(option){var args=Array.apply(null,arguments);args.shift();var internal_return,this_return;this.each(function(){var $this=$(this),data=$this.data('datepicker'),options=typeof option=='object'&&option;if(!data){var elopts=opts_from_el(this,'date'),xopts=$.extend({},defaults,elopts,options),locopts=opts_from_locale(xopts.language),opts=$.extend({},defaults,locopts,elopts,options);if($this.is('.input-daterange')||opts.inputs){var ropts={inputs:opts.inputs||$this.find('input').toArray()};$this.data('datepicker',(data=new DateRangePicker(this,$.extend(opts,ropts))));}
else{$this.data('datepicker',(data=new Datepicker(this,opts)));}}
if(typeof option=='string'&&typeof data[option]=='function'){internal_return=data[option].apply(data,args);if(internal_return!==undefined)
return false;}});if(internal_return!==undefined)
return internal_return;else
return this;};var defaults=$.fn.datepicker.defaults={autoclose:false,beforeShowDay:$.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:'mm/dd/yyyy',keyboardNavigation:true,language:'en',minViewMode:0,orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var locale_opts=$.fn.datepicker.locale_opts=['format','rtl','weekStart'];$.fn.datepicker.Constructor=Datepicker;var dates=$.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var DPGlobal={modes:[{clsName:'days',navFnc:'Month',navStep:1},{clsName:'months',navFnc:'FullYear',navStep:1},{clsName:'years',navFnc:'FullYear',navStep:10}],isLeapYear:function(year){return(((year%4===0)&&(year%100!==0))||(year%400===0));},getDaysInMonth:function(year,month){return[31,(DPGlobal.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month];},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(format){var separators=format.replace(this.validParts,'\0').split('\0'),parts=format.match(this.validParts);if(!separators||!separators.length||!parts||parts.length===0){throw new Error("Invalid date format.");}
return{separators:separators,parts:parts};},parseDate:function(date,format,language){if(date instanceof Date)return date;if(typeof format==='string')
format=DPGlobal.parseFormat(format);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(date)){var part_re=/([\-+]\d+)([dmwy])/,parts=date.match(/([\-+]\d+)([dmwy])/g),part,dir;date=new Date();for(var i=0;i<parts.length;i++){part=part_re.exec(parts[i]);dir=parseInt(part[1]);switch(part[2]){case'd':date.setUTCDate(date.getUTCDate()+dir);break;case'm':date=Datepicker.prototype.moveMonth.call(Datepicker.prototype,date,dir);break;case'w':date.setUTCDate(date.getUTCDate()+dir*7);break;case'y':date=Datepicker.prototype.moveYear.call(Datepicker.prototype,date,dir);break;}}
return UTCDate(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),0,0,0);}
var parts=date&&date.match(this.nonpunctuation)||[],date=new Date(),parsed={},setters_order=['yyyy','yy','M','MM','m','mm','d','dd'],setters_map={yyyy:function(d,v){return d.setUTCFullYear(v);},yy:function(d,v){return d.setUTCFullYear(2000+v);},m:function(d,v){if(isNaN(d))
return d;v-=1;while(v<0)v+=12;v%=12;d.setUTCMonth(v);while(d.getUTCMonth()!=v)
d.setUTCDate(d.getUTCDate()-1);return d;},d:function(d,v){return d.setUTCDate(v);}},val,filtered,part;setters_map['M']=setters_map['MM']=setters_map['mm']=setters_map['m'];setters_map['dd']=setters_map['d'];date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);var fparts=format.parts.slice();if(parts.length!=fparts.length){fparts=$(fparts).filter(function(i,p){return $.inArray(p,setters_order)!==-1;}).toArray();}
if(parts.length==fparts.length){for(var i=0,cnt=fparts.length;i<cnt;i++){val=parseInt(parts[i],10);part=fparts[i];if(isNaN(val)){switch(part){case'MM':filtered=$(dates[language].months).filter(function(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m==p;});val=$.inArray(filtered[0],dates[language].months)+1;break;case'M':filtered=$(dates[language].monthsShort).filter(function(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m==p;});val=$.inArray(filtered[0],dates[language].monthsShort)+1;break;}}
parsed[part]=val;}
for(var i=0,_date,s;i<setters_order.length;i++){s=setters_order[i];if(s in parsed&&!isNaN(parsed[s])){_date=new Date(date);setters_map[s](_date,parsed[s]);if(!isNaN(_date))
date=_date;}}}
return date;},formatDate:function(date,format,language){if(typeof format==='string')
format=DPGlobal.parseFormat(format);var val={d:date.getUTCDate(),D:dates[language].daysShort[date.getUTCDay()],DD:dates[language].days[date.getUTCDay()],m:date.getUTCMonth()+1,M:dates[language].monthsShort[date.getUTCMonth()],MM:dates[language].months[date.getUTCMonth()],yy:date.getUTCFullYear().toString().substring(2),yyyy:date.getUTCFullYear()};val.dd=(val.d<10?'0':'')+val.d;val.mm=(val.m<10?'0':'')+val.m;var date=[],seps=$.extend([],format.separators);for(var i=0,cnt=format.parts.length;i<=cnt;i++){if(seps.length)
date.push(seps.shift());date.push(val[format.parts[i]]);}
return date.join('');},headTemplate:'<thead>'+'<tr>'+'<th class="prev">&laquo;</th>'+'<th colspan="5" class="datepicker-switch"></th>'+'<th class="next">&raquo;</th>'+'</tr>'+'</thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};DPGlobal.template='<div class="datepicker">'+'<div class="datepicker-days">'+'<table class=" table-condensed">'+
DPGlobal.headTemplate+'<tbody></tbody>'+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-months">'+'<table class="table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-years">'+'<table class="table-condensed">'+
DPGlobal.headTemplate+
DPGlobal.contTemplate+
DPGlobal.footTemplate+'</table>'+'</div>'+'</div>';$.fn.datepicker.DPGlobal=DPGlobal;$.fn.datepicker.noConflict=function(){$.fn.datepicker=old;return this;};$(document).on('focus.datepicker.data-api click.datepicker.data-api','[data-provide="datepicker"]',function(e){var $this=$(this);if($this.data('datepicker'))return;e.preventDefault();$this.datepicker('show');});$(function(){$('[data-provide="datepicker-inline"]').datepicker();});}(window.jQuery));;!function($){"use strict";var Timepicker=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.timepicker.defaults,options,this.$element.data());this.minuteStep=this.options.minuteStep||this.minuteStep;this.secondStep=this.options.secondStep||this.secondStep;this.showMeridian=this.options.showMeridian||this.showMeridian;this.showSeconds=this.options.showSeconds||this.showSeconds;this.showInputs=this.options.showInputs||this.showInputs;this.disableFocus=this.options.disableFocus||this.disableFocus;this.template=this.options.template||this.template;this.modalBackdrop=this.options.modalBackdrop||this.modalBackdrop;this.defaultTime=this.options.defaultTime||this.defaultTime;this.open=false;this.init();};Timepicker.prototype={constructor:Timepicker,init:function(){if(this.$element.parent().hasClass('input-append')){this.$element.parent('.input-append').find('.add-on').on('click',$.proxy(this.showWidget,this));this.$element.on({focus:$.proxy(this.highlightUnit,this),click:$.proxy(this.highlightUnit,this),keypress:$.proxy(this.elementKeypress,this),blur:$.proxy(this.blurElement,this)});}else{if(this.template){this.$element.on({focus:$.proxy(this.showWidget,this),click:$.proxy(this.showWidget,this),blur:$.proxy(this.blurElement,this)});}else{this.$element.on({focus:$.proxy(this.highlightUnit,this),click:$.proxy(this.highlightUnit,this),keypress:$.proxy(this.elementKeypress,this),blur:$.proxy(this.blurElement,this)});}}
this.$widget=$(this.getTemplate()).appendTo('body');this.$widget.on('click',$.proxy(this.widgetClick,this));if(this.showInputs){this.$widget.find('input').on({click:function(){this.select();},keypress:$.proxy(this.widgetKeypress,this),change:$.proxy(this.updateFromWidgetInputs,this)});}
this.setDefaultTime(this.defaultTime);},showWidget:function(e){e.stopPropagation();e.preventDefault();if(this.open){return;}
this.$element.trigger('show');if(this.disableFocus){this.$element.blur();}
var pos=$.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.updateFromElementVal();$('html').trigger('click.timepicker.data-api').one('click.timepicker.data-api',$.proxy(this.hideWidget,this));if(this.template==='modal'){this.$widget.modal('show').on('hidden',$.proxy(this.hideWidget,this));}else{this.$widget.css({top:pos.top+pos.height,left:pos.left})
if(!this.open){this.$widget.addClass('open');}}
this.open=true;this.$element.trigger('shown');},hideWidget:function(){this.$element.trigger('hide');if(this.template==='modal'){this.$widget.modal('hide');}else{this.$widget.removeClass('open');}
this.open=false;this.$element.trigger('hidden');},widgetClick:function(e){e.stopPropagation();e.preventDefault();var action=$(e.target).closest('a').data('action');if(action){this[action]();this.update();}},widgetKeypress:function(e){var input=$(e.target).closest('input').attr('name');switch(e.keyCode){case 9:if(this.showMeridian){if(input=='meridian'){this.hideWidget();}}else{if(this.showSeconds){if(input=='second'){this.hideWidget();}}else{if(input=='minute'){this.hideWidget();}}}
break;case 27:this.hideWidget();break;case 38:switch(input){case'hour':this.incrementHour();break;case'minute':this.incrementMinute();break;case'second':this.incrementSecond();break;case'meridian':this.toggleMeridian();break;}
this.update();break;case 40:switch(input){case'hour':this.decrementHour();break;case'minute':this.decrementMinute();break;case'second':this.decrementSecond();break;case'meridian':this.toggleMeridian();break;}
this.update();break;}},elementKeypress:function(e){var input=this.$element.get(0);switch(e.keyCode){case 0:break;case 9:this.updateFromElementVal();if(this.showMeridian){if(this.highlightedUnit!='meridian'){e.preventDefault();this.highlightNextUnit();}}else{if(this.showSeconds){if(this.highlightedUnit!='second'){e.preventDefault();this.highlightNextUnit();}}else{if(this.highlightedUnit!='minute'){e.preventDefault();this.highlightNextUnit();}}}
break;case 27:this.updateFromElementVal();break;case 37:this.updateFromElementVal();this.highlightPrevUnit();break;case 38:switch(this.highlightedUnit){case'hour':this.incrementHour();break;case'minute':this.incrementMinute();break;case'second':this.incrementSecond();break;case'meridian':this.toggleMeridian();break;}
this.updateElement();break;case 39:this.updateFromElementVal();this.highlightNextUnit();break;case 40:switch(this.highlightedUnit){case'hour':this.decrementHour();break;case'minute':this.decrementMinute();break;case'second':this.decrementSecond();break;case'meridian':this.toggleMeridian();break;}
this.updateElement();break;}
if(e.keyCode!==0&&e.keyCode!==8&&e.keyCode!==9&&e.keyCode!==46){e.preventDefault();}},setValues:function(time){if(this.showMeridian){var arr=time.split(' ');var timeArray=arr[0].split(':');this.meridian=arr[1];}else{var timeArray=time.split(':');}
this.hour=parseInt(timeArray[0],10);this.minute=parseInt(timeArray[1],10);this.second=parseInt(timeArray[2],10);if(isNaN(this.hour)){this.hour=0;}
if(isNaN(this.minute)){this.minute=0;}
if(this.showMeridian){if(this.hour>12){this.hour=12;}else if(this.hour<1){this.hour=1;}
if(this.meridian=='am'||this.meridian=='a'){this.meridian='AM';}else if(this.meridian=='pm'||this.meridian=='p'){this.meridian='PM';}
if(this.meridian!='AM'&&this.meridian!='PM'){this.meridian='AM';}}else{if(this.hour>=24){this.hour=23;}else if(this.hour<0){this.hour=0;}}
if(this.minute<0){this.minute=0;}else if(this.minute>=60){this.minute=59;}
if(this.showSeconds){if(isNaN(this.second)){this.second=0;}else if(this.second<0){this.second=0;}else if(this.second>=60){this.second=59;}}
this.updateElement();this.updateWidget();},setMeridian:function(meridian){if(meridian=='a'||meridian=='am'||meridian=='AM'){this.meridian='AM';}else if(meridian=='p'||meridian=='pm'||meridian=='PM'){this.meridian='PM';}else{this.updateWidget();}
this.updateElement();},setDefaultTime:function(defaultTime){if(defaultTime){if(defaultTime==='current'){var dTime=new Date();var hours=dTime.getHours();var minutes=Math.floor(dTime.getMinutes()/this.minuteStep)*this.minuteStep;var seconds=Math.floor(dTime.getSeconds()/this.secondStep)*this.secondStep;var meridian="AM";if(this.showMeridian){if(hours===0){hours=12;}else if(hours>=12){if(hours>12){hours=hours-12;}
meridian="PM";}else{meridian="AM";}}
this.hour=hours;this.minute=minutes;this.second=seconds;this.meridian=meridian;}else if(defaultTime==='value'){this.setValues(this.$element.val());}else{this.setValues(defaultTime);}
this.update();}else{this.hour=0;this.minute=0;this.second=0;}},formatTime:function(hour,minute,second,meridian){hour=hour<10?'0'+hour:hour;minute=minute<10?'0'+minute:minute;second=second<10?'0'+second:second;return hour+':'+minute+(this.showSeconds?':'+second:'')+(this.showMeridian?' '+meridian:'');},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian);},setTime:function(time){this.setValues(time);this.update();},update:function(){this.updateElement();this.updateWidget();},blurElement:function(){this.highlightedUnit=undefined;this.updateFromElementVal();},updateElement:function(){var time=this.getTime();this.$element.val(time).change();switch(this.highlightedUnit){case'hour':this.highlightHour();break;case'minute':this.highlightMinute();break;case'second':this.highlightSecond();break;case'meridian':this.highlightMeridian();break;}},updateWidget:function(){if(this.showInputs){this.$widget.find('input.bootstrap-timepicker-hour').val(this.hour<10?'0'+this.hour:this.hour);this.$widget.find('input.bootstrap-timepicker-minute').val(this.minute<10?'0'+this.minute:this.minute);if(this.showSeconds){this.$widget.find('input.bootstrap-timepicker-second').val(this.second<10?'0'+this.second:this.second);}
if(this.showMeridian){this.$widget.find('input.bootstrap-timepicker-meridian').val(this.meridian);}}else{this.$widget.find('span.bootstrap-timepicker-hour').text(this.hour);this.$widget.find('span.bootstrap-timepicker-minute').text(this.minute<10?'0'+this.minute:this.minute);if(this.showSeconds){this.$widget.find('span.bootstrap-timepicker-second').text(this.second<10?'0'+this.second:this.second);}
if(this.showMeridian){this.$widget.find('span.bootstrap-timepicker-meridian').text(this.meridian);}}},updateFromElementVal:function(e){var time=this.$element.val();if(time){this.setValues(time);this.updateWidget();}},updateFromWidgetInputs:function(){var time=$('input.bootstrap-timepicker-hour',this.$widget).val()+':'+
$('input.bootstrap-timepicker-minute',this.$widget).val()+
(this.showSeconds?':'+$('input.bootstrap-timepicker-second',this.$widget).val():'')+
(this.showMeridian?' '+$('input.bootstrap-timepicker-meridian',this.$widget).val():'');this.setValues(time);},getCursorPosition:function(){var input=this.$element.get(0);if('selectionStart'in input){return input.selectionStart;}else if(document.selection){input.focus();var sel=document.selection.createRange();var selLen=document.selection.createRange().text.length;sel.moveStart('character',-input.value.length);return sel.text.length-selLen;}},highlightUnit:function(){var input=this.$element.get(0);this.position=this.getCursorPosition();if(this.position>=0&&this.position<=2){this.highlightHour();}else if(this.position>=3&&this.position<=5){this.highlightMinute();}else if(this.position>=6&&this.position<=8){if(this.showSeconds){this.highlightSecond();}else{this.highlightMeridian();}}else if(this.position>=9&&this.position<=11){this.highlightMeridian();}},highlightNextUnit:function(){switch(this.highlightedUnit){case'hour':this.highlightMinute();break;case'minute':if(this.showSeconds){this.highlightSecond();}else{this.highlightMeridian();}
break;case'second':this.highlightMeridian();break;case'meridian':this.highlightHour();break;}},highlightPrevUnit:function(){switch(this.highlightedUnit){case'hour':this.highlightMeridian();break;case'minute':this.highlightHour();break;case'second':this.highlightMinute();break;case'meridian':if(this.showSeconds){this.highlightSecond();}else{this.highlightMinute();}
break;}},highlightHour:function(){this.highlightedUnit='hour';this.$element.get(0).setSelectionRange(0,2);},highlightMinute:function(){this.highlightedUnit='minute';this.$element.get(0).setSelectionRange(3,5);},highlightSecond:function(){this.highlightedUnit='second';this.$element.get(0).setSelectionRange(6,8);},highlightMeridian:function(){this.highlightedUnit='meridian';if(this.showSeconds){this.$element.get(0).setSelectionRange(9,11);}else{this.$element.get(0).setSelectionRange(6,8);}},incrementHour:function(){if(this.showMeridian){if(this.hour===11){this.toggleMeridian();}else if(this.hour===12){return this.hour=1;}}
if(this.hour===23){return this.hour=0;}
this.hour=this.hour+1;},decrementHour:function(){if(this.showMeridian){if(this.hour===1){return this.hour=12;}
else if(this.hour===12){this.toggleMeridian();}}
if(this.hour===0){return this.hour=23;}
this.hour=this.hour-1;},incrementMinute:function(){var newVal=this.minute+this.minuteStep-(this.minute%this.minuteStep);if(newVal>59){this.incrementHour();this.minute=newVal-60;}else{this.minute=newVal;}},decrementMinute:function(){var newVal=this.minute-this.minuteStep;if(newVal<0){this.decrementHour();this.minute=newVal+60;}else{this.minute=newVal;}},incrementSecond:function(){var newVal=this.second+this.secondStep-(this.second%this.secondStep);if(newVal>59){this.incrementMinute();this.second=newVal-60;}else{this.second=newVal;}},decrementSecond:function(){var newVal=this.second-this.secondStep;if(newVal<0){this.decrementMinute();this.second=newVal+60;}else{this.second=newVal;}},toggleMeridian:function(){this.meridian=this.meridian==='AM'?'PM':'AM';this.update();},getTemplate:function(){if(this.options.templates[this.options.template]){return this.options.templates[this.options.template];}
if(this.showInputs){var hourTemplate='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>';var minuteTemplate='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>';var secondTemplate='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>';var meridianTemplate='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>';}else{var hourTemplate='<span class="bootstrap-timepicker-hour"></span>';var minuteTemplate='<span class="bootstrap-timepicker-minute"></span>';var secondTemplate='<span class="bootstrap-timepicker-second"></span>';var meridianTemplate='<span class="bootstrap-timepicker-meridian"></span>';}
var templateContent='<table class="'+(this.showSeconds?'show-seconds':'')+' '+(this.showMeridian?'show-meridian':'')+'">'+'<tr>'+'<td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td>'+'<td class="separator">&nbsp;</td>'+'<td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+
(this.showSeconds?'<td class="separator">&nbsp;</td>'+'<td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':'')+
(this.showMeridian?'<td class="separator">&nbsp;</td>'+'<td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':'')+'</tr>'+'<tr>'+'<td>'+hourTemplate+'</td> '+'<td class="separator">:</td>'+'<td>'+minuteTemplate+'</td> '+
(this.showSeconds?'<td class="separator">:</td>'+'<td>'+secondTemplate+'</td>':'')+
(this.showMeridian?'<td class="separator">&nbsp;</td>'+'<td>'+meridianTemplate+'</td>':'')+'</tr>'+'<tr>'+'<td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+
(this.showSeconds?'<td class="separator">&nbsp;</td>'+'<td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':'')+
(this.showMeridian?'<td class="separator">&nbsp;</td>'+'<td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':'')+'</tr>'+'</table>';var template;switch(this.options.template){case'modal':template='<div class="bootstrap-timepicker modal hide fade in" style="top: 30%; margin-top: 0; width: 200px; margin-left: -100px;" data-backdrop="'+(this.modalBackdrop?'true':'false')+'">'+'<div class="modal-header">'+'<a href="#" class="close" data-dismiss="modal"></a>'+'<h3>Pick a Time</h3>'+'</div>'+'<div class="modal-content">'+
templateContent+'</div>'+'<div class="modal-footer">'+'<a href="#" class="btn btn-primary" data-dismiss="modal">Ok</a>'+'</div>'+'</div>';break;case'dropdown':template='<div class="bootstrap-timepicker dropdown-menu">'+
templateContent+'</div>';break;}
return template;}};$.fn.timepicker=function(option){return this.each(function(){var $this=$(this),data=$this.data('timepicker'),options=typeof option=='object'&&option;if(!data){$this.data('timepicker',(data=new Timepicker(this,options)));}
if(typeof option=='string'){data[option]();}})}
$.fn.timepicker.defaults={minuteStep:15,secondStep:15,disableFocus:false,defaultTime:'current',showSeconds:false,showInputs:true,showMeridian:true,template:'dropdown',modalBackdrop:false,templates:{}}
$.fn.timepicker.Constructor=Timepicker}(window.jQuery);;!function($){'use strict';var Validator=function(options){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric.",phone:"This value should be a valid phone number."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},this.init(options);};Validator.prototype={constructor:Validator,validators:{notnull:function(val){return val.length>0;},notblank:function(val){return'string'===typeof val&&''!==val.replace(/^\s+/g,'').replace(/\s+$/g,'');},required:function(val){if('object'===typeof val){for(var i in val){if(this.required(val[i])){return true;}}
return false;}
return this.notnull(val)&&this.notblank(val);},type:function(val,type){var regExp;switch(type){case'number':regExp=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case'digits':regExp=/^\d+$/;break;case'alphanum':regExp=/^\w+$/;break;case'email':regExp=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;break;case'url':val=new RegExp('(https?|s?ftp|git)','i').test(val)?val:'http://'+val;case'urlstrict':regExp=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case'dateIso':regExp=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case'phone':regExp=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;break;default:return false;}
return''!==val?regExp.test(val):false;},regexp:function(val,regExp,self){return new RegExp(regExp,self.options.regexpFlag||'').test(val);},minlength:function(val,min){return val.length>=min;},maxlength:function(val,max){return val.length<=max;},rangelength:function(val,arrayRange){return this.minlength(val,arrayRange[0])&&this.maxlength(val,arrayRange[1]);},min:function(val,min){return Number(val)>=min;},max:function(val,max){return Number(val)<=max;},range:function(val,arrayRange){return val>=arrayRange[0]&&val<=arrayRange[1];},equalto:function(val,elem,self){self.options.validateIfUnchanged=true;return val===$(elem).val();},remote:function(val,url,self){var result=null,data={},dataType={};data[self.$element.attr('name')]=val;if('undefined'!==typeof self.options.remoteDatatype){dataType={dataType:self.options.remoteDatatype};}
var manage=function(isConstraintValid,message){if('undefined'!==typeof message&&'undefined'!==typeof self.Validator.messages.remote&&message!==self.Validator.messages.remote){$(self.ulError+' .remote').remove();}
self.updtConstraint({name:'remote',valid:isConstraintValid},message);self.manageValidationResult();};var handleResponse=function(response){if('object'===typeof response){return response;}
try{response=$.parseJSON(response);}catch(err){}
return response;}
var manageErrorMessage=function(response){return'object'===typeof response&&null!==response?('undefined'!==typeof response.error?response.error:('undefined'!==typeof response.message?response.message:null)):null;}
$.ajax($.extend({},{url:url,data:data,type:self.options.remoteMethod||'GET',success:function(response){response=handleResponse(response);manage(1===response||true===response||('object'===typeof response&&null!==response&&'undefined'!==typeof response.success),manageErrorMessage(response));},error:function(response){response=handleResponse(response);manage(false,manageErrorMessage(response));}},dataType));return result;},mincheck:function(obj,val){return this.minlength(obj,val);},maxcheck:function(obj,val){return this.maxlength(obj,val);},rangecheck:function(obj,arrayRange){return this.rangelength(obj,arrayRange);}},init:function(options){var customValidators=options.validators,customMessages=options.messages;var key;for(key in customValidators){this.addValidator(key,customValidators[key]);}
for(key in customMessages){this.addMessage(key,customMessages[key]);}},formatMesssage:function(message,args){if('object'===typeof args){for(var i in args){message=this.formatMesssage(message,args[i]);}
return message;}
return'string'===typeof message?message.replace(new RegExp('%s','i'),args):'';},addValidator:function(name,fn){this.validators[name]=fn;},addMessage:function(key,message,type){if('undefined'!==typeof type&&true===type){this.messages.type[key]=message;return;}
if('type'===key){for(var i in message){this.messages.type[i]=message[i];}
return;}
this.messages[key]=message;}};var ParsleyField=function(element,options,type){this.options=options;this.Validator=new Validator(options);if(type==='ParsleyFieldMultiple'){return this;}
this.init(element,type||'ParsleyField');};ParsleyField.prototype={constructor:ParsleyField,init:function(element,type){this.type=type;this.valid=true;this.element=element;this.validatedOnce=false;this.$element=$(element);this.val=this.$element.val();this.isRequired=false;this.constraints={};if('undefined'===typeof this.isRadioOrCheckbox){this.isRadioOrCheckbox=false;this.hash=this.generateHash();this.errorClassHandler=this.options.errors.classHandler(element,this.isRadioOrCheckbox)||this.$element;}
this.ulErrorManagement();this.bindHtml5Constraints();this.addConstraints();if(this.hasConstraints()){this.bindValidationEvents();}},setParent:function(elem){this.$parent=$(elem);},getParent:function(){return this.$parent;},bindHtml5Constraints:function(){if(this.$element.hasClass('required')||this.$element.prop('required')){this.options.required=true;}
if('undefined'!==typeof this.$element.attr('type')&&new RegExp(this.$element.attr('type'),'i').test('email url number range')){this.options.type=this.$element.attr('type');if(new RegExp(this.options.type,'i').test('number range')){this.options.type='number';if('undefined'!==typeof this.$element.attr('min')&&this.$element.attr('min').length){this.options.min=this.$element.attr('min');}
if('undefined'!==typeof this.$element.attr('max')&&this.$element.attr('max').length){this.options.max=this.$element.attr('max');}}}
if('string'===typeof this.$element.attr('pattern')&&this.$element.attr('pattern').length){this.options.regexp=this.$element.attr('pattern');}},addConstraints:function(){for(var constraint in this.options){var addConstraint={};addConstraint[constraint]=this.options[constraint];this.addConstraint(addConstraint,true);}},addConstraint:function(constraint,doNotUpdateValidationEvents){for(var name in constraint){name=name.toLowerCase();if('function'===typeof this.Validator.validators[name]){this.constraints[name]={name:name,requirements:constraint[name],valid:null}
if(name==='required'){this.isRequired=true;}
this.addCustomConstraintMessage(name);}}
if('undefined'===typeof doNotUpdateValidationEvents){this.bindValidationEvents();}},updateConstraint:function(constraint,message){for(var name in constraint){this.updtConstraint({name:name,requirements:constraint[name],valid:null},message);}},updtConstraint:function(constraint,message){this.constraints[constraint.name]=$.extend(true,this.constraints[constraint.name],constraint);if('string'===typeof message){this.Validator.messages[constraint.name]=message;}
this.bindValidationEvents();},removeConstraint:function(constraintName){var constraintName=constraintName.toLowerCase();delete this.constraints[constraintName];if(constraintName==='required'){this.isRequired=false;}
if(!this.hasConstraints()){if('ParsleyForm'===typeof this.getParent()){this.getParent().removeItem(this.$element);return;}
this.destroy();return;}
this.bindValidationEvents();},addCustomConstraintMessage:function(constraint){var customMessage=constraint
+('type'===constraint&&'undefined'!==typeof this.options[constraint]?this.options[constraint].charAt(0).toUpperCase()+this.options[constraint].substr(1):'')
+'Message';if('undefined'!==typeof this.options[customMessage]){this.Validator.addMessage('type'===constraint?this.options[constraint]:constraint,this.options[customMessage],'type'===constraint);}},bindValidationEvents:function(){this.valid=null;this.$element.addClass('parsley-validated');this.$element.off('.'+this.type);if(this.options.remote&&!new RegExp('change','i').test(this.options.trigger)){this.options.trigger=!this.options.trigger?'change':' change';}
var triggers=(!this.options.trigger?'':this.options.trigger)
+(new RegExp('key','i').test(this.options.trigger)?'':' keyup');if(this.$element.is('select')){triggers+=new RegExp('change','i').test(triggers)?'':' change';}
triggers=triggers.replace(/^\s+/g,'').replace(/\s+$/g,'');this.$element.on((triggers+' ').split(' ').join('.'+this.type+' '),false,$.proxy(this.eventValidation,this));},generateHash:function(){return'parsley-'+(Math.random()+'').substring(2);},getHash:function(){return this.hash;},getVal:function(){return this.$element.data('value')||this.$element.val();},eventValidation:function(event){var val=this.getVal();if(event.type==='keyup'&&!/keyup/i.test(this.options.trigger)&&!this.validatedOnce){return true;}
if(event.type==='change'&&!/change/i.test(this.options.trigger)&&!this.validatedOnce){return true;}
if(!this.isRadioOrCheckbox&&val.length<this.options.validationMinlength&&!this.validatedOnce){return true;}
this.validate();},isValid:function(){return this.validate(false);},hasConstraints:function(){for(var constraint in this.constraints){return true;}
return false;},validate:function(errorBubbling){var val=this.getVal(),valid=null;if(!this.hasConstraints()){return null;}
if(this.options.listeners.onFieldValidate(this.element,this)||(''===val&&!this.isRequired)){this.reset();return null;}
if(!this.needsValidation(val)){return this.valid;}
valid=this.applyValidators();if('undefined'!==typeof errorBubbling?errorBubbling:this.options.showErrors){this.manageValidationResult();}
return valid;},needsValidation:function(val){if(!this.options.validateIfUnchanged&&this.valid!==null&&this.val===val&&this.validatedOnce){return false;}
this.val=val;return this.validatedOnce=true;},applyValidators:function(){var valid=null;for(var constraint in this.constraints){var result=this.Validator.validators[this.constraints[constraint].name](this.val,this.constraints[constraint].requirements,this);if(false===result){valid=false;this.constraints[constraint].valid=valid;this.options.listeners.onFieldError(this.element,this.constraints,this);}else if(true===result){this.constraints[constraint].valid=true;valid=false!==valid;this.options.listeners.onFieldSuccess(this.element,this.constraints,this);}}
return valid;},manageValidationResult:function(){var valid=null;for(var constraint in this.constraints){if(false===this.constraints[constraint].valid){this.manageError(this.constraints[constraint]);valid=false;}else if(true===this.constraints[constraint].valid){this.removeError(this.constraints[constraint].name);valid=false!==valid;}}
this.valid=valid;if(true===this.valid){this.removeErrors();this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass);return true;}else if(false===this.valid){this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass);return false;}
return valid;},ulErrorManagement:function(){this.ulError='#'+this.hash;this.ulTemplate=$(this.options.errors.errorsWrapper).attr('id',this.hash).addClass('parsley-error-list');},removeError:function(constraintName){var liError=this.ulError+' .'+constraintName,that=this;this.options.animate?$(liError).fadeOut(this.options.animateDuration,function(){$(this).remove();if(that.ulError&&$(that.ulError).children().length===0){that.removeErrors();}}):$(liError).remove();if(this.ulError&&$(this.ulError).children().length===0){this.removeErrors();}},addError:function(error){for(var constraint in error){var liTemplate=$(this.options.errors.errorElem).addClass(constraint);$(this.ulError).append(this.options.animate?$(liTemplate).html(error[constraint]).hide().fadeIn(this.options.animateDuration):$(liTemplate).html(error[constraint]));}},removeErrors:function(){this.options.animate?$(this.ulError).fadeOut(this.options.animateDuration,function(){$(this).remove();}):$(this.ulError).remove();},reset:function(){this.valid=null;this.removeErrors();this.validatedOnce=false;this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);for(var constraint in this.constraints){this.constraints[constraint].valid=null;}
return this;},manageError:function(constraint){if(!$(this.ulError).length){this.manageErrorContainer();}
if('required'===constraint.name&&null!==this.getVal()&&this.getVal().length>0){return;}else if(this.isRequired&&'required'!==constraint.name&&(null===this.getVal()||0===this.getVal().length)){return;}
var constraintName=constraint.name,liClass=false!==this.options.errorMessage?'custom-error-message':constraintName,liError={},message=false!==this.options.errorMessage?this.options.errorMessage:(constraint.name==='type'?this.Validator.messages[constraintName][constraint.requirements]:('undefined'===typeof this.Validator.messages[constraintName]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[constraintName],constraint.requirements)));if(!$(this.ulError+' .'+liClass).length){liError[liClass]=message;this.addError(liError);}},manageErrorContainer:function(){var errorContainer=this.options.errorContainer||this.options.errors.container(this.element,this.isRadioOrCheckbox),ulTemplate=this.options.animate?this.ulTemplate.show():this.ulTemplate;if('undefined'!==typeof errorContainer){$(errorContainer).append(ulTemplate);return;}
if(this.$element.parent().find('label.sub_label').length>0){ulTemplate.addClass('for_sub_label');this.$element.parent().find('label.sub_label').after(ulTemplate);return;}
if(this.$element.parent().hasClass('select2-container')){this.$element.parent().after(ulTemplate);}else{!this.isRadioOrCheckbox?this.$element.after(ulTemplate):this.$element.parent().after(ulTemplate);}},addListener:function(object){for(var listener in object){this.options.listeners[listener]=object[listener];}},destroy:function(){this.$element.removeClass('parsley-validated');this.reset().$element.off('.'+this.type).removeData(this.type);}};var ParsleyFieldMultiple=function(element,options,type){this.initMultiple(element,options);this.inherit(element,options);this.Validator=new Validator(options);this.init(element,type||'ParsleyFieldMultiple');};ParsleyFieldMultiple.prototype={constructor:ParsleyFieldMultiple,initMultiple:function(element,options){this.element=element;this.$element=$(element);this.group=options.group||false;this.hash=this.getName();this.siblings=this.group?'[data-group="'+this.group+'"]':'input[name="'+this.$element.attr('name')+'"]';this.isRadioOrCheckbox=true;this.isRadio=this.$element.is('input[type=radio]');this.isCheckbox=this.$element.is('input[type=checkbox]');this.errorClassHandler=options.errors.classHandler(element,this.isRadioOrCheckbox)||this.$element.parent();},inherit:function(element,options){var clone=new ParsleyField(element,options,'ParsleyFieldMultiple');for(var property in clone){if('undefined'===typeof this[property]){this[property]=clone[property];}}},getName:function(){if(this.group){return'parsley-'+this.group;}
if('undefined'===typeof this.$element.attr('name')){throw"A radio / checkbox input must have a data-group attribute or a name to be Parsley validated !";}
return'parsley-'+this.$element.attr('name').replace(/(:|\.|\[|\])/g,'');},getVal:function(){if(this.isRadio){return $(this.siblings+':checked').val()||'';}
if(this.isCheckbox){var values=[];$(this.siblings+':checked').each(function(){values.push($(this).val());});return values;}},bindValidationEvents:function(){this.valid=null;this.$element.addClass('parsley-validated');this.$element.off('.'+this.type);var self=this,triggers=(!this.options.trigger?'':this.options.trigger)
+(new RegExp('change','i').test(this.options.trigger)?'':' change');triggers=triggers.replace(/^\s+/g,'').replace(/\s+$/g,'');$(this.siblings).each(function(){$(this).on(triggers.split(' ').join('.'+self.type+' '),false,$.proxy(self.eventValidation,self));})}};var ParsleyForm=function(element,options,type){this.init(element,options,type||'parsleyForm');};ParsleyForm.prototype={constructor:ParsleyForm,init:function(element,options,type){this.type=type;this.items=[];this.$element=$(element);this.options=options;var self=this;this.$element.find(options.inputs).each(function(){self.addItem(this);});this.$element.on('submit.'+this.type,false,$.proxy(this.validate,this));},addListener:function(object){for(var listener in object){if(new RegExp('Field').test(listener)){for(var item=0;item<this.items.length;item++){this.items[item].addListener(object);}}else{this.options.listeners[listener]=object[listener];}}},addItem:function(elem){if($(elem).is(this.options.excluded)){return false;}
var ParsleyField=$(elem).parsley(this.options);ParsleyField.setParent(this);this.items.push(ParsleyField);},removeItem:function(elem){var parsleyItem=$(elem).parsley();for(var i=0;i<this.items.length;i++){if(this.items[i].hash===parsleyItem.hash){this.items[i].destroy();this.items.splice(i,1);return true;}}
return false;},validate:function(event){var valid=true;this.focusedField=false;for(var item=0;item<this.items.length;item++){if('undefined'!==typeof this.items[item]&&false===this.items[item].validate()){valid=false;if(!this.focusedField&&'first'===this.options.focus||'last'===this.options.focus){this.focusedField=this.items[item].$element;}}}
if(this.focusedField&&!valid){this.focusedField.focus();}
this.options.listeners.onFormSubmit(valid,event,this);return valid;},isValid:function(){for(var item=0;item<this.items.length;item++){if(false===this.items[item].isValid()){return false;}}
return true;},removeErrors:function(){for(var item=0;item<this.items.length;item++){this.items[item].parsley('reset');}},destroy:function(){for(var item=0;item<this.items.length;item++){this.items[item].destroy();}
this.$element.off('.'+this.type).removeData(this.type);},reset:function(){for(var item=0;item<this.items.length;item++){this.items[item].reset();}}};$.fn.parsley=function(option,fn){var options=$.extend(true,{},$.fn.parsley.defaults,'undefined'!==typeof window.ParsleyConfig?window.ParsleyConfig:{},option,this.data()),newInstance=null;function bind(self,type){var parsleyInstance=$(self).data(type);if(!parsleyInstance){switch(type){case'parsleyForm':parsleyInstance=new ParsleyForm(self,options,'parsleyForm');break;case'parsleyField':parsleyInstance=new ParsleyField(self,options,'parsleyField');break;case'parsleyFieldMultiple':parsleyInstance=new ParsleyFieldMultiple(self,options,'parsleyFieldMultiple');break;default:return;}
$(self).data(type,parsleyInstance);}
if('string'===typeof option&&'function'===typeof parsleyInstance[option]){var response=parsleyInstance[option](fn);return'undefined'!==typeof response?response:$(self);}
return parsleyInstance;}
if($(this).is('form')){newInstance=bind($(this),'parsleyForm');}else if($(this).is(options.inputs)&&!$(this).is(options.excluded)){newInstance=bind($(this),!$(this).is('input[type=radio], input[type=checkbox]')?'parsleyField':'parsleyFieldMultiple');}
return'function'===typeof fn?fn():newInstance;};$.fn.parsley.Constructor=ParsleyForm;$.fn.parsley.defaults={inputs:'input, textarea, select',excluded:'input[type=hidden], input[type=file], :disabled, :hidden',trigger:false,animate:true,animateDuration:300,focus:'first',validationMinlength:3,successClass:'parsley-success',errorClass:'parsley-error',errorMessage:false,validators:{},showErrors:true,messages:{},validateIfUnchanged:false,errors:{classHandler:function(elem,isRadioOrCheckbox){},container:function(elem,isRadioOrCheckbox){},errorsWrapper:'<ul></ul>',errorElem:'<li></li>'},listeners:{onFieldValidate:function(elem,ParsleyForm){return false;},onFormSubmit:function(isFormValid,event,ParsleyForm){},onFieldError:function(elem,constraints,ParsleyField){},onFieldSuccess:function(elem,constraints,ParsleyField){}}};$(window).on('load',function(){$('[data-validate="parsley"]').each(function(){$(this).parsley();});});}(window.jQuery||window.Zepto);;window.ParsleyConfig=window.ParsleyConfig||{};(function($){window.ParsleyConfig=$.extend(true,{},window.ParsleyConfig,{validators:{minwords:function(val,nbWords){val=val.replace(/(^\s*)|(\s*$)/gi,"");val=val.replace(/[ ]{2,}/gi," ");val=val.replace(/\n /,"\n");val=val.split(' ').length;return val>=nbWords;},maxwords:function(val,nbWords){val=val.replace(/(^\s*)|(\s*$)/gi,"");val=val.replace(/[ ]{2,}/gi," ");val=val.replace(/\n /,"\n");val=val.split(' ').length;return val<=nbWords;},rangewords:function(val,obj){val=val.replace(/(^\s*)|(\s*$)/gi,"");val=val.replace(/[ ]{2,}/gi," ");val=val.replace(/\n /,"\n");val=val.split(' ').length;return val>=obj[0]&&val<=obj[1];},greaterthan:function(val,elem,self){self.options.validateIfUnchanged=true;return new Number(val)>new Number($(elem).val());},lessthan:function(val,elem,self){self.options.validateIfUnchanged=true;return new Number(val)<new Number($(elem).val());},beforedate:function(val,elem,self){return Date.parse(val)<Date.parse($(elem).val());},afterdate:function(val,elem,self){return Date.parse($(elem).val())<Date.parse(val);},luhn:function(val,elem,self){val=val.replace(/[ -]/g,'');var digit,n,sum,_j,_len1,_ref2;sum=0;_ref2=val.split('').reverse();for(n=_j=0,_len1=_ref2.length;_j<_len1;n=++_j){digit=_ref2[n];digit=+digit;if(n%2){digit*=2;if(digit<10){sum+=digit;}else{sum+=digit-9;}}else{sum+=digit;}}
return sum%10===0;}},messages:{minwords:"This value should have %s words at least.",maxwords:"This value should have %s words maximum.",rangewords:"This value should have between %s and %s words.",greaterthan:"This value should be greater than %s.",lessthan:"This value should be less than %s.",beforedate:"This date should be before %s.",afterdate:"This date should be after %s.",luhn:"Please enter a valid credit card number."}});}(window.jQuery||window.Zepto));;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
var Mustache=(typeof module!=="undefined"&&module.exports)||{};(function(exports){exports.name="mustache.js";exports.version="0.5.0-dev";exports.tags=["{{","}}"];exports.parse=parse;exports.compile=compile;exports.render=render;exports.clearCache=clearCache;exports.to_html=function(template,view,partials,send){var result=render(template,view,partials);if(typeof send==="function"){send(result);}else{return result;}};var _toString=Object.prototype.toString;var _isArray=Array.isArray;var _forEach=Array.prototype.forEach;var _trim=String.prototype.trim;var isArray;if(_isArray){isArray=_isArray;}else{isArray=function(obj){return _toString.call(obj)==="[object Array]";};}
var forEach;if(_forEach){forEach=function(obj,callback,scope){return _forEach.call(obj,callback,scope);};}else{forEach=function(obj,callback,scope){for(var i=0,len=obj.length;i<len;++i){callback.call(scope,obj[i],i,obj);}};}
var spaceRe=/^\s*$/;function isWhitespace(string){return spaceRe.test(string);}
var trim;if(_trim){trim=function(string){return string==null?"":_trim.call(string);};}else{var trimLeft,trimRight;if(isWhitespace("\xA0")){trimLeft=/^\s+/;trimRight=/\s+$/;}else{trimLeft=/^[\s\xA0]+/;trimRight=/[\s\xA0]+$/;}
trim=function(string){return string==null?"":String(string).replace(trimLeft,"").replace(trimRight,"");};}
var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':'&quot;',"'":'&#39;'};function escapeHTML(string){return String(string).replace(/&(?!\w+;)|[<>"']/g,function(s){return escapeMap[s]||s;});}
function debug(e,template,line,file){file=file||"<template>";var lines=template.split("\n"),start=Math.max(line-3,0),end=Math.min(lines.length,line+3),context=lines.slice(start,end);var c;for(var i=0,len=context.length;i<len;++i){c=i+start+1;context[i]=(c===line?" >> ":"    ")+context[i];}
e.template=template;e.line=line;e.file=file;e.message=[file+":"+line,context.join("\n"),"",e.message].join("\n");return e;}
function lookup(name,stack,defaultValue){if(name==="."){return stack[stack.length-1];}
var names=name.split(".");var lastIndex=names.length-1;var target=names[lastIndex];var value,context,i=stack.length,j,localStack;while(i){localStack=stack.slice(0);context=stack[--i];j=0;while(j<lastIndex){context=context[names[j++]];if(context==null){break;}
localStack.push(context);}
if(context&&typeof context==="object"&&target in context){value=context[target];break;}}
if(typeof value==="function"){value=value.call(localStack[localStack.length-1]);}
if(value==null){return defaultValue;}
return value;}
function renderSection(name,stack,callback,inverted){var buffer="";var value=lookup(name,stack);if(inverted){if(value==null||value===false||(isArray(value)&&value.length===0)){buffer+=callback();}}else if(isArray(value)){forEach(value,function(value){stack.push(value);buffer+=callback();stack.pop();});}else if(typeof value==="object"){stack.push(value);buffer+=callback();stack.pop();}else if(typeof value==="function"){var scope=stack[stack.length-1];var scopedRender=function(template){return render(template,scope);};buffer+=value.call(scope,callback(),scopedRender)||"";}else if(value){buffer+=callback();}
return buffer;}
function parse(template,options){options=options||{};var tags=options.tags||exports.tags,openTag=tags[0],closeTag=tags[tags.length-1];var code=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'];var spaces=[],hasTag=false,nonSpace=false;var stripSpace=function(){if(hasTag&&!nonSpace&&!options.space){while(spaces.length){code.splice(spaces.pop(),1);}}else{spaces=[];}
hasTag=false;nonSpace=false;};var sectionStack=[],updateLine,nextOpenTag,nextCloseTag;var setTags=function(source){tags=trim(source).split(/\s+/);nextOpenTag=tags[0];nextCloseTag=tags[tags.length-1];};var includePartial=function(source){code.push('";',updateLine,'\nvar partial = partials["'+trim(source)+'"];','\nif (partial) {','\n  buffer += render(partial,stack[stack.length - 1],partials);','\n}','\nbuffer += "');};var openSection=function(source,inverted){var name=trim(source);if(name===""){throw debug(new Error("Section name may not be empty"),template,line,options.file);}
sectionStack.push({name:name,inverted:inverted});code.push('";',updateLine,'\nvar name = "'+name+'";','\nvar callback = (function () {','\n  return function () {','\n    var buffer = "";','\nbuffer += "');};var openInvertedSection=function(source){openSection(source,true);};var closeSection=function(source){var name=trim(source);var openName=sectionStack.length!=0&&sectionStack[sectionStack.length-1].name;if(!openName||name!=openName){throw debug(new Error('Section named "'+name+'" was never opened'),template,line,options.file);}
var section=sectionStack.pop();code.push('";','\n    return buffer;','\n  };','\n})();');if(section.inverted){code.push("\nbuffer += renderSection(name,stack,callback,true);");}else{code.push("\nbuffer += renderSection(name,stack,callback);");}
code.push('\nbuffer += "');};var sendPlain=function(source){code.push('";',updateLine,'\nbuffer += lookup("'+trim(source)+'",stack,"");','\nbuffer += "');};var sendEscaped=function(source){code.push('";',updateLine,'\nbuffer += escapeHTML(lookup("'+trim(source)+'",stack,""));','\nbuffer += "');};var line=1,c,callback;for(var i=0,len=template.length;i<len;++i){if(template.slice(i,i+openTag.length)===openTag){i+=openTag.length;c=template.substr(i,1);updateLine='\nline = '+line+';';nextOpenTag=openTag;nextCloseTag=closeTag;hasTag=true;switch(c){case"!":i++;callback=null;break;case"=":i++;closeTag="="+closeTag;callback=setTags;break;case">":i++;callback=includePartial;break;case"#":i++;callback=openSection;break;case"^":i++;callback=openInvertedSection;break;case"/":i++;callback=closeSection;break;case"{":closeTag="}"+closeTag;case"&":i++;nonSpace=true;callback=sendPlain;break;default:nonSpace=true;callback=sendEscaped;}
var end=template.indexOf(closeTag,i);if(end===-1){throw debug(new Error('Tag "'+openTag+'" was not closed properly'),template,line,options.file);}
var source=template.substring(i,end);if(callback){callback(source);}
var n=0;while(~(n=source.indexOf("\n",n))){line++;n++;}
i=end+closeTag.length-1;openTag=nextOpenTag;closeTag=nextCloseTag;}else{c=template.substr(i,1);switch(c){case'"':case"\\":nonSpace=true;code.push("\\"+c);break;case"\r":break;case"\n":spaces.push(code.length);code.push("\\n");stripSpace();line++;break;default:if(isWhitespace(c)){spaces.push(code.length);}else{nonSpace=true;}
code.push(c);}}}
if(sectionStack.length!=0){throw debug(new Error('Section "'+sectionStack[sectionStack.length-1].name+'" was not closed properly'),template,line,options.file);}
stripSpace();code.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var body=code.join("").replace(/buffer \+= "";\n/g,"");if(options.debug){if(typeof console!="undefined"&&console.log){console.log(body);}else if(typeof print==="function"){print(body);}}
return body;}
function _compile(template,options){var args="view,partials,stack,lookup,escapeHTML,renderSection,render";var body=parse(template,options);var fn=new Function(args,body);return function(view,partials){partials=partials||{};var stack=[view];try{return fn(view,partials,stack,lookup,escapeHTML,renderSection,render);}catch(e){throw debug(e.error,template,e.line,options.file);}};}
var _cache={};function clearCache(){_cache={};}
function compile(template,options){options=options||{};if(options.cache!==false){if(!_cache[template]){_cache[template]=_compile(template,options);}
return _cache[template];}
return _compile(template,options);}
function render(template,view,partials){return compile(template)(view,partials);}})(Mustache);
;(function(a,b){"use strict";var c=a.History=a.History||{},d=a.jQuery;if(typeof c.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},typeof c.init!="undefined"&&c.init()})(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode;if(typeof m.init!="undefined")throw new Error("History.js Core has already been loaded...");m.init=function(){return typeof m.Adapter=="undefined"?!1:(typeof m.initCore!="undefined"&&m.initCore(),typeof m.initHtml4!="undefined"&&m.initHtml4(),!0)},m.initCore=function(){if(typeof m.initCore.initialized!="undefined")return!1;m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;if(typeof b!="undefined"&&b!==null){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){(m.options.debug||!1)&&m.log.apply(m,arguments)},m.log=function(){var a=typeof c!="undefined"&&typeof c.log!="undefined"&&typeof c.log.apply!="undefined",b=d.getElementById("log"),e,f,g,h,i;a?(h=Array.prototype.slice.call(arguments),e=h.shift(),typeof c.debug!="undefined"?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n";for(f=1,g=arguments.length;f<g;++f){i=arguments[f];if(typeof i=="object"&&typeof k!="undefined")try{i=k.stringify(i)}catch(j){}e+="\n"+i+"\n"}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached=typeof m.getInternetExplorerMajorVersion.cached!="undefined"?m.getInternetExplorerMajorVersion.cached:function(){var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");while((b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0]);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached=typeof m.isInternetExplorer.cached!="undefined"?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);if(d.location.port||!1)a+=":"+d.location.port;return a+="/",a},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return a.length===1&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var a=m.getState(!1,!1),b=(a||{}).url||d.location.href,c;return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"}),c},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b=typeof b=="undefined"?!0:b,/[a-z]+\:\/\//.test(a)||(d==="/"?c=m.getRootUrl()+a.replace(/^\/+/,""):d==="#"?c=m.getPageUrl().replace(/#.*/,"")+a:d==="?"?c=m.getPageUrl().replace(/[\?#].*/,"")+a:b?c=m.getBaseUrl()+a.replace(/^(\.\/)+/,""):c=m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),b},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){typeof a=="undefined"&&(a=!0),typeof b=="undefined"&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b=m.extractId(a.url),c;if(!b){c=m.getStateString(a);if(typeof m.stateToId[c]!="undefined")b=m.stateToId[c];else if(typeof m.store.stateToId[c]!="undefined")b=m.store.stateToId[c];else{for(;;){b=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof m.idToState[b]=="undefined"&&typeof m.store.idToState[b]=="undefined")break}m.stateToId[c]=b,m.idToState[b]=a}}return b},m.normalizeState=function(a){var b,c;if(!a||typeof a!="object")a={};if(typeof a.normalized!="undefined")return a;if(!a.data||typeof a.data!="object")a.data={};b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data);if(b.title||c)b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;return b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d),d},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c),d},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id,c},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash,c},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c=null,d,e;return b=b||!1,d=m.extractId(a),d&&(c=m.getStateById(d)),c||(e=m.getFullUrl(a),d=m.getIdByUrl(e)||!1,d&&(c=m.getStateById(d)),!c&&b&&!m.isTraditionalAnchor(a)&&(c=m.createStateObject(null,null,e))),c},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b=!1,c;return c=m.extractState(a.url),b=c&&c.id!==a.id,b},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b=!1,c,d,e;return m.savedStates.length&&(c=a.id,d=m.getLastSavedState(),e=d.id,b=c===e),b},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return typeof a=="undefined"?b=m.savedStates[m.savedStates.length-1]:a<0?b=m.savedStates[m.savedStates.length+a]:b=m.savedStates[a],b},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a},m.unescapeString=function(b){var c=b,d;for(;;){d=a.unescape(c);if(d===c)break;c=d}return c},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b),b},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.escape(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b),b},m.setTitle=function(a){var b=a.title,c;b||(c=m.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=b,m},m.queues=[],m.busy=function(a){typeof a!="undefined"?m.busy.flag=a:typeof m.busy.flag=="undefined"&&(m.busy.flag=!1);if(!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(m.busy.flag)return;for(a=m.queues.length-1;a>=0;--a){c=m.queues[a];if(c.length===0)continue;d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay)}};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return typeof a=="function"&&(a={callback:a}),typeof b!="undefined"&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b=m.extractState(d.location.href),c;if(!m.isLastSavedState(b))c=b;else return;return c||(c=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;c<=a;++c)m.forward(b);else{if(!(a<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m};if(m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var e=!1,f=!1,g,h;return m.doubleCheckComplete(),g=m.getHash(),g?(h=m.extractState(g||d.location.href,!0),h?m.replaceState(h.data,h.title,h.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(e=m.Adapter.extractEventData("state",b,c)||!1,e?f=m.getStateById(e):m.expectedStateId?f=m.getStateById(m.expectedStateId):f=m.extractState(d.location.href),f||(f=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(f)?(m.busy(!1),!1):(m.storeState(f),m.saveState(f),m.setTitle(f),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;try{a=k.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState){if(!m.idToState.hasOwnProperty(b))continue;a.idToState[b]=m.idToState[b]}for(b in m.urlToId){if(!m.urlToId.hasOwnProperty(b))continue;a.urlToId[b]=m.urlToId[b]}for(b in m.stateToId){if(!m.stateToId.hasOwnProperty(b))continue;a.stateToId[b]=m.stateToId[b]}m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a))},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload));if(!m.emulated.pushState){m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval));if(e.vendor==="Apple Computer, Inc."||(e.appCodeName||"")==="Mozilla")m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})}},m.init()}(window)
;;(function($){$.fn.stacktable=function(options){var $tables=this,defaults={id:'stacktable',hideOriginal:false},settings=$.extend({},defaults,options);return $tables.each(function(){var $stacktable=$('<table class="'+settings.id+'"><tbody></tbody></table>');if(typeof settings.myClass!==undefined)$stacktable.addClass(settings.myClass);var markup='';$table=$(this);$topRow=$table.find('tr').eq(0);$table.find('tr').each(function(index,value){markup+='<tr>';if(index===0){markup+='<tr><th class="st-head-row st-head-row-main" colspan="2">'+$(this).find('th,td').eq(0).html()+'</th></tr>';}
else{$(this).find('td').each(function(index,value){if(index===0){markup+='<tr><th class="st-head-row" colspan="2">'+$(this).html()+'</th></tr>';}else{if($(this).html()!==''){markup+='<tr>';if($topRow.find('td,th').eq(index).html()){markup+='<td class="st-key">'+$topRow.find('td,th').eq(index).html()+'</td>';}else{markup+='<td class="st-key"></td>';}
markup+='<td class="st-val">'+$(this).html()+'</td>';markup+='</tr>';}}});}});$stacktable.append($(markup));$table.before($stacktable);if(settings.hideOriginal)$table.hide();});};}(jQuery));;var RichHTML={version:'1.0.0',versionDetail:{major:1,minor:0,patch:0},prefixLabel:'',debugLvl:1};RichHTML.apply=function(o,c,defaults){var p;if(defaults){RichHTML.apply(o,defaults);}
if(o&&c&&typeof c==='object'){for(p in c){o[p]=c[p];}}
return o;};(function(){var idSeed=0;RichHTML.apply(RichHTML,{overlayTpl:'<div id="richhtml-overlay" style="display:none;left:-999999px;"></div><div id="richhtml-overlay-inner" style="display:none;left:-999999px;"></div>',id:function(el,prefix){el=RichHTML.getDom(el,true)||{};if(!el.id){el.id=(prefix||"rich-comp-")+(++idSeed);}
return el.id;},isEmpty:function(obj){var prop;for(prop in obj){return false;}
return true;},replaceAll:function(str,token,newToken,ignoreCase){var i=-1,_token;if(typeof token==="string"){_token=ignoreCase===true?token.toLowerCase():undefined;while((i=(_token!==undefined?str.toLowerCase().indexOf(_token,i>=0?i+newToken.length:0):str.indexOf(token,i>=0?i+newToken.length:0)))!==-1){str=str.substring(0,i).concat(newToken).concat(str.substring(i+token.length));}}
return str;},mask:function(selector,fade){if(!fade)fade=false;if((!selector)||selector===null)selector="body";var $t,height,width;$t=$(selector);height=($t.outerHeight()===0)?$(document).height():$t.outerHeight();width=$t.outerWidth();$("#richhtml-overlay").css({top:$t.offset().top,left:$t.offset().left,width:width,height:height,display:''});if(fade)$("#richhtml-overlay").fadeIn('slow');else $("#richhtml-overlay").show();},onPreLoad:function(el){$(this).trigger('preload',el);},onPostLoad:function(el){$(this).trigger('postload',el);},unMask:function(){$("#richhtml-overlay").fadeOut();$("#richhtml-overlay").css({display:'none',left:'-999999px'});},debug:function(lvl,message){if(RichHTML.debugLvl>=lvl){console.log(message);}},mouseCoords:function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY};}
return{x:ev.clientX+document.body.scrollLeft-document.body.clientLeft,y:ev.clientY+document.body.scrollTop-document.body.clientTop};},getDom:function(el,strict){var e;if(!el||!document){return null;}
return $(".ce-container").get(0);},center:function(el,containerEl,transition,offset){if(!offset){offset=0;}
var $me=el;if(!containerEl){containerEl=window;}
return $me.each(function(){var props,top,left;if(containerEl==window){props={position:'absolute'};$me.css(props);top=($(containerEl).height()-$me.outerHeight())/2;top+=$(containerEl).scrollTop()||0;top=(top>0?top:0);}else{props={position:'relative'};top=($(containerEl).parent().height()-$me.outerHeight())/2;top+=$(containerEl).scrollTop()||0;top=(top>0?top:0);}
top=(top-offset<10)?top:top-offset;$.extend(props,{top:top+'px'});left=($(containerEl).width()-$me.outerWidth())/2;left+=$(containerEl).scrollLeft()||0;left=(left>0?left:0);$.extend(props,{left:left+'px'});if(transition&&transition>0){$me.animate(props,transition);}
else{$me.css(props);}
return $me;});}});})();$(document).ready(function(){$(document.body).append(RichHTML.overlayTpl);});Array.max=function(array){return Math.max.apply(Math,array);};Array.min=function(array){return Math.min.apply(Math,array);};$.fn.hasAttr=function(prop,val){return($(this).attr(prop.toLowerCase())===val.toLowerCase());};if(typeof lang!=='function'){function _sprintf(s){var re=/%/;var i=0;while(re.test(s))
{s=s.replace(re,_sprintf.arguments[++i]);}
return s;}
function lang(){switch(lang.arguments.length){case 1:return phrase;case 2:return _sprintf(phrase,lang.arguments[1]);case 3:return _sprintf(phrase,lang.arguments[1],lang.arguments[2]);case 4:return _sprintf(phrase,lang.arguments[1],lang.arguments[2],lang.arguments[3]);}
return phrase;}};RichHTML.grid=function(config){this.name="richgrid";this.id=null;this.el=null;this.data=null;this.last_tag=0;this.jsonData=null;this.pagingEl=null;this.footerEl=null;this.hasExpander=false;this.hasCheckbox=false;this.width='100%';this.internalTplClean="<div class='richtable'><div class='edit_menu'>Loading ...</div><table id='{rich-id}' style='table-layout: fixed;{tablestyle}'><thead><tr>{{#columns}}<th nowrap='nowrap' rowspan='1' colspan='1' class='{{align}} {{sortable}} {{xtype}} {{editable}} {{#flexing}}flexing{{/flexing}}' {{#getsortfieldname}}{{sortFieldName}}{{/getsortfieldname}} dataindex='{{dataIndex}}' style='{{#width}}width:{{width}};{{/width}}{{#hidecolumn}}{{hidden}}{{/hidecolumn}}' {{#hasCheckbox}}data-checkbox='true'{{/hasCheckbox}}>{{#editable_menu}}<div class='{{edit_icon_class}}' data-rich-icon='&#xe600;'></div>{{/editable_menu}}<span class='{{sort_icon_class}}'>{{text}}&nbsp;</span></th>{{/columns}}</tr></thead><tbody>{tbody}</tbody><tfoot class='light rich-footer'><tr><th colspan='{footer-colspan}' id='{rich-id}-footer'></th></tr></tfoot></table><div id='{rich-id}-navigation' class='richgrid-pagenavi-wrapper'></div></div>";this.tbodyTplClean="{{#groups}}{{#groupname}}<tr class='rich-group-row' id='{{rich_group_id}}'><td class='rich-group-name' colspan={{cols}}><span class='rich-grouptoggle rich-grouptoggle-plus {{plusvisible}}' data-rich-icon='&#xe001;' /><span class='rich-grouptoggle rich-grouptoggle-minus {{minusvisible}}' data-rich-icon='&#xe000;' />{{{name}}}</td></tr>{{/groupname}}{{#items}}{row-data}{{/items}}{{/groups}}";this.internalTpl=null;this.tbodyTpl=null;this.pagingTpl="<div class='richgrid-pagenavi' data-items-per-page='{navpagesitemsperpage}' data-pages='{navpagescount}'>{navbuttons}</div>";this.columns=null;this.url=null;this.selectedColumn=null;this.editable=false;this.groupField=null,this.startCollapsed=false,this.baseParams={dir:"desc",start:0,limit:10};this.root='items';this.totalProperty='total';this.padingEl=null;this.isDraggable=false;this.dragData={dragObject:null,onDragClass:"dragging",scrollAmount:5,savedY:0};this.emptyText="No data found";this.pagingData=[];this.cookieExpires=365;if(config.name){this.name=config.name;}
if(config.el){this.el=config.el;}
if(config.groupField){this.groupField=config.groupField;}
if(config.startCollapsed){this.startCollapsed=config.startCollapsed;}
if(config.id){this.id=config.id;}
else{this.id=this.getId();}
if(config.editable){this.editable=config.editable;}
if(config.url){this.url=config.url;}
if(config.root){this.root=config.root;}
if(config.data){this.data=config.data;}
if(config.pagingEl){this.pagingEl=config.pagingEl;}
if(config.columns){this.columns=config.columns;}
this.columns.push({id:"extra_th",dataIndex:"extra_th",xtype:"extra_th"});if(config.metaEl){this.metaEl=config.metaEl;}
else{this.metaEl=this.el+"-metadata";}
if(config.footerEl){this.footerEl=config.footerEl;}
else{this.footerEl=this.el+"-footer";}
if(config.width){this.width=config.width;}
if(config.emptyText){this.emptyText=config.emptyText;}
if(config.baseParams){jQuery.extend(this.baseParams,config.baseParams);}
if(config.totalProperty){this.totalProperty=config.totalProperty;}
if(config.cookieExpires){this.cookieExpires=config.cookieExpires;}};RichHTML.grid.prototype.getId=function(){return this.id||(this.id=RichHTML.id.apply(this));};RichHTML.grid.prototype.getSelectedRowData=function(){var self=this,arrayOfObjs=[],ids;ids=self.getSelectedRowIds();$.each(self.data,function(k,v){if($.grep(ids,function(n){return n==v.id;}).length>0){arrayOfObjs.push(v);}});return arrayOfObjs;};RichHTML.grid.prototype.getSelectedRowIds=function(){var self=this,arrayOfIds;arrayOfIds=$.map($("#"+self.id+" tbody .checkbox-icon-checked"),function(n,i){if($(n).parent().hasClass('hide-checkbox'))return;substr=$(n).parent().attr('id').split('{-}');return $.trim(substr[1]);});return arrayOfIds;};RichHTML.grid.prototype.render=function(){var self=this;if(!self.templatePrep()){return;}
json=self.dataPrep();$('#'+self.el).html(Mustache.to_html(self.internalTpl,json).replace(/^\s*/mg,''));self.initialLoad(json);};RichHTML.grid.prototype.toggleColumn=function(colId,visible){var self=this,a_hidden=[];$.each(self.columns,function(i,val){if(jQuery.inArray(val.xtype,["expander","checkbox","drag","extra_th"])!=-1)return;if(colId==val.dataIndex){if(visible){self.columns[i].hidden=false;}else{self.columns[i].hidden=true;}}
if(self.columns[i].hidden)a_hidden.push(val.dataIndex);});self.set_cookie({'action':'columns',data:{'h':a_hidden}});self.reload();};RichHTML.grid.prototype.renderEditable=function()
{var self=this,html="";$.each(self.columns,function(i,val){if(jQuery.inArray(val.xtype,["expander","checkbox","drag","extra_th"])!=-1)return;if(val['hidden']){checked="";}else{checked="checked=true";}
html+='<p class="edit-column-entry" data-index="'+val.dataIndex+'"><input '+checked+' type="checkbox" class="col_checkbox" val="'+val.dataIndex+'" />'+val.text+'</p>';});$('.edit_menu').html(html);$("document").off('click');$('.edit_menu p').bind('click',function(event){var dataIndex=null;if(event.target.className!=="col_checkbox"){dataIndex=$(event.target).attr('data-index');checked=$(event.target).find('.col_checkbox').prop("checked");$(event.target).find('.col_checkbox').prop("checked",!checked);state=!checked;}else{dataIndex=$(event.target).parent().attr('data-index');state=$(event.target).prop("checked");}
self.toggleColumn(dataIndex,state);});}
RichHTML.grid.prototype.enable=function()
{var self=this;RichHTML.unMask();};RichHTML.grid.prototype.disable=function()
{var self=this;RichHTML.mask('#'+self.id);};RichHTML.grid.prototype.timestamp=function(label){var self=this;previous_tag=self.last_tag;self.last_tag=Date.now();if(previous_tag==0){}else{elapsed=self.last_tag-previous_tag;}}
RichHTML.grid.prototype.initialLoad=function(json){var self=this;RichHTML.mask('#'+self.id);RichHTML.onPreLoad(self);self.last_tag=0;if(self.url!==null){RichHTML.debug(3,Array('JSON initialLoad request for data',self.baseParams));$.getJSON(self.url,self.baseParams,function(data){if(typeof(ce.parseResponse)==="function"){data=ce.parseResponse(data);}
RichHTML.debug(3,Array('JSON request success',data));if(data.error){return false;}
if(typeof(data[self.root])==="undefined"){RichHTML.debug(1,Array('Grid is expecting data collection in root named:'+self.root));return false;}
json.rows=data[self.root];json.rows=self.addRenderers(json.columns,json.rows);self.data=json.rows;self.jsonData=data;if(self.groupField===null){json.groups=[];json.groups.push({items:json.rows});$('#'+self.el).html(Mustache.to_html(self.internalTpl,json).replace(/^\s*/mg,''));self.pagingData.items=json.rows.length;if(typeof(data[self.totalProperty])==="undefined"){RichHTML.debug(3,Array('Paging de-activated. JSON does not contain total count in element: '+self.totalProperty));self.pagingData.totalItems=null;}else{self.pagingData.totalItems=data[self.totalProperty];}}else{json=self.groupOnGroupField(json);$('#'+self.el).html(Mustache.to_html(self.internalTpl,json).replace(/^\s*/mg,''));self.pagingData.totalItems=null;}
if(json.rows.length===0){$('#'+self.el+' tbody').html('<tr><td class="richgrid-nodata" colspan="'+json.columns.length+'">'+self.emptyText+'</td></tr>');}
self.onLoad();});}else{RichHTML.debug(1,'url config param is required to populate datagrid');}};RichHTML.grid.prototype.groupOnGroupField=function(json){var self=this;var minusvisible='visible';var plusvisible='';var groups=[];var group_index=1;json.groups=[];for(var x=0;x<json.rows.length;x++){if(typeof(groups[json.rows[x][this.groupField]])==="undefined"){groups[json.rows[x][this.groupField]]=[];}
groups[json.rows[x][this.groupField]].push(json.rows[x]);}
for(var key in groups){if(groups.hasOwnProperty(key)){var force_collapsed=false;var obj=groups[key];if((jQuery.cookie!='undefined')&&($.cookie("richgrid-data"+RichHTML.prefixLabel))){cookie_vars=JSON.parse($.cookie("richgrid-data"+RichHTML.prefixLabel));if(typeof(cookie_vars[self.el])!="undefined"&&typeof(cookie_vars[self.el].groups)!="undefined"){is_collapsed=cookie_vars[self.el].groups[self.id+'-rich-group-'+group_index];if(typeof(is_collapsed)!="undefined"){force_collapsed=true;}}}
if(this.startCollapsed||force_collapsed){plusvisible='visible';minusvisible='';$.each(obj,function(i,o){o.hidden=true;});}else{plusvisible='';minusvisible='visible';}
json.groups.push({items:obj,groupname:{rich_group_id:this.id+'-rich-group-'+group_index,plusvisible:plusvisible,minusvisible:minusvisible,name:obj[0][this.groupField],cols:json.columns.length}});group_index++;}}
return json;};RichHTML.grid.prototype.reload=function(config){var self=this,params={};self.last_tag=0;RichHTML.mask('#'+self.id);RichHTML.onPreLoad(self);self.templatePrep();if(config&&(typeof(config.params)!=="undefined")){params=config.params;self.set_cookie({'action':'sort',data:{'d':config.params.dir,'s':config.params.sort}});}
jQuery.extend(self.baseParams,params);json=self.dataPrep();if(self.url!==null){RichHTML.debug(3,Array('JSON reload request for data',self.baseParams));$.getJSON(self.url,self.baseParams,function(data){if(typeof(ce.parseResponse)==="function"){data=ce.parseResponse(data);}
RichHTML.debug(3,Array('JSON request success',data));if(data.error){return false;}
if(typeof(data[self.root])==="undefined"){RichHTML.debug(1,Array('Grid is expecting data collection in root named:'+self.root));return false;}
json.rows=data[self.root];json.rows=self.addRenderers(json.columns,json.rows);self.data=json.rows;self.jsonData=data;if(self.groupField===null){json.groups=[];json.groups.push({items:json.rows});$('#'+self.el).html(Mustache.to_html(self.internalTpl,json).replace(/^\s*/mg,''));self.pagingData.items=json.rows.length;if(typeof(data[self.totalProperty])==="undefined"){RichHTML.debug(3,Array('Paging de-activated. JSON does not contain total count in element: '+self.totalProperty));self.pagingData.totalItems=null;}else{self.pagingData.totalItems=data[self.totalProperty];}}else{json=self.groupOnGroupField(json);$('#'+self.el).html(Mustache.to_html(self.internalTpl,json).replace(/^\s*/mg,''));self.pagingData.totalItems=null;}
if(json.rows.length===0){$('#'+self.el+' tbody').html('<tr><td class="richgrid-nodata" colspan="'+json.columns.length+'">'+self.emptyText+'</td></tr>');}
self.onLoad(true);});}else{RichHTML.debug(1,Array('url config param is required to populate datagrid'));}};RichHTML.grid.prototype.dataDelayedRenderer=function(renderer,text,id,row){var el={},html;html=renderer(text,row,el);$("#"+id).html(html);};RichHTML.grid.prototype.dataRenderer=function(renderer,row){var self=this;return function(){return function(text,cellid){var raw,id,el={};raw=text.split("{||}");id=self.id+"-cell-"+raw[0];text=raw[1];if(renderer){text=renderer(text,row,el);if(!RichHTML.isEmpty(el)){$(self).bind({"colload":function(){self.mapCellModifiers(el,id);}});}
return text;}else{return text;}};};};RichHTML.grid.prototype.mapCellModifiers=function(el,id){var self=this;if(typeof(el.addClass)!=="undefined"){$('td[id="'+id+'"]').addClass(el.addClass);}
if(typeof(el.removeClass)!=="undefined"){$('td[id="'+id+'"]').removeClass(el.removeClass);}
if(typeof(el.addStyle)!=="undefined"){$('td[id="'+id+'"]').attr('style',el.addStyle);}
if(typeof(el.removeStyle)!=="undefined"&&el.removeStyle){$('td[id="'+id+'"]').attr('style','');}
$(self).unbind('colload');};RichHTML.grid.prototype.addRenderers=function(cols,rows){var self=this,renderOnExpand=false;$.each(cols,function(c_i,c_val){if((typeof(c_val.dataIndex)==="undefined")&&(typeof(c_val.renderer)==="undefined")){if(c_val.xtype!=="drag"){RichHTML.debug(1,"Error: You need either a dataIndex or renderer for column:"+c_i);}}
$.each(rows,function(r_i,r_val){renderOnExpand=(typeof(c_val.renderOnExpand)==="undefined")?false:c_val.renderOnExpand;if(c_val.renderer&&!renderOnExpand){r_val[c_i+"-rich-renderer"]=self.dataRenderer(c_val.renderer,r_val);}else if(!renderOnExpand){r_val[c_i+"-rich-renderer"]=self.dataRenderer();}else{r_val[c_i+"-rich-delayedrenderer"]=c_val.renderer;r_val[c_i+"-rich-delayedrenderer-classes"]="delayedrenderer rowdata-"+c_i+"-"+r_i;}});});return rows;};RichHTML.grid.prototype.getMouseOffset=function(target,ev){var docPos,mousePos;ev=ev||window.event;docPos=this.getPosition(target);mousePos=this.mouseCoords(ev);if(docPos==null){return null;}else{return{x:mousePos.x-docPos.x,y:mousePos.y-docPos.y};}};RichHTML.grid.prototype.getPosition=function(e){var top=0,left=0;if(e.offsetHeight===0){e=e.firstChild;}
if(e==null){return null;}
while(e.offsetParent){left+=e.offsetLeft;top+=e.offsetTop;e=e.offsetParent;}
left+=e.offsetLeft;top+=e.offsetTop;return{x:left,y:top};};RichHTML.grid.prototype.mouseCoords=function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY};}
return{x:ev.clientX+document.body.scrollLeft-document.body.clientLeft,y:ev.clientY+document.body.scrollTop-document.body.clientTop};};RichHTML.grid.prototype.templatePrep=function()
{var self=this,cols="",colCount=0,expandercolCount=0,expanderDataIndex="",expanderRenderer="",itemIndex="",richid="",widthStr,last_visible_index=null,hidden,foundhidden,has_fullwidth_th=false,flexid=null;if(self.columns===null){RichHTML.debug(1,Array('You need to define columns array'));return false;}
hidden=null;if(jQuery.cookie!='undefined'){if($.cookie("richgrid-data"+RichHTML.prefixLabel)){cookie_vars=JSON.parse($.cookie("richgrid-data"+RichHTML.prefixLabel));if(typeof(cookie_vars[self.el])!="undefined"&&typeof(cookie_vars[self.el].hidden)!="undefined")
{hidden=cookie_vars[self.el].hidden;}
if(typeof(cookie_vars[self.el])!="undefined"&&typeof(cookie_vars[self.el].d)!="undefined"&&typeof(cookie_vars[self.el].s)!="undefined")
{self.baseParams.dir=cookie_vars[self.el].d;self.baseParams.sort=cookie_vars[self.el].s;}}}
$.each(self.columns,function(i,val){if(typeof(val.hidden)==="undefined"){val.hidden=false;}
if(hidden!=null){foundhidden=jQuery.inArray(self.columns[i].dataIndex,hidden);if(foundhidden!=-1){val.hidden=true;self.columns[i].hidden=true;}else{val.hidden=false;self.columns[i].hidden=false;}}
if(val.xtype==="extra_th"){extraid=i;self.columns[i].width="100%";self.columns[i].hidden=true;cols+="<td class='extra_td' valign='top'></td>";}else if(val.xtype==="expander"){val.hidden=false;self.columns[i].hidden=false;if(val.dataIndex){if(typeof(val.escapeHTML)==="undefined"||!val.escapeHTML){expanderDataIndex="{"+val.dataIndex+"}";}else{expanderDataIndex=val.dataIndex;}}
expanderRenderer=colCount+"-rich-renderer";self.hasExpander=true;cols+="<td valign='top' class='expander {{"+colCount+"-rich-delayedrenderer-classes}}' rowspan='1' id='{{#expanderid}}{{/expanderid}}'><div class='expander-icon'></div></td>";self.columns[i].width="23px";}else if(val.xtype==="checkbox"){val.hidden=false;self.columns[i].hidden=false;itemIndex=(typeof(val.escapeHTML)==="undefined"||!val.escapeHTML)?"{"+val.dataIndex+"}":val.dataIndex;self.hasCheckbox=true;cols+="<td class='checkbox' id='{{#checkboxid}}{{"+itemIndex+"}}{{/checkboxid}}' {{#"+colCount+"-rich-renderer}}{{#getlastcellid}}{{/getlastcellid}}{-}{{"+itemIndex+"}}{||}{{"+itemIndex+"}}{{/"+colCount+"-rich-renderer}} valign='top'><div class='checkbox-icon'></div></td>";self.columns[i].width="28px";self.columns[i].hasCheckbox=true;}else if(val.xtype==="drag"){val.hidden=false;self.columns[i].hidden=false;self.columns[i].width="23px";self.isDraggable=true;cols+="<td class='draghandle' id='{{#cellid}}{{/cellid}}' valign='top'><div class='drag-icon'></div></td>";}else if(val.dataIndex){self.columns[i].editable_menu=false;self.columns[i].editable="";if(val.hidden){hiddenstyle="display:none;"}else{hiddenstyle="";}
if(typeof(val.sortable)!=="undefined"&&val.sortable){self.columns[i].sortable="sortable";self.columns[i].sort_icon_class="sort-icon";}
if(typeof(val.width)!=="undefined"&&val.width!=null){widthStr=self.columns[i].width.toString();if((widthStr.indexOf("px")!=-1)||(widthStr==="100%")){self.columns[i].width=val.width;}else{self.columns[i].width=val.width+"px";}}else if(!val.hidden){}
if(typeof(val.id)!=="undefined"){richid="data-localid='"+val.id+"'";}
else{richid="";}
itemIndex=(typeof(val.escapeHTML)==="undefined"||!val.escapeHTML)?"{"+val.dataIndex+"}":val.dataIndex;cols+="<td id='{{#cellid}}{{/cellid}}' style='overflow: visible;"+hiddenstyle+"' class='"+((typeof(val.align)!=="undefined")?val.align:"left")+"' "+richid+"  dataindex='"+val.dataIndex+"' valign='top'>{{#"+colCount+"-rich-renderer}}{{#getlastcellid}}{{/getlastcellid}}{||}{{"+itemIndex+"}}{{/"+colCount+"-rich-renderer}}</td>";}
colCount++;if(!val.hidden)expandercolCount++;if(jQuery.inArray(val.xtype,["expander","checkbox","drag","extra_th"])==-1){if(val.flex==1&&!self.columns[i].hidden)flexid=i;if((val.width=="100%")&&(!self.columns[i].hidden))has_fullwidth_th=true;if(!self.columns[i].hidden)last_visible_index=i;}});if(typeof(self.editable)!=="undefined"&&self.editable){if(last_visible_index==null)last_visible_index=extraid;self.columns[last_visible_index].editable="editable";self.columns[last_visible_index].editable_menu=true;self.columns[last_visible_index].edit_icon_class="edit-icon";}
if(!has_fullwidth_th){if(flexid!=null){self.columns[flexid].flexing=true;}else if(last_visible_index!=null){if(extraid==last_visible_index){self.columns[extraid].hidden=false;}
self.columns[last_visible_index].flexing=true;}}
cols="<tr {{#hidden}}style='display:none;'{{/hidden}} class='{{#getcollapsedstate}}{{/getcollapsedstate}}' id='{{#getrowid}}{{/getrowid}}'>"+cols+"</tr>";if(self.hasExpander){cols+="<tr class='expander-row' id='{{#expanderrowid}}{{/expanderrowid}}' style='display:none;'>";cols+="<td colspan='"+(expandercolCount)+"'><div class='pointer' boundto='{{#getlastextenderid}}{{/getlastextenderid}}' />";cols+="<div class='expander-data' id='{{#cellid}}{{/cellid}}'>{{#"+expanderRenderer+"}}{{#getlastextenderid}}{{/getlastextenderid}}{||}{{"+expanderDataIndex+"}}{{/"+expanderRenderer+"}}</div>";cols+="</td></tr>";}
self.tbodyTpl=RichHTML.replaceAll(self.tbodyTplClean,"{row-data}",cols);self.internalTpl=RichHTML.replaceAll(self.internalTplClean,"{rich-id}",this.getId());self.internalTpl=RichHTML.replaceAll(self.internalTpl,"{tablestyle}","width:"+this.width);self.internalTpl=RichHTML.replaceAll(self.internalTpl,"{footer-colspan}",colCount);self.internalTpl=RichHTML.replaceAll(self.internalTpl,"{tbody}",self.tbodyTpl);return true;};RichHTML.grid.prototype.dataPrep=function()
{var self=this,cellCounter=0,rowCounter=0,expanderCounter=0,json={};json.getsortfieldname=function(){return function(text,render){return(text)?"sortfieldname='"+text+"'":"";};};json.checkboxid=function(){return function(text,render){return self.id+"-cell-"+(++cellCounter)+"{-}"+text;};};json.expanderid=function(){return function(text,render){return self.id+"-expander-"+(++expanderCounter);};};json.cellid=function(){return function(text,render){return self.id+"-cell-"+(++cellCounter);};};json.getlastcellid=function(){return function(text,render){return cellCounter;};};json.hidecolumn=function(){return function(text,render){if(text==="true"){return"display:none;";}else{return"";}};};json.getcollapsedstate=function(){return function(text,render){if((self.groupField!==null)&&(self.startCollapsed))return'collapsed';else return'';};};json.getrowid=function(){return function(text,render){return self.id+"-row-"+(++rowCounter);};};json.getlastextenderid=function(){return function(text,render){return expanderCounter;};};json.expanderrowid=function(){return function(text,render){return self.id+"-expander-"+(expanderCounter)+"-data";};};json.columns=self.columns;return json;};RichHTML.grid.prototype.bindColumns=function(){var self=this,span,dir;$("body").off('click',"#"+self.id+" thead th.sortable");$("body").on('click',"#"+self.id+" thead th.sortable",function(event){if(event.target.className==="col_checkbox"||event.target.className==="edit-icon"||event.target.className==="edit-column-entry"){return true;}
if(typeof(event.dosort)==="undefined"){event.dosort=true;}
$("#"+self.id+" thead th.sortable").removeClass('sortable-selected');$(this).siblings('.sortable').children('span').removeClass('sort-icon-asc').removeClass('sort-icon-desc');span=$(this).children('span');$(this).addClass('sortable-selected');if(!event.dosort){span.toggleClass('sort-icon-'+event.sortdir);}else{span.toggleClass('sort-icon-asc');}
if(span.hasClass('sort-icon-asc')){span.removeClass('sort-icon-desc');dir="asc";}else{span.addClass('sort-icon-desc');dir="desc";}
self.selectedColumn=$(this).attr('dataindex');if(event.dosort){self.reload({"params":{"start":0,"dir":dir,"sort":self.selectedColumn}});}});$("body").off('click',"th.editable div.edit-icon");$("body").on('click',"th.editable div.edit-icon",function(event){event.preventDefault();$('.edit_menu').fadeToggle("fast",function(){$('.edit_menu').toggleClass('open');if($('.edit_menu').hasClass('open')&&!$('.edit_menu').hasClass('populated')){self.renderEditable();$('.edit_menu').addClass('populated');}});});};RichHTML.grid.prototype.getRowValues=function(colId,justtext){var self=this,arrayofids=[],i;if(typeof(justtext)=="undefined"){justtext=true;}
rows=$("#"+self.id+" tr td[data-localid='"+colId+"']");for(i=0;i<rows.length;i++){if(justtext){arrayofids[i]=$(rows[i]).text();}else{arrayofids[i]=rows[i].innerHTML;}}
return arrayofids;};RichHTML.grid.prototype.onLoad=function(reloading){var self=this,data,paginghtml="",buttonshtml="",classes="",rowid,renderer,text,col,id,event,loopstart,loopend;if(self.data.length===0){RichHTML.debug(3,Array('Data Not Loaded - Doesn\'t appear to be any data to load'));if(self.pagingEl!==null){$("#"+self.pagingEl).html("");}
else{$("#"+self.id).parent().children(".richgrid-pagenavi-wrapper").html("");}}else{RichHTML.debug(3,Array('Data Loaded - Setting up grid binds (expander & checkboxes)'));if(typeof(reloading)==="undefined"){reloading=false;}
self.bindColumns();if(typeof(self.baseParams.sort)!=="undefined"){RichHTML.debug(3,Array('Had default sort info - sorting column',self.baseParams));event=jQuery.Event("click");event.dosort=false;event.sortdir=self.baseParams.dir.toLowerCase();$("#"+self.id+" thead th.sortable[dataindex='"+self.baseParams.sort+"']").trigger(event);}
if(self.hasExpander){$("body").off('click',"#"+self.id+" tbody td.expander div.expander-icon");$("body").on('click',"#"+self.id+" tbody td.expander div.expander-icon",function(){$(this).toggleClass('expander-icon-expanded');$(this).parent().parent().children('td').toggleClass('nobottomborder');$("#"+$(this).parent().attr('id')+"-data").toggle();if(($(this).parent().hasClass('delayedrenderer'))&&($(this).hasClass('expander-icon-expanded'))){classes=$(this).parent().attr('class');text=$("#"+$(this).parent().attr('id')+"-data .expander-data").text();id=$("#"+$(this).parent().attr('id')+"-data .expander-data").attr('id');RichHTML.debug(3,Array('preparing to call delayed renderer',Array("classes:"+classes,"text:"+text,"id:"+id)));$.each(classes.split(" "),function(i,val){if(val.indexOf('rowdata')>-1){val=val.split("-");rowid=val[2];col=val[1];renderer=self.data[rowid][col+"-rich-delayedrenderer"];self.dataDelayedRenderer(renderer,text,id,self.data[rowid]);}});}});}
if(self.isDraggable){$("body").off("mousedown","#"+self.id+" tbody td.draghandle .drag-icon");$("body").on("mousedown","#"+self.id+" tbody td.draghandle .drag-icon",function(event){self.mouseDown(this,event);return false;});}
if(self.hasCheckbox){$("body").off('click',"#"+self.id+" tbody td .checkbox-icon");$("body").on('click',"#"+self.id+" tbody td .checkbox-icon",function(event,massclick){var rowid,data;if(typeof(massclick)==="undefined"){massclick=false;}
$(this).toggleClass('checkbox-icon-checked');if(!massclick&&!$(this).hasClass('checkbox-icon-checked')){$("#"+self.id+" th.checkbox-checked").removeClass('checkbox-checked').addClass('checkbox');}
if(!massclick){rowid=$(this).parent().attr('id').split("{-}")[1];data={};data.rowid=rowid;data.rowsSelected=self.getSelectedRowIds();data.totalSelected=self.getSelectedRowIds().length;$(self).trigger('rowselect',[data]);}
$(this).parent().parent().each(function(){$(this).toggleClass('row-selected');});});}
if(self.pagingData.totalItems&&self.pagingData.totalItems!==null){self.pagingData.pages=Math.ceil(self.pagingData.totalItems/self.baseParams.limit);self.pagingData.start=parseInt(self.baseParams.start,10);if(self.pagingData.start===0){self.pagingData.page=1;}else{self.pagingData.page=Math.ceil((self.pagingData.start+1)/self.baseParams.limit);}
self.pagingData.next=self.pagingData.page+1;self.pagingData.previous=self.pagingData.page-1;loopstart=Array.max(Array(1,self.pagingData.page));loopend=Array.min(Array(self.pagingData.page,self.pagingData.pages));if(loopstart!==1&&(self.pagingData.page>2)){buttonshtml+="<span class='first' data-"+self.id+"-link='0'></span>";}else{buttonshtml+="<span class='first disabled' data-"+self.id+"-link='0'></span>";}
if(self.pagingData.page>1){buttonshtml+="<span data-"+self.id+"-link='"+((self.pagingData.page-2)*self.baseParams.limit)+"' class='previouspostslink'></span>";}else{buttonshtml+="<span data-"+self.id+"-link='"+((self.pagingData.page-2)*self.baseParams.limit)+"' class='previouspostslink disabled'></span>";}
for(i=loopstart;i<=loopend;i++)
{if(self.pagingData.page===i){buttonshtml+="<span class='current'>"+i+"</span>";}
else{buttonshtml+="<span data-"+self.id+"-link='"+((i-1)*self.baseParams.limit)+"'>"+i+"</span>";}}
if(self.pagingData.page<self.pagingData.pages)
{buttonshtml+="<span class='nextpostslink' data-"+self.id+"-link='"+(self.pagingData.page*self.baseParams.limit)+"'></span>";}else{buttonshtml+="<span class='nextpostslink disabled' data-"+self.id+"-link='"+(self.pagingData.page*self.baseParams.limit)+"'></span>";}
if(loopend!==self.pagingData.pages){buttonshtml+="<span class='last' data-"+self.id+"-link='"+((self.pagingData.pages-1)*self.baseParams.limit)+"'></span>";}else{buttonshtml+="<span class='last disabled' data-"+self.id+"-link='"+((self.pagingData.pages-1)*self.baseParams.limit)+"'></span>";}
if(self.pagingData.pages>1){paginghtml=RichHTML.replaceAll(self.pagingTpl,"{navbuttons}",buttonshtml);paginghtml=RichHTML.replaceAll(paginghtml,"{navpagescount}",self.pagingData.pages);paginghtml=RichHTML.replaceAll(paginghtml,"{navpagesitemsperpage}",self.baseParams.limit);if(self.pagingEl!==null){$("#"+self.pagingEl).html(paginghtml);}else{$("#"+self.id).parent().children(".richgrid-pagenavi-wrapper").html(paginghtml);}}else{if(self.pagingEl!==null){$("#"+self.pagingEl).html("");}
else{$("#"+self.id).parent().children(".richgrid-pagenavi-wrapper").html("");}}
$(document).on("click","*[data-"+self.id+"-link]:not(.disabled)",function(){$(document).off("click","*[data-"+self.id+"-link]:not(.disabled)");self.reload({params:{start:$(this).attr("data-"+self.id+"-link")}});});}
if(self.groupField!==null)
{$("body").on('click','.richtable .rich-grouptoggle',function(){$(this).siblings().filter('.rich-grouptoggle').show();$(this).hide();$(this).parent().parent().nextUntil(".rich-group-row").toggle();group_id=$(this).parent().parent().attr('id');group_visible=$(this).parent().parent().find('.rich-grouptoggle-minus').is(":visible");self.set_cookie({'action':'group',data:{group_id:group_id,group_visible:group_visible}});});}
$("#"+self.id+" tbody tr:not(.rich-group-row) td[dataindex='"+self.selectedColumn+"']").addClass('col-selected');$("#"+self.id+" tbody tr:not(.expander-row,.rich-group-row):odd").addClass('odd');}
if(self.hasCheckbox){if(!reloading){$("body").on('click',"#"+self.id+" thead th.checkbox",function(){th=this;RichHTML.debug(3,Array('Clicking checkbox header',"#"+self.id));if(!$(th).hasClass('checkbox-checked')){$("#"+self.id+" tbody td.checkbox div.checkbox-icon:not(.checkbox-icon-checked)").each(function(){$(this).trigger('click',[true]);});}else{$("#"+self.id+" tbody td.checkbox div.checkbox-icon-checked").each(function(){$(this).trigger('click',[true]);});}
$(th).toggleClass('checkbox-checked');data={};data.rowid='all';data.rowsSelected=self.getSelectedRowIds();data.totalSelected=self.getSelectedRowIds().length;$(self).trigger('rowselect',[data]);});}else{$("#"+self.id+" thead th.checkbox-checked").removeClass('checkbox-checked');}}
RichHTML.unMask();RichHTML.onPostLoad(self);data={};data.paging=self.pagingData;data.meta=self.setMetaData();data.jsonData=self.jsonData;if(typeof(self.footerEl)!=="undefined"){$('#'+self.footerEl).show();$('#'+self.footerEl+' .rich-button').attr('disabled','disabled');}
$(self).trigger("load",[data]).trigger("colload");};RichHTML.grid.prototype.set_cookie=function(params){var self=this;if(jQuery.cookie=='undefined')return;if($.cookie("richgrid-data"+RichHTML.prefixLabel)){cookie_vars=JSON.parse($.cookie("richgrid-data"+RichHTML.prefixLabel));}else{cookie_vars={};}
if(params.action=="group"){if(typeof(cookie_vars[self.el])=="undefined")cookie_vars[self.el]={};if(typeof(cookie_vars[self.el]['groups'])=="undefined")cookie_vars[self.el].groups={};if(!params.data.group_visible){cookie_vars[self.el].groups[params.data.group_id]="1"}else{delete cookie_vars[self.el].groups[params.data.group_id];}}else if(params.action=="sort"){if((typeof(params.data.d)=="undefined")||(typeof(params.data.s)=="undefined"))return false;if(typeof(cookie_vars[self.el])=="undefined")cookie_vars[self.el]={};cookie_vars[self.el]['d']=params.data.d;cookie_vars[self.el]['s']=params.data.s;}else if(params.action=="columns"){if(typeof(cookie_vars[self.el])=="undefined")cookie_vars[self.el]={};if(typeof(cookie_vars[self.el]['hidden'])=="undefined")cookie_vars[self.el].groups={};cookie_vars[self.el].hidden=params.data['h'];}
$.cookie("richgrid-data"+RichHTML.prefixLabel,JSON.stringify(cookie_vars),{expires:self.cookieExpires});}
RichHTML.grid.prototype.setMetaData=function(){var self=this,meta="";if(self.pagingData.totalItems==0){meta="Displaying items: 0 - 0 of 0";}else if(typeof(self.pagingData.start)!=="undefined"){meta="Displaying items: "+(self.pagingData.start+1)+" - "+(self.pagingData.start+self.pagingData.items)+" of "+self.pagingData.totalItems;}
if(typeof(self.metaEl)!=="undefined"){$('#'+self.metaEl).html(meta);}
return meta;};RichHTML.grid.prototype.getTargetRow=function(draggedRow,y){var self=this,rows,row,rowY,rowHeight,i;rows=$("#"+self.id)[0].rows;for(i=0;i<rows.length;i++){row=rows[i];rowY=self.getPosition(row);if(rowY==null)return null;rowY=rowY.y;rowHeight=parseInt(row.offsetHeight,10)/2;if(row.offsetHeight===0){rowY=self.getPosition(row.firstChild);if(rowY==null)return null;rowY=rowY.y;rowHeight=parseInt(row.firstChild.offsetHeight,10)/2;}
if((y>rowY-rowHeight)&&(y<(rowY+rowHeight))){if(row===draggedRow[0]){return null;}
return row;}}
return null;};RichHTML.grid.prototype.mouseDown=function(target,event){var self=this;self.dragData.dragObject=$(target).parent().parent();self.dragData.mouseOffset=self.getMouseOffset(target,event);if(self.dragData.mouseOffset==null)return;RichHTML.debug(3,Array("Initializing Drag",self.dragData));$("body").off("mousemove");$("body").on("mousemove",'#'+self.id,function(ev){var expanderrow,mousePos,y,yOffset,windowHeight,movingDown,currentRow;if(self.dragData.dragObject===null){return;}
mousePos=self.mouseCoords(ev);y=mousePos.y-self.dragData.mouseOffset.y;yOffset=window.pageYOffset;if(document.all){if(typeof document.compatMode!=='undefined'&&document.compatMode!=='BackCompat'){yOffset=document.documentElement.scrollTop;}
else if(typeof document.body!=='undefined'){yOffset=document.body.scrollTop;}}
if(mousePos.y-yOffset<self.dragData.scrollAmount){window.scrollBy(0,-self.dragData.scrollAmount);}else{windowHeight=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;if(windowHeight-(mousePos.y-yOffset)<self.dragData.scrollAmount){window.scrollBy(0,self.dragData.scrollAmount);}}
if(y!==self.dragData.savedY){movingDown=y>self.dragData.savedY;self.dragData.savedY=y;if(self.dragData.onDragClass){self.dragData.dragObject.addClass(self.dragData.onDragClass);}
currentRow=self.getTargetRow(self.dragData.dragObject,y);if(currentRow&&!$('#'+currentRow.id).hasClass('expander-row')){if(movingDown){$('#'+currentRow.id).insertBefore(self.dragData.dragObject);}else{$('#'+currentRow.id).insertAfter(self.dragData.dragObject);}
if(self.hasExpander){expanderrow=$("#"+self.id+"-expander-"+currentRow.id.split('row-')[1]+"-data");if(expanderrow.length){expanderrow.insertAfter($('#'+currentRow.id));}
expanderrow=$("#"+self.id+"-expander-"+self.dragData.dragObject.attr('id').split('row-')[1]+"-data");if(expanderrow.length){expanderrow.insertAfter(self.dragData.dragObject);}}}}});$("body").off("mouseup",'#'+self.id);$("body").on("mouseup",'#'+self.id,function(ev){if(self.dragData.dragObject===null){return;}
$('#'+self.id).unbind("mousemove");if(self.dragData.onDragClass){self.dragData.dragObject.removeClass(self.dragData.onDragClass);}
$("#"+self.id+" tbody tr:not(.expander-row)").removeClass('odd');$("#"+self.id+" tbody tr:not(.expander-row):odd").addClass('odd');self.dragData.dragObject=null;var data={};$(self).trigger("drop",[data]);});};;RichHTML.msgBox=function(content,config,callback)
{var msgBox=new RichHTML.window({});var required="";msgBox.name='msgBox';msgBox.options.escClose=false;msgBox.options.type="alert";msgBox.options.password=false;msgBox.options.textarea=false;msgBox.options.allowblank=false;msgBox.options.value="";msgBox.confirm_buttons={button1:{text:"yes"},button2:{text:"no"},button3:{text:"cancel",type:"cancel"}};msgBox.prompt_buttons={button1:{text:"ok"},button2:{text:"cancel",type:"cancel"}};msgBox.yesno_buttons={button1:{text:"yes"},button2:{text:"no"}};msgBox.options=$.extend(msgBox.options,config);if(typeof(msgBox.options.buttons)=="undefined"){switch(msgBox.options.type){case"confirm":msgBox.options.buttons=msgBox.confirm_buttons;break;case"yesno":msgBox.options.buttons=msgBox.yesno_buttons;break;case"prompt":msgBox.options.type="prompt";msgBox.options.buttons=msgBox.prompt_buttons;break;default:break;}}
switch(msgBox.options.type){case"prompt":if(msgBox.options.content===null){if(msgBox.options.allowblank===false){required=" class='required' ";}
if(msgBox.options.password){msgBox.options.content=content+"<input type='password' class='required' name='value' style='width:80%;margin-top:4px;' />";}else if(msgBox.options.textarea){msgBox.options.content=content+"<textarea "+required+" name='value' style='width:100%;margin-top:4px;' rows='2' /></textarea>";}else{msgBox.options.content=content+"<input type='text' "+required+" name='value' style='width:80%;margin-top: 4px;' value='"+msgBox.options.value+"' />";}}
break;default:if(msgBox.options.content===null){msgBox.options.content=content;}
break;}
if(callback){msgBox.options.afterClick=callback;}else{msgBox.options.afterClick=null;}
if(msgBox.options.title===''){msgBox.options.hideTitle=true;}
msgBox.show();RichHTML.center($('#'+msgBox.id+' .window-description-elements'),$('#'+msgBox.id+' .window-description form'));if(typeof msgBox.options.afterClick==='function'&&msgBox.options.afterClick!==false){$(msgBox).bind({"buttonclick":function(event,data){var elements,args=[];elements=msgBox.form.serializeArray();data.elements={};for(var i=0;i<elements.length;i++){data.elements[elements[i].name]=elements[i].value;}
args.push(data);msgBox.options.afterClick.apply(self,args);}});}};RichHTML.confirm=function(title,options,callback){var config={type:'confirm'};config=$.extend(config,options);RichHTML.msgBox(title,config,callback);};RichHTML.error=function(title,options,callback){var config={type:'error'};config=$.extend(config,options);RichHTML.msgBox(title,config,callback);};RichHTML.prompt=function(title,options,callback){var config={type:'prompt'};config=$.extend(config,options);RichHTML.msgBox(title,config,callback);};RichHTML.alert=function(msg,options,callback){var config={type:'yesno'};config=$.extend(config,options);RichHTML.msgBox(msg,config,callback);};RichHTML.info=function(msg,options,callback){var config={type:'info'};config=$.extend(config,options);RichHTML.msgBox(msg,config,callback);};RichHTML.window=function(config){var defaults,self=this;self.id=null;self.hasButtons=false;self.name='richwindow';self.delayLoad=false;self.form=null;self.params={};defaults={content:null,width:360,showerrors:true,type:"form",grid:null,onSubmit:null,showSubmit:false,showDelete:false,hideButtons:false,escClose:true,hideTitle:false,useOverlay:true,transition:0,title:'',beforeSubmit:null,beforeCancel:null};self.options=$.extend(defaults,config);self.elements={firstElement:null,lastElement:null,firstGroup:null,lastGroup:null};if(config.id){self.id=config.id;}
else{self.id=self.getId();}
self.template='<div class="richwindow" id="{richid}" style="width:{width};"><div class="window-bg" style="width:{width};">';self.template+='<div class="window-title" style="width:{width};">{title}</div>';self.template+='<div class="window-description loading-content {msgboxclasses}" style="{minHeight};height:{height};"><form novalidate action="index.php" id="form-description-{richid}" novalidate="novalidate" style="margin-bottom:5px;"><div class="window-description-elements"></div></form></div>';self.template+='<div class="window-buttons">{{buttons}}</div></div></div>';self.closeKeyHandler=function(e){if(e.keyCode===27&&self.options.escClose){$('.richwindow .datepicker').hide();if(jQuery().timepicker){$('.richwindow .timepicker').timepicker('hideWidget');}
self.hide();}};self.enterKeyHandler=function(e){if(e.keyCode===13){if($(document.activeElement).hasClass('rich-button')){$(document.activeElement).click();}
if(!$(document.activeElement).is('div')&&!$(document.activeElement).is('textarea')){e.preventDefault();if(self.options.type=='prompt'){$('#'+self.id+' #rich-button-button1').click();}
return false;}}};self.tabKeyHandler=function(e){if(e.keyCode===9){if($(e.target).is(self.elements.lastGroup)&&!e.shiftKey){self.elements.firstGroup.first().focus();e.preventDefault();}else if($(e.target).is(self.elements.firstGroup)&&e.shiftKey){self.elements.lastGroup.first().focus();e.preventDefault();}}};};RichHTML.window.prototype.callDelete=function(method){var self=this,me;me=$('#'+self.id);if(typeof(self.options.deleteUrl)==="undefined"){RichHTML.debug(1,"You need to define a deleteUrl if you want to use the delete method.");return false;}
if(self.form===null){RichHTML.debug(1,"this.form is not set yet via the render method.");return false;}
if(typeof(method)==="undefined"){successMethod=function(data){if(self.options.grid!==null){self.options.grid.reload();}
self.hide();};}else{successMethod=function(data){method(data);if(self.options.grid!==null){self.options.grid.reload();}
self.hide();};}
if(self.params&&typeof(self.params)!=="undefined"){$.each(self.params,function(c_i,c_val){me.find('.window-description form .window-description-elements').append($('<input/>').attr('type','hidden').attr('name',c_i).val(c_val));});}
$.post(self.options.deleteUrl,self.form.serialize(),successMethod,"json");};RichHTML.window.prototype.submit=function(method){var self=this,me;if(!method)method=null;me=$('#'+self.id);if(typeof(self.options.actionUrl)==="undefined"){RichHTML.debug(1,"You need to define an actionUrl if you want to use the submit method.");return false;}
if(self.form===null){RichHTML.debug(1,"this.form is not set yet via the render method.");return false;}
if(method===null){successMethod=function(data){self.postSubmit(data);};}else{successMethod=function(data){method(data,self.form.serializeArray());self.postSubmit(data);};}
if(self.params&&typeof(self.params)!=="undefined"){$.each(self.params,function(c_i,c_val){me.find('.window-description form .window-description-elements').append($('<input/>').attr('type','hidden').attr('name',c_i).val(c_val));});}
$.post(self.options.actionUrl,self.form.serialize(),successMethod,"json");};RichHTML.window.prototype.postSubmit=function(data){var self=this;if((typeof(data.error)=="undefined")||((typeof(data.error)!="undefined")&&!data.error)){if(self.options.grid!==null){self.options.grid.reload();}
self.hide();}else{if((typeof(data.message)==="undefined")||($.trim(data.message)==="")){data.message='There was an error submitting your request';}
if(self.options.showerrors)RichHTML.msgBox(data.message,{type:'error'});}};RichHTML.window.prototype.getId=function(){return this.id||(this.id=RichHTML.id.apply(this));};RichHTML.window.prototype.checkContent=function(){var self=this,itemsDefined=0;(self.options.content!==null)?itemsDefined++:itemsDefined;(typeof(self.options.el)!=="undefined")?itemsDefined++:itemsDefined;(typeof(self.options.url)!=="undefined")?itemsDefined++:itemsDefined;if(itemsDefined>1){RichHTML.debug(1,"You need only one param of el, url, or content to determine where the content is coming from.");return false;}else if(itemsDefined===0){RichHTML.debug(1,"You need either config param el, url, or content to determine where the content is coming from.");return false;}
return true;};RichHTML.window.prototype.setHeight=function(height){var innerwindow=$('#'+this.id).find('.window-description');innerwindow.height(height);};RichHTML.window.prototype.prepTemplate=function(){var self=this,content="";if(!self.checkContent()){return false;}
self.template=RichHTML.replaceAll(self.template,"{richid}",self.id);if((self.options.title==='')&&(!self.options.hideTitle)){self.options.title='Empty title';}
if(self.options.type==="form"){self.template=RichHTML.replaceAll(self.template,"{msgboxclasses}","");}else{self.template=RichHTML.replaceAll(self.template,"{msgboxclasses}","msgbox-wrapper msgbox-"+self.options.type);}
self.template=RichHTML.replaceAll(self.template,"{title}",self.options.title);self.template=RichHTML.replaceAll(self.template,"{width}",self.options.width+"px");if(typeof(self.options.height)==="undefined"){self.template=RichHTML.replaceAll(self.template,"{height}","auto");}else{self.template=RichHTML.replaceAll(self.template,"{height}",self.options.height+"px");}
if(typeof(self.options.minHeight)!=="undefined"){self.template=RichHTML.replaceAll(self.template,"{minHeight}","min-height:"+self.options.minHeight+"px");}else{self.template=RichHTML.replaceAll(self.template,"{minHeight}","");}
self.template=RichHTML.replaceAll(self.template,"{descriptionwidth}",(self.options.width-40)+"px");return true;};RichHTML.window.prototype.prepButtons=function(){var self=this,buttons='',button;for(button in self.options.buttons){buttons+='<a href="#" class="rich-button white" id="rich-button-'+button+'"><span class="buttontext">'+self.options.buttons[button].text+'</span></a>';}
if((buttons==='')&&(self.options.hideButtons)){self.hasButtons=false;RichHTML.debug(3,"No buttons and hide Ok passed as true");}else if(buttons===''){self.hasButtons=true;if(self.options.showSubmit){buttons+='<a href="#" class="rich-button white" id="rich-button-submit"><span class="buttontext">'+lang('Submit')+'</span></a>';if(self.options.showDelete){buttons+='<a href="#" class="rich-button white" id="rich-button-delete"><span class="buttontext">'+lang('Delete')+'</span></a>';}
buttons+='<a href="#" class="rich-button white" id="rich-button-autoclose"><span class="buttontext">'+lang('Close')+'</span></a>';}else{if(self.options.showDelete){buttons='<a href="#" class="rich-button white" id="rich-button-delete"><span class="buttontext">'+lang('Delete')+'</span></a>';}
buttons+='<a href="#" class="rich-button white" id="rich-button-autoclose"><span class="buttontext">'+lang('Ok')+'</span></a>';}
self.template=RichHTML.replaceAll(self.template,"{{buttons}}",buttons);}else{self.hasButtons=true;self.template=RichHTML.replaceAll(self.template,"{{buttons}}",buttons);}
return true;};RichHTML.window.prototype.render=function(useOverlay){var self=this,me;if(useOverlay){$('<div class = "rich-dark-overlay" />').appendTo('body').fadeIn("slow");}
$(document.body).append(self.template);me=$('#'+self.id);if(!self.hasButtons){me.find('.window-buttons').css('display','none');me.find('.window-description').addClass('window-no-buttons');}
if(self.options.hideTitle){me.find('.window-title').css('display','none');me.find('.window-description').addClass('window-no-title');}
self.form=me.find('.window-description form');if(typeof(self.options.el)!=="undefined"){RichHTML.debug(3,"Loading content from element with id: "+self.options.el);$('#'+self.id+' .window-description form .window-description-elements').html($('#'+self.options.el).html());$('.richwindow .loading-content').removeClass('loading-content');}else if(typeof(self.options.url)!=="undefined"){RichHTML.debug(3,"Loading content from url: "+self.options.url);self.delayLoad=true;}else if(typeof(self.options.content)!=="undefined"){RichHTML.debug(3,"Loading content from content param: "+self.options.content);$('#'+self.id+' .window-description form .window-description-elements').html(self.options.content);$('.richwindow .loading-content').removeClass('loading-content');}
self.position();return true;};RichHTML.window.prototype.position=function(){var self=this;var props;var obj={};if(self.options.right){obj.right=self.options.right+"px";}
if(self.options.left){obj.left=self.options.left+"px";}
if(self.options.top){obj.top=self.options.top+"px";}
if(self.options.bottom){obj.bottom=self.options.bottom+"px";}
if((self.options.right)||(self.options.left)||(self.options.top)||(self.options.bottom)){obj.position='absolute';$('#'+self.id).css(obj);}else{RichHTML.center($('#'+self.id),window,self.options.transition,100);}
return;};RichHTML.window.prototype.hide=function(){var self=this;if(jQuery().timepicker){$('.richwindow .timepicker').timepicker('hideWidget');}
if(self.options.useOverlay){$('.rich-dark-overlay').fadeOut("fast",function(){$(this).remove();});}
$(document).unbind('keydown',self.closeKeyHandler).unbind('keydown',self.tabKeyHandler).unbind('keydown',self.enterKeyHandler);$('#'+self.id).remove();};RichHTML.window.prototype.validateForm=function(){var self=this;data={};if(jQuery().validate){data.validate=self.form.validate({highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass);},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass);$(element).attr('title','');},errorPlacement:function(error,element){if(error.html()!==''){element.attr('title',error[0].innerText);}}});if(self.form.valid()){return true;}else{$('#'+self.id+' .window-description .error').first().focus();$(self).trigger("validationerror",[data]);return false;}}else if(jQuery().parsley){data.validate=self.form.parsley('validate');if(self.form.parsley('isValid')){return true;}
$('#'+self.id+' .window-description .error').first().focus();$(self).trigger("validationerror",[data]);return false;}else{return true;}};RichHTML.window.prototype.mask=function(){var $t,height,width;$t=$('.richwindow');height=($t.outerHeight()===0)?$(document).height():$t.outerHeight();width=$t.outerWidth();$("#richhtml-overlay-inner").css({top:$t.offset().top,left:$t.offset().left,width:width,height:height,display:''});$("#richhtml-overlay-inner").show();};RichHTML.window.prototype.unMask=function(){$("#richhtml-overlay-inner").fadeOut();$("#richhtml-overlay-inner").css({display:'none',left:'-999999px'});};RichHTML.window.prototype.buttonBindings=function(){var self=this,me,data={};me=$('#'+self.id);me.find('.rich-button').bind('click',function(){var scope,buttonId=$(this).attr('id').substring(12);if(buttonId==="autoclose"){if(self.options.showSubmit&&self.options.beforeCancel){self.options.beforeCancel();}
self.hide();data.btn="ok";$(self).trigger('buttonclick',[data]);}else if(buttonId==="submit"){if(!self.validateForm()){return false;}
if(self.options.showSubmit&&self.options.beforeSubmit){if(self.options.beforeSubmit()===false){return false;}}
self.submit(self.options.onSubmit);data.btn="submit";$(self).trigger('buttonclick',[data]);}else if(buttonId==="delete"){self.callDelete(self.options.onDelete);data.btn="delete";$(self).trigger('buttonclick',[data]);}else{if(((self.options.buttons[buttonId].type!=="cancel")||typeof(self.options.buttons[buttonId].type)==="undefined")&&!self.validateForm()){return false;}
if(typeof self.options.buttons[buttonId].onclick==='function'&&self.options.buttons[buttonId].onclick!==false){self.options.buttons[buttonId].onclick(self,{elements:self.form.serializeArray()});}else{self.hide();}
data.btn=self.options.buttons[buttonId].text;if((self.name=="richwindow")&&((typeof(self.options.buttons[buttonId].type)==="undefined")||(self.options.buttons[buttonId].type!=="cancel"))){$(self).trigger('buttonclick',[data]);}else{$(self).trigger('buttonclick',[data]);}}
return false;});return true;};RichHTML.window.prototype.setEscToClose=function(bClose){var self=this;self.options.escClose=bClose;};RichHTML.window.prototype.setUrl=function(url){var self=this;self.options.url=url;};RichHTML.window.prototype.addParams=function(newparams){this.params=$.extend(this.params,newparams);};RichHTML.window.prototype.reload=function(){this.load();};RichHTML.window.prototype.load=function(){var self=this,me;me=$('#'+self.id);if(self.delayLoad){RichHTML.mask('#'+self.id);$.get(self.options.url,self.params,function(response,status,xhr){me.find('.window-description form .window-description-elements').html(response);if(status=="error"){var msg="Sorry but there was an error: ";RichHTML.debug(1,Array(msg+xhr.status+" "+xhr.statusText,xhr));}
self.prepElements();});RichHTML.unMask();}else{self.prepElements();}
$(document).bind('keydown',self.closeKeyHandler).bind('keydown',self.tabKeyHandler).bind('keydown',self.enterKeyHandler);};RichHTML.window.prototype.show=function(options){var self=this;if(options&&typeof(options.params)!=="undefined"){self.params=$.extend(self.params,options.params);}else{self.params={};}
if(options&&typeof(options.options)!=="undefined"){self.options=$.extend(self.options,options.options);}
RichHTML.debug(3,Array("Starting render for: "+self.id,self));if(!self.prepTemplate()){return false;}
if(!self.prepButtons()){return false;}
if(!self.render(self.options.useOverlay)){return false;}
if(self.hasButtons&&!self.buttonBindings()){return false;}
this.load();self.setDraggable();return true;};RichHTML.window.prototype.prepElements=function(){var self=this,tabbable,me;me=$('#'+self.id);me.find(':input, .rich-button, textarea').eq(0).focus();tabbable=me.find(':input, .rich-button, textarea');if(tabbable.length>0){self.elements.firstElement=$(tabbable).filter(':first');self.elements.lastElement=$(tabbable).filter(':last');self.elements.firstGroup=(self.elements.firstElement[0].type!=='radio')?self.elements.firstElement:tabbable.filter("[name='"+self.elements.firstElement[0].name+"']");self.elements.lastGroup=(self.elements.lastElement[0].type!=='radio')?self.elements.lastElement:tabbable.filter("[name='"+self.elements.lastElement[0].name+"']");}
$('.richwindow .loading-content').removeClass('loading-content');};RichHTML.window.prototype.setDraggable=function(){var self=this,me,relX,relY,thistarget,targetw,targeth,docw,doch,ismousedown=false;me=$('#'+self.id);me.css('position','absolute');thistarget=me.find('.window-title');targetw=thistarget.width();targeth=thistarget.height();thistarget.bind('mousedown',function(e){var pos,srcX,srcY,mousePos;pos=me.offset();srcX=pos.left;srcY=pos.top;docw=$('body').width();doch=$('body').height();mousePos=RichHTML.mouseCoords(e);relX=e.pageX-srcX;relY=e.pageY-srcY;ismousedown=true;});$(document).bind('mousemove',function(e){var maxY,maxX,mousePos,diffX,diffY;if(ismousedown)
{targetw=me.width();targeth=me.height();maxX=docw-targetw-10;maxY=doch-targeth-10;mousePos=RichHTML.mouseCoords(e);diffX=mousePos.x-relX;diffY=mousePos.y-relY;me.css('top',(diffY)+'px');me.css('left',(diffX)+'px');}});$(window).bind('mouseup',function(e){ismousedown=false;});return this;};;heartbeat={pulseCount:0,pulseLength:0,pulseTop:0,beat:null,beats:[],url:'index.php?fuse=admin&action=pulse',add:function(options){var that=this;if(typeof options.name!='string'||typeof options.pulse!='number'){alert('Invalid parameters in heartbeat function');}
for(i=0;i<this.beats.length;i++){if(this.beats[i].name==options.name){return false;}}
var defaults={args:{},callback:null,pulse:15,delay:null};options=$.extend(true,{},defaults,options);for(var i in options.args){if(i=='fuse'||i=='action'){alert('cannot use restricted query params "fuse" or "action"');}}
if(options.delay!==null){if(options.delay!==0){setTimeout(function(){that.prepulse(options.name,options.args,options.callback);that.beats.push({name:options.name,pulse:options.pulse,args:options.args,callback:options.callback});that.setPulse();},options.delay*1000);}else{this.prepulse(options.name,options.args,options.callback);this.beats.push({name:options.name,pulse:options.pulse,args:options.args,callback:options.callback});this.setPulse();}}else{this.beats.push({name:options.name,pulse:options.pulse,args:options.args,callback:options.callback});this.setPulse();}
return true;},remove:function(beatName){for(i=0;i<this.beats.length;i++){if(this.beats[i].name==beatName){this.beats.splice(i,1);}}
this.setPulse();},check:function(beatName){for(i=0;i<this.beats.length;i++){if(this.beats[i].name==beatName){return true;}}
return false;},setPulse:function(){if(this.beats.length===0){clearInterval(this.beat);this.pulseCount=0;this.pulseTop=0;this.pulseLength=0;return;}
var pulseArray=[];for(var i=0;i<this.beats.length;i++){pulseArray.push(this.beats[i].pulse);}
this.pulseCount=0;this.pulseTop=this.gcf_lcm_ar('lcm',pulseArray.slice());this.pulseLength=this.gcf_lcm_ar('gcf',pulseArray.slice());if(this.beat){clearInterval(this.beat);}
this.beat=setInterval(function(){heartbeat.pulse();},this.pulseLength*1000);},prepulse:function(name,args,callback){var that=this;var beatArgs={};beatArgs[name]=args;$.ajax({type:'POST',url:that.url,data:{args:JSON.stringify(beatArgs)},success:function(response){ce.checkRedirectLogin(response);if(callback){callback(response.returnArgs[name]);}}});},pulse:function(){var that=this;this.pulseCount+=this.pulseLength;var beatArgs={},beatFunctions={},firePulse=false;for(i=0;i<this.beats.length;i++){if(this.pulseCount%this.beats[i].pulse===0){firePulse=true;if(this.beats[i].args!==null){beatArgs[this.beats[i].name]=this.beats[i].args;}else{beatArgs[this.beats[i].name]={};}
if(this.beats[i].callback!==null){beatFunctions[this.beats[i].name]=this.beats[i].callback;}}}
if(firePulse){$.ajax({type:'POST',url:that.url,data:{args:JSON.stringify(beatArgs)},dataType:'json',success:function(response){ce.checkRedirectLogin(response);for(var n in beatFunctions){if(n in response.returnArgs){beatFunctions[n](response.returnArgs[n]);}else{beatFunctions[n]();}}}});}
if(this.pulseCount==this.pulseTop){this.pulseCount=0;}},gcf:function(a,b){return(b===0)?(a):(this.gcf(b,a%b));},lcm:function(a,b){return(a/this.gcf(a,b))*b;},gcf_lcm_ar:function(type,ar){if(ar.length>1){if(type=='lcm'){ar.push(this.lcm(ar.shift(),ar.shift()));}else{ar.push(this.gcf(ar.shift(),ar.shift()));}
return this.gcf_lcm_ar(type,ar);}else{return ar[0];}}};;var clientexec=clientexec||{};if(typeof(clientexec.sessionHash)!="undefined"){$.ajaxSetup({beforeSend:function(xhr){xhr.setRequestHeader('X-Session-Hash',clientexec.sessionHash);}});}
if(typeof(gHash)!="undefined"){$.ajaxSetup({beforeSend:function(xhr){xhr.setRequestHeader('X-Session-Hash',gHash);}});}
var MD5=function(string){function RotateLeft(lValue,iShiftBits){return(lValue<<iShiftBits)|(lValue>>>(32-iShiftBits));}
function AddUnsigned(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=(lX&0x80000000);lY8=(lY&0x80000000);lX4=(lX&0x40000000);lY4=(lY&0x40000000);lResult=(lX&0x3FFFFFFF)+(lY&0x3FFFFFFF);if(lX4&lY4){return(lResult^0x80000000^lX8^lY8);}
if(lX4|lY4){if(lResult&0x40000000){return(lResult^0xC0000000^lX8^lY8);}else{return(lResult^0x40000000^lX8^lY8);}}else{return(lResult^lX8^lY8);}}
function F(x,y,z){return(x&y)|((~x)&z);}
function G(x,y,z){return(x&z)|(y&(~z));}
function H(x,y,z){return(x^y^z);}
function I(x,y,z){return(y^(x|(~z)));}
function FF(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function GG(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function HH(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function II(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b);};function ConvertToWordArray(string){var lWordCount;var lMessageLength=string.length;var lNumberOfWords_temp1=lMessageLength+8;var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1%64))/64;var lNumberOfWords=(lNumberOfWords_temp2+1)*16;var lWordArray=Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=(lWordArray[lWordCount]|(string.charCodeAt(lByteCount)<<lBytePosition));lByteCount++;}
lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=lWordArray[lWordCount]|(0x80<<lBytePosition);lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray;};function WordToHex(lValue){var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(lValue>>>(lCount*8))&255;WordToHexValue_temp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);}
return WordToHexValue;};function Utf8Encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}
else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}
else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;};var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var S11=7,S12=12,S13=17,S14=22;var S21=5,S22=9,S23=14,S24=20;var S31=4,S32=11,S33=16,S34=23;var S41=6,S42=10,S43=15,S44=21;string=Utf8Encode(string);x=ConvertToWordArray(string);a=0x67452301;b=0xEFCDAB89;c=0x98BADCFE;d=0x10325476;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],S11,0xD76AA478);d=FF(d,a,b,c,x[k+1],S12,0xE8C7B756);c=FF(c,d,a,b,x[k+2],S13,0x242070DB);b=FF(b,c,d,a,x[k+3],S14,0xC1BDCEEE);a=FF(a,b,c,d,x[k+4],S11,0xF57C0FAF);d=FF(d,a,b,c,x[k+5],S12,0x4787C62A);c=FF(c,d,a,b,x[k+6],S13,0xA8304613);b=FF(b,c,d,a,x[k+7],S14,0xFD469501);a=FF(a,b,c,d,x[k+8],S11,0x698098D8);d=FF(d,a,b,c,x[k+9],S12,0x8B44F7AF);c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);a=FF(a,b,c,d,x[k+12],S11,0x6B901122);d=FF(d,a,b,c,x[k+13],S12,0xFD987193);c=FF(c,d,a,b,x[k+14],S13,0xA679438E);b=FF(b,c,d,a,x[k+15],S14,0x49B40821);a=GG(a,b,c,d,x[k+1],S21,0xF61E2562);d=GG(d,a,b,c,x[k+6],S22,0xC040B340);c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);b=GG(b,c,d,a,x[k+0],S24,0xE9B6C7AA);a=GG(a,b,c,d,x[k+5],S21,0xD62F105D);d=GG(d,a,b,c,x[k+10],S22,0x2441453);c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);b=GG(b,c,d,a,x[k+4],S24,0xE7D3FBC8);a=GG(a,b,c,d,x[k+9],S21,0x21E1CDE6);d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);c=GG(c,d,a,b,x[k+3],S23,0xF4D50D87);b=GG(b,c,d,a,x[k+8],S24,0x455A14ED);a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);d=GG(d,a,b,c,x[k+2],S22,0xFCEFA3F8);c=GG(c,d,a,b,x[k+7],S23,0x676F02D9);b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);a=HH(a,b,c,d,x[k+5],S31,0xFFFA3942);d=HH(d,a,b,c,x[k+8],S32,0x8771F681);c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);a=HH(a,b,c,d,x[k+1],S31,0xA4BEEA44);d=HH(d,a,b,c,x[k+4],S32,0x4BDECFA9);c=HH(c,d,a,b,x[k+7],S33,0xF6BB4B60);b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);d=HH(d,a,b,c,x[k+0],S32,0xEAA127FA);c=HH(c,d,a,b,x[k+3],S33,0xD4EF3085);b=HH(b,c,d,a,x[k+6],S34,0x4881D05);a=HH(a,b,c,d,x[k+9],S31,0xD9D4D039);d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);b=HH(b,c,d,a,x[k+2],S34,0xC4AC5665);a=II(a,b,c,d,x[k+0],S41,0xF4292244);d=II(d,a,b,c,x[k+7],S42,0x432AFF97);c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);b=II(b,c,d,a,x[k+5],S44,0xFC93A039);a=II(a,b,c,d,x[k+12],S41,0x655B59C3);d=II(d,a,b,c,x[k+3],S42,0x8F0CCC92);c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);b=II(b,c,d,a,x[k+1],S44,0x85845DD1);a=II(a,b,c,d,x[k+8],S41,0x6FA87E4F);d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);c=II(c,d,a,b,x[k+6],S43,0xA3014314);b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);a=II(a,b,c,d,x[k+4],S41,0xF7537E82);d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);c=II(c,d,a,b,x[k+2],S43,0x2AD7D2BB);b=II(b,c,d,a,x[k+9],S44,0xEB86D391);a=AddUnsigned(a,AA);b=AddUnsigned(b,BB);c=AddUnsigned(c,CC);d=AddUnsigned(d,DD);}
var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase();}
CE.prototype.htmlspecialchars=function(txt,onlyAmpersand){if(!txt)return'';txt=txt.replace(/&/g,"&amp;");if(onlyAmpersand){return txt}
return txt.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");}
CE.prototype.strip_tags=function(input,allowed){allowed=(((allowed||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join('');var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,commentsAndPhpTags=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return input.replace(commentsAndPhpTags,'').replace(tags,function($0,$1){return allowed.indexOf('<'+$1.toLowerCase()+'>')>-1?$0:'';});}
CE.prototype.dateRenderer=function(text){var newDate;if(!isNaN(text)){newDate=new Date(text*1000);}else{var components=/^(\d{4})-(\d{2})-(\d{2})$/.exec(text);if(components){newDate=new Date(components[1],components[2]-1,components[3]);}else{return text;}}
var y=newDate.getFullYear();var m=newDate.getMonth()+1;if(m<10){m='0'+m;}
var d=newDate.getDate();if(d<10){d='0'+d;}
return clientexec.dateFormat=='m/d/Y'?m+'/'+d+'/'+y:d+'/'+m+'/'+y;}
CE.prototype.linkify=function(text){var url_pattern=/(\()((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\))|(\[)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\])|(\{)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\})|(<|&(?:lt|#60|#x3c);)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(>|&(?:gt|#62|#x3e);)|((?:^|[^=\s'"\]])\s*['"]?|[^=\s]\s+)(\b(?:ht|f)tps?:\/\/[a-z0-9\-._~!$'()*+,;=:\/?#[\]@%]+(?:(?!&(?:gt|#0*62|#x0*3e);|&(?:amp|apos|quot|#0*3[49]|#x0*2[27]);[.!&',:?;]?(?:[^a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]|$))&[a-z0-9\-._~!$'()*+,;=:\/?#[\]@%]*)*[a-z0-9\-_~$()*+=\/#[\]@%])/img;var url_replace='$1$4$7$10$13<a href="$2$5$8$11$14" rel="nofollow" target="_blank">$2$5$8$11$14</a>$3$6$9$12';return text.replace(url_pattern,url_replace);};function CE(){}
CE.prototype.getGravatarUrl=function(gravataremail,size,setdefault)
{var gravUrl="",defaultpicurl,pathArray,newPathname="";if(!size)size=80;if(typeof(setdefault)==="undefined")setdefault=true;if(gravataremail&&gravataremail!=""){pathArray=window.location.pathname.split('/');for(var i=0;i<pathArray.length-1;i++){if(i>0){newPathname+="/";}
newPathname+=pathArray[i];}
defaultpicurl=window.location.protocol+"//"+window.location.host+"/"+newPathname+"/../templates/common/img/avatars/avatar_male_gray_on_dark_200x200.png";gravUrl="https://secure.gravatar.com/avatar.php?gravatar_id="+MD5(gravataremail)+"&size="+size+"&rating=PG";if(setdefault)gravUrl+="&default="+encodeURIComponent(defaultpicurl);}
return gravUrl;};CE.prototype.lazyLoad=function(){var last3Char,url;if(Object.prototype.toString.apply(arguments[0])!=='[object Array]'){arguments[0]=[arguments[0]];}
for(var i=0;i<arguments[0].length;i++){url=arguments[0][i];if(url.indexOf("?")<0){arguments[0][i]+='?ver='+gVer;}else{arguments[0][i]+='&ver='+gVer;}}
if(url.indexOf(".css")<0){return LazyLoad.js.apply(null,arguments);}else{return LazyLoad.css.apply(null,arguments);}}
CE.prototype.getMonth=function(month,short)
{if(typeof(short)==="undefined"){short=false;}
switch(month){case 1:return(short)?"Jan.":"January";exit;case 2:return(short)?"Feb.":"February";exit;case 3:return(short)?"Mar.":"March";exit;case 4:return(short)?"Apr.":"April";exit;case 5:return(short)?"May":"May";exit;case 6:return(short)?"June":"June";exit;case 7:return(short)?"July":"July";exit;case 8:return(short)?"Aug.":"August";exit;case 9:return(short)?"Sept.":"September";exit;case 10:return(short)?"Oct.":"October";exit;case 11:return(short)?"Nov.":"November";exit;case 12:return(short)?"Dec.":"December";exit;}}
CE.prototype.checkRedirectLogin=function(response){try{if(typeof(response.redirectToLogin)!="undefined"&&response.redirectToLogin){window.location='index.php?fuse=admin&action=logout';}}catch(e){}};CE.prototype.parseResponse=function(response,display,msg){if(display==undefined){display=true;}
try{if(typeof(response.error)!="undefined"&&response.error){var error;if((response.message!="")&&display){error=response.message.replace(/\n/gi,"<br /> \n");error=ce.htmlspecialchars(error);RichHTML.error(error);}else if(display){error="There was an error performing this action";if(msg!=undefined){error=msg;}
RichHTML.error(error);}
response=new Object();response.error=true;response.message=error;}else if(typeof(response.error)=="undefined"){response=new Object();response.error=true;RichHTML.error("Data returned seems to be pure html");}else{if((response.message!="")&&display){message=ce.htmlspecialchars(response.message);ce.msg(message);}}}catch(e){response=new Object();response.error=true;response.message="Data returned is not valid json<br/>"+e.toString()+'<br />'+response;if(display){RichHTML.error(response.message);}}
return response;};CE.prototype.msg=function(title,perm){$(window).scrollTop(0);clearTimeout($('#msg-div').data('timeoutId'));$('#msg-div-inner').html(title);$('#msg-div').show();if(!perm){timeoutId=setTimeout(function(){$('#msg-div').fadeOut('fast');},2500);$('#msg-div').data('timeoutId',timeoutId);}};CE.prototype.errormsg=function(title){clearTimeout($('#msg-div').data('timeoutId'));$('#msg-div-inner').text(title);$('#msg-div').fadeIn('normal');$('#msg-div').css("cursor","pointer");$('#msg-div').click(function(){$('#msg-div').fadeOut('fast');});};CE.prototype.createPluginInput=function(inputObj){var newInput={};switch(inputObj.type){case'text':case'hidden':case'password':newInput=$('<input id="input'+inputObj.name+'" name="'+inputObj.name+'" type="'+inputObj.type+'" />');newLabel='<label data-toggle="tooltip" title="'+inputObj.description+'" for="input'+inputObj.name+'">'+inputObj.label+'</label>';break;case'textarea':newInput=$('<textarea rows="8" id="textarea'+inputObj.name+'" name="'+inputObj.name+'"></textarea>');newLabel='<label data-toggle="tooltip" title="'+inputObj.description+'" for="textarea'+inputObj.name+'">'+inputObj.label+'</label>';break;case'checkbox':case'yesno':newInput=$('<select id="select'+inputObj.name+'" name="'+inputObj.name+'"><option value="1">Yes</option><option value="0">No</option></select>');newLabel='<label data-toggle="tooltip" title="'+inputObj.description+'" for="select'+inputObj.name+'">'+inputObj.label+'</label>';break;default:return false;}
newInput.attr('title',inputObj.description).val(inputObj.value);return{label:newLabel,input:newInput};};CE.prototype.isMobile=function(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check;};var ce=new CE();function jumpMenu(targ,selObj,restore)
{s=new String(selObj.options[selObj.selectedIndex].value);s.replace("&amp;","&");if(s=="")return false;if(selObj.selectedIndex==0)return false;eval(targ+".location='"+s+"'");if(restore)selObj.selectedIndex=0;}
function jumpMenu2(targ,selObj,restore)
{s=new String(selObj.options[selObj.selectedIndex].value);if(s=="")return false;s.replace("&amp;","&");eval(targ+".location='"+s+"'");if(restore)selObj.selectedIndex=0;}
clientexec.keen={};clientexec.keen.configured_plugin=false;clientexec.keen.configure=function()
{}
/*!
  SerializeJSON jQuery plugin.
  https://github.com/marioizquierdo/jquery.serializeJSON
  version 1.0.1 (Aug 20, 2012)

  Copyright (c) 2012 Mario Izquierdo
  Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
  and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*/
(function(b){b.fn.serializeJSON=function(){var d,c;d={};c=this.serializeArray();b.each(c,function(g,e){var f,j,h;f=e.name;j=e.value;h=b.map(f.split("["),function(i){var k;k=i[i.length-1];return k==="]"?i.substring(0,i.length-1):i});if(h[0]===""){h.shift()}b.deepSet(d,h,j)});return d};var a=function(c){return c===Object(c)};b.deepSet=function(c,k,g){if(!k||k.length===0){throw new Error("ArgumentError: keys param expected to be an array with least one key")}var i,d,f,h,j,e;i=k[0];d=k[1];if(d!==undefined&&d!==null){f=k.slice(1);if(i===""){j=c.length-1;e=c[c.length-1];if(a(e)&&!e[d]){i=j}else{c.push({});i=j+1}}if(c[i]===undefined){h=(d===""||!isNaN(parseInt(d,10)))?[]:{};c[i]=h}b.deepSet(c[i],f,g)}else{if(i===""){c.push(g)}else{c[i]=g}}}}(jQuery));;var language={"":"","Project-Id-Version: Clientexec 5.1.0a3\nReport-Msgid-Bugs-To: i18n@clientexec.com\nPOT-Creation-Date: 2014-06-04 17:15-0500\nPO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\nLast-Translator: FULL NAME <EMAIL@ADDRESS>\nLanguage-Team: LANGUAGE <LL@li.org>\nLanguage: \nMIME-Version: 1.0\nContent-Type: text/plain; charset=UTF-8\nContent-Transfer-Encoding: 8bit\n":"Project-Id-Version: Clientexec 5.1.0a3\nReport-Msgid-Bugs-To: i18n@clientexec.com\nPOT-Creation-Date: 2014-06-04 17:15-0500\nPO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\nLast-Translator: FULL NAME <EMAIL@ADDRESS>\nLanguage-Team: LANGUAGE <LL@li.org>\nLanguage: \nMIME-Version: 1.0\nContent-Type: text/plain; charset=UTF-8\nContent-Transfer-Encoding: 8bit\n","Invalid Email format for field %.":"Invalid Email format for field %.","The field % can't be empty.":"The field % can't be empty.","The following form field(s) were incomplete or incorrect":"The following form field(s) were incomplete or incorrect","Please complete or correct the form and submit again.":"Please complete or correct the form and submit again.","Visa is not accepted at this time":"Visa is not accepted at this time","MasterCard is not accepted at this time":"MasterCard is not accepted at this time","American Express is not accepted at this time":"American Express is not accepted at this time","Discover is not accepted at this time":"Discover is not accepted at this time","LaserCard is not accepted at this time":"LaserCard is not accepted at this time","Diners Club is not accepted at this time":"Diners Club is not accepted at this time","Switch is not accepted at this time":"Switch is not accepted at this time","This field is required":"This field is required","Submit":"Submit","Delete":"Delete","Close":"Close","Ok":"Ok","Your order has elapsed.":"Your order has elapsed.","No Active Chats":"No Active Chats","Location not detected":"Location not detected","Are you sure you want to delete this message?":"Are you sure you want to delete this message?","Your reply:":"Your reply:","Your status:":"Your status:","Domain":"Domain","Expiry Date":"Expiry Date","Date":"Date","Description":"Description","Gateway":"Gateway","Amount":"Amount","Invoice":"Invoice","Transaction ID":"Transaction ID","Transaction Id":"Transaction Id","Result":"Result","Action":"Action","Plugin":"Plugin","Add License(s)":"Add License(s)","Add License(s) to":"Add License(s) to","Are you sure you want to delete the selected license(s)":"Are you sure you want to delete the selected license(s)","Type":"Type","Attributes":"Attributes","Reseller":"Reseller","Are you sure you want to delete the selected resellers(s)":"Are you sure you want to delete the selected resellers(s)","Profile":"Profile","Total":"Total","Used":"Used","Add Reseller":"Add Reseller","Are you sure you want to delete the selected entry(ies)":"Are you sure you want to delete the selected entry(ies)","Add MDN":"Add MDN","Add Entry":"Add Entry","Are sure you want to inactive the selected account(s)?":"Are sure you want to inactive the selected account(s)?","Advanced Search":"Advanced Search","Ticket Search":"Ticket Search","Jan":"Jan","Feb":"Feb","Mar":"Mar","Apr":"Apr","May":"May","Jun":"Jun","Jul":"Jul","Aug":"Aug","Sep":"Sep","Oct":"Oct","Nov":"Nov","Dec":"Dec","January":"January","February":"February","March":"March","April":"April","June":"June","July":"July","August":"August","September":"September","October":"October","November":"November","December":"December","Sun":"Sun","Mon":"Mon","Tue":"Tue","Wed":"Wed","Thu":"Thu","Fri":"Fri","Sat":"Sat","Sunday":"Sunday","Monday":"Monday","Tuesday":"Tuesday","Wednesday":"Wednesday","Thursday":"Thursday","Friday":"Friday","Saturday":"Saturday","Loading":"Loading","Quick Search":"Quick Search","NOTE: This operation will move all the tickets from this Email to the user whose ID you will enter.\nAlso, this Email will be added as an alternate address for future support requests from this user.":"NOTE: This operation will move all the tickets from this Email to the user whose ID you will enter.\nAlso, this Email will be added as an alternate address for future support requests from this user.","Migrate Guest to User ID:":"Migrate Guest to User ID:","Add Staff Note":"Add Staff Note","Add Support Ticket":"Add Support Ticket","Email Customer":"Email Customer","Are you sure you want to delete the selected addon(s)?":"Are you sure you want to delete the selected addon(s)?","Plugin Variable":"Plugin Variable","Used in products":"Used in products","Not used in any products":"Not used in any products","Edit":"Edit","Title":"Title","Published":"Published","No":"No","Yes":"Yes","Post Date":"Post Date","Add Announcement":"Add Announcement","Are you sure you want to delete the selected announcement(s)":"Are you sure you want to delete the selected announcement(s)","Are you sure you want to delete the selected customer groups(s)?":"Are you sure you want to delete the selected customer groups(s)?","Description:":"Description:","Group":"Group","Color":"Color","Members":"Members","Add/Edit Customer Group":"Add/Edit Customer Group","Your secret key":"Your secret key","Event Name":"Event Name","Enabled":"Enabled","Add Notification":"Add Notification","Are you sure you want to reset the selected notification(s)?<br>Doing so will allow the notification(s) to email again the previously ignored customers.":"Are you sure you want to reset the selected notification(s)?<br>Doing so will allow the notification(s) to email again the previously ignored customers.","Are you sure you want to delete the selected notification(s)?":"Are you sure you want to delete the selected notification(s)?","Name":"Name","Are you sure you want to delete the selected addon(s)":"Are you sure you want to delete the selected addon(s)","Billing Period(s)":"Billing Period(s)","Price":"Price","Transfer":"Transfer","Renew":"Renew","Are you sure you want to delete the selected TLD billing period(s)":"Are you sure you want to delete the selected TLD billing period(s)","One Time":"One Time","Year":"Year","Years":"Years","TLD Setup Window":"TLD Setup Window","Pricing":"Pricing","Addons":"Addons","Advanced & Plugin Settings":"Advanced & Plugin Settings","Are you sure you want to delete this product group":"Are you sure you want to delete this product group","view pricing":"view pricing","Are you sure you want to delete the selected product(s)":"Are you sure you want to delete the selected product(s)","Monthly":"Monthly","Quarterly":"Quarterly","Semiannual":"Semiannual","Annual":"Annual","2 Year":"2 Year","One-Time":"One-Time","Late Fee":"Late Fee","Tax":"Tax","Signup?":"Signup?","Hidden":"Hidden","Product Group Window":"Product Group Window","You must save your server first":"You must save your server first","Are you sure you want to delete the selected servers(s)":"Are you sure you want to delete the selected servers(s)","No status message":"No status message","Status Message:":"Status Message:","Server Name":"Server Name","Hostname":"Hostname","Shared IP":"Shared IP","Quota":"Quota","Monthly Cost":"Monthly Cost","DataCenter / Provider":"DataCenter / Provider","New API Key has been generated":"New API Key has been generated","Archive":"Archive","Unarchive":"Unarchive","Are you sure you want to delete the selected billing types(s)":"Are you sure you want to delete the selected billing types(s)","Invoice Description":"Invoice Description","Count":"Count","Add/Edit Billing Type":"Add/Edit Billing Type","Are you sure you want to delete the selected email templates(s)?":"Are you sure you want to delete the selected email templates(s)?","You can not delete the system email templates.":"You can not delete the system email templates.","Add Email Template":"Add Email Template","Are you sure you want to delete the selected coupon(s)?":"Are you sure you want to delete the selected coupon(s)?","Are you sure you want to unarchive the selected coupon(s)?":"Are you sure you want to unarchive the selected coupon(s)?","Are you sure you want to archive the selected coupon(s)?":"Are you sure you want to archive the selected coupon(s)?","Discount":"Discount","Recurring":"Recurring","Billing Cycles":"Billing Cycles","In Effect":"In Effect","Currency Name":"Currency Name","Default":"Default","Symbol":"Symbol","Code":"Code","Alignment":"Alignment","Precision":"Precision","Please select only one currency for the default":"Please select only one currency for the default","Are you sure you want to delete the selected currencies?":"Are you sure you want to delete the selected currencies?","Add/Edit Currency":"Add/Edit Currency","Custom fields reordered successfully":"Custom fields reordered successfully","Enter the name of the new custom field":"Enter the name of the new custom field"," added to custom fields.":" added to custom fields."," saved successfully.":" saved successfully.","Are you sure you want to delete ":"Are you sure you want to delete ","Cancel":"Cancel","Custom field created by plugin:":"Custom field created by plugin:","Are you sure you want to delete the selected departments(s)":"Are you sure you want to delete the selected departments(s)","Department Name":"Department Name","Lead":"Lead","Add/Edit Department":"Add/Edit Department","Users Affected":"Users Affected","Source":"Source","Emails Checked":"Emails Checked","Open Ticket ?":"Open Ticket ?","Email Routing Filters":"Email Routing Filters","Autoresponder":"Autoresponder","Are you sure you want to delete the selected routing rules(s)":"Are you sure you want to delete the selected routing rules(s)","Are you sure you want to delete the selected alias(es)":"Are you sure you want to delete the selected alias(es)","Alias To":"Alias To","System Status":"System Status","Add/Edit Status Alias":"Add/Edit Status Alias","Gateway updated properly":"Gateway updated properly","Already selected":"Already selected","All (Default)":"All (Default)","Country":"Country","Division":"Division","Level":"Level","Compound":"Compound","VAT":"VAT","Rate":"Rate","Add/Edit Tax Rule":"Add/Edit Tax Rule","Click to edit this ticket type":"Click to edit this ticket type","Are you sure you want to delete the selected ticket types(s)?":"Are you sure you want to delete the selected ticket types(s)?","None":"None","Tickets":"Tickets","Add Ticket Type":"Add Ticket Type","No staff available - click to add your first staff member to this group":"No staff available - click to add your first staff member to this group","Are you sure you want to delete this role?":"Are you sure you want to delete this role?","Save":"Save","Email":"Email","Status":"Status","Add Staff":"Add Staff","Role Name":"Role Name","Are you sure you want to delete this account? WARNING: All support ticket information for this user will be replaced to generic Tech Support":"Are you sure you want to delete this account? WARNING: All support ticket information for this user will be replaced to generic Tech Support","Add Charge":"Add Charge","Due Date":"Due Date","Select a Billing Type":"Select a Billing Type","Warning: Your data will be overwritten.  Click YES if you want to replace the text fields with the default content of the selected billing type.":"Warning: Your data will be overwritten.  Click YES if you want to replace the text fields with the default content of the selected billing type.","Semi-Annual":"Semi-Annual","Every 2 Years":"Every 2 Years","Every 3 Years":"Every 3 Years","Every 4 Years":"Every 4 Years","Every 5 Years":"Every 5 Years","Every 6 Years":"Every 6 Years","Every 7 Years":"Every 7 Years","Every 8 Years":"Every 8 Years","Every 9 Years":"Every 9 Years","Every 10 Years":"Every 10 Years","Select a Billing Cycle":"Select a Billing Cycle","Subscription":"Subscription","Applies to product":"Applies to product","Charge Name":"Charge Name","Charge Description":"Charge Description","Advanced Options":"Advanced Options","Tax this entry":"Tax this entry","Is this a recurring payment?":"Is this a recurring payment?","The number of months the recurring charge will be active for.":"The number of months the recurring charge will be active for.","Duration in months":"Duration in months","Subscription ID":"Subscription ID","Update":"Update","Edit Charge":"Edit Charge","Overide Subscription  ":"Overide Subscription  ","Create Invoice  ":"Create Invoice  ","No subscription":"No subscription","Enter your passphrase:":"Enter your passphrase:","Enter the invoice id:":"Enter the invoice id:","Do you want to send a receipt?":"Do you want to send a receipt?","Are sure you want to delete the selected invoice(s).":"Are sure you want to delete the selected invoice(s).","Pmt. Reference":"Pmt. Reference","Are you sure you want to process the selected account(s)?":"Are you sure you want to process the selected account(s)?","Response":"Response","Edited on":"Edited on","Are you sure you want to delete this charge? If yes please make sure you also click <b>Save Changes</b>":"Are you sure you want to delete this charge? If yes please make sure you also click <b>Save Changes</b>","Are you sure you want to split this charge into a new invoice?":"Are you sure you want to split this charge into a new invoice?","Add period start and end dates":"Add period start and end dates","Period dates":"Period dates","Start":"Start","End":"End","Select date":"Select date","Stop Processing":"Stop Processing","Please wait":"Please wait","Preparing data":"Preparing data","Completed":"Completed","Generating Invoice(s)":"Generating Invoice(s)","Processing Invoice(s)":"Processing Invoice(s)","View PDF Invoice":"View PDF Invoice","User id field may not be left blank":"User id field may not be left blank","Viewing all invoices that are passed their due date yet not paid.":"Viewing all invoices that are passed their due date yet not paid.","Viewing all invoices that have not been paid.":"Viewing all invoices that have not been paid.","Viewing all invoices.":"Viewing all invoices.","Viewing invoices for a filtered user.":"Viewing invoices for a filtered user.","Viewing pending invoices. Invoices that have been sent to merchant but not cleared.  i.e. eChecks":"Viewing pending invoices. Invoices that have been sent to merchant but not cleared.  i.e. eChecks","Viewing all draft invoices. These invoices are not ready to be processed.":"Viewing all draft invoices. These invoices are not ready to be processed.","Due":"Due","Viewing Invoices":"Viewing Invoices","Some invoices are not yet on their due date. Are you sure you want to proceed?":"Some invoices are not yet on their due date. Are you sure you want to proceed?","Add Payment Reference":"Add Payment Reference","Are you sure you want to delete the selected charges(s)":"Are you sure you want to delete the selected charges(s)","Are you sure you want to create invoice(s) with the selected charges(s)":"Are you sure you want to create invoice(s) with the selected charges(s)","Do you wish to activate this clients packages as well?":"Do you wish to activate this clients packages as well?","Do you wish to use the server plugin to activate these packages?":"Do you wish to use the server plugin to activate these packages?","Do you wish to suspend this clients packages as well?":"Do you wish to suspend this clients packages as well?","Do you wish to use the server plugin to suspend these packages?":"Do you wish to use the server plugin to suspend these packages?","Do you wish to cancel this clients packages as well?":"Do you wish to cancel this clients packages as well?","Do you wish to use the server plugin to cancel these packages?":"Do you wish to use the server plugin to cancel these packages?","Are you sure you wish to register this account?":"Are you sure you wish to register this account?","There was an error when updating your status":"There was an error when updating your status","Status has been updated successfully":"Status has been updated successfully","Displaying packages":"Displaying packages","Package":"Package","ID":"ID","Customer":"Customer","There are no packages available to view at this time":"There are no packages available to view at this time","Are you sure you want to activate the selected packages(s)":"Are you sure you want to activate the selected packages(s)","Are you sure you want to delete the selected packages(s)":"Are you sure you want to delete the selected packages(s)","Do you want to delete this customer if they have no packages?":"Do you want to delete this customer if they have no packages?","Are you sure you want to cancel the selected package(s)":"Are you sure you want to cancel the selected package(s)","Reason":"Reason","Request Date & Time":"Request Date & Time","Cancel On":"Cancel On","Invalid payment term for domain":"Invalid payment term for domain","Domain Name":"Domain Name","Expiration Date":"Expiration Date","Period":"Period","Auto Renew":"Auto Renew","Registrar":"Registrar","CSR Details":"CSR Details","Reassign":"Reassign","Toggle":"Toggle","Are you sure you want to toggle the Registrar Lock option via the selected plugin?":"Are you sure you want to toggle the Registrar Lock option via the selected plugin?","Unknown":"Unknown","Not Yet Registered":"Not Yet Registered","Select IP Address":"Select IP Address","Point your domain to a web site by pointing to an IP Address, or forward to another site, or point to a temporary page (known as 'Parking'), and more. These records are also known as sub-domains (e.g. webmail.example.com).":"Point your domain to a web site by pointing to an IP Address, or forward to another site, or point to a temporary page (known as 'Parking'), and more. These records are also known as sub-domains (e.g. webmail.example.com).","The setting <strong>Use Defaults</strong> must be set to No if you want to add your own Name Server":"The setting <strong>Use Defaults</strong> must be set to No if you want to add your own Name Server","Outstanding balance":"Outstanding balance","Do you want to use the respective server plugins to delete all these users?":"Do you want to use the respective server plugins to delete all these users?","Successfully validated credit cards":"Successfully validated credit cards","Id":"Id","Client Type":"Client Type","Activated":"Activated","Score":"Score","N/A":"N/A","Add Client":"Add Client","Validate CC":"Validate CC","No name entered":"No name entered","Are you sure you want to delete the selected accounts(s)":"Are you sure you want to delete the selected accounts(s)","Notifications?":"Notifications?","Invoices?":"Invoices?","Support?":"Support?","Add Alternate Account":"Add Alternate Account","Click OK if you are sure you want to delete this account":"Click OK if you are sure you want to delete this account","Do you want to delete the product(s) using the respective server plugin?":"Do you want to delete the product(s) using the respective server plugin?","Associated to Ticket Type":"Associated to Ticket Type","Note":"Note","Un-Archive":"Un-Archive","Are you sure you want to delete the selected notes(s)":"Are you sure you want to delete the selected notes(s)","Date Submitted":"Date Submitted","Entered By":"Entered By","Viewable By Customer":"Viewable By Customer","Ticket Type":"Ticket Type","No items found":"No items found","Are you sure you want to delete the selected package(s)":"Are you sure you want to delete the selected package(s)","Add a new product":"Add a new product","Invoice Date":"Invoice Date","Invoice Amount":"Invoice Amount","Next Date":"Next Date","Billing Type":"Billing Type","Taxable":"Taxable","Cycle":"Cycle","Are you sure you want to delete the selected recurring fee(s)":"Are you sure you want to delete the selected recurring fee(s)","Add Recurring Charge":"Add Recurring Charge","Upload Progress":"Upload Progress","Event Details":"Event Details","On":"On","User":"User","IP Address":"IP Address","Modified User":"Modified User","There are no items needing your attention":"There are no items needing your attention","Currently there are no services enabled":"Currently there are no services enabled","No errors or warnings found":"No errors or warnings found","Are you sure you want to delete this category?":"Are you sure you want to delete this category?","Are you sure you want to delete the selected article(s)":"Are you sure you want to delete the selected article(s)","Invalid value entered":"Invalid value entered","Author":"Author","Views":"Views","Modified":"Modified","Order":"Order","Category Window":"Category Window","Article Window":"Article Window","Are you sure you want to delete the selected comment(s)":"Are you sure you want to delete the selected comment(s)","E-mail":"E-mail","Comment":"Comment","Art":"Art","Added":"Added","Approved":"Approved","Viewing":"Viewing","Comments":"Comments","Viewing All Comments":"Viewing All Comments","Are you sure you want to delete the selected response(s)":"Are you sure you want to delete the selected response(s)","Creater":"Creater","Add Canned Reply":"Add Canned Reply","Select Groups":"Select Groups","Select Autoresponder Template":"Select Autoresponder Template","Select Ticket Type":"Select Ticket Type","Select Ticket Assignee":"Select Ticket Assignee","Selected by customer":"Selected by customer","You have subscribed to this ticket":"You have subscribed to this ticket","You have unsubscribed from this ticket":"You have unsubscribed from this ticket","himself":"himself","Unassigned":"Unassigned","No Package":"No Package","There was an error with this operation":"There was an error with this operation","You must complete all the fields before proceeding":"You must complete all the fields before proceeding","Select a valid ticket type":"Select a valid ticket type","You can not leave the subject blank":"You can not leave the subject blank","You can not leave the message blank":"You can not leave the message blank","Are you sure you want to delete this ticket?":"Are you sure you want to delete this ticket?","Are you sure you want to mark this ticket as spam?":"Are you sure you want to mark this ticket as spam?","Unsubscribe":"Unsubscribe","Subscribe":"Subscribe","Dept.":"Dept.","Others viewing: ":"Others viewing: ","All":"All","Open":"Open","all":"all","open":"open","tickets with keyword(s)":"tickets with keyword(s)","from % to %":"from % to %","from %":"from %","to %":"to %","for customer %":"for customer %","for assignee %":"for assignee %","Are you sure you want to delete the selected ticket(s)":"Are you sure you want to delete the selected ticket(s)","Are you sure you want to prevent tickets from being created from the selected ticket(s) email addresses?":"Are you sure you want to prevent tickets from being created from the selected ticket(s) email addresses?","Ticket Filter":"Ticket Filter","By":"By","Setting filter as favorite":"Setting filter as favorite","This file type is not accepted. Please select a different file.":"This file type is not accepted. Please select a different file.","Attaching":"Attaching","Subject":"Subject","Created By":"Created By","Assigned To":"Assigned To","Elapsed":"Elapsed","en":"en","Loading Graph":"Loading Graph","First":"First","Last":"Last","Organization":"Organization","Address":"Address","City":"City","State / Province / Region":"State / Province / Region","Postal / Zip Code":"Postal / Zip Code","Are you sure that you wish to remove the item from your cart? <br>Note: The associated domain will also be removed.":"Are you sure that you wish to remove the item from your cart? <br>Note: The associated domain will also be removed.","Are you sure that you wish to remove the item from your cart?":"Are you sure that you wish to remove the item from your cart?","Go to PayPal to Make Payment":"Go to PayPal to Make Payment","Items":"Items","Item":"Item","Hide Product Addons":"Hide Product Addons","Show Product Addons":"Show Product Addons","Terms & Conditions":"Terms & Conditions","Please enter the Coupon Code":"Please enter the Coupon Code","% for %":"% for %","Add to cart":"Add to cart","Continue":"Continue","Searching domain availability ...":"Searching domain availability ...","There was an error looking up that domain.  Please try again.":"There was an error looking up that domain.  Please try again.","Good news":"Good news","is available to transfer":"is available to transfer","Sorry":"Sorry","is not registered":"is not registered","is already registered":"is already registered","is available to register":"is available to register","Available Domains":"Available Domains","But dont worry, we found these other great domains for you.":"But dont worry, we found these other great domains for you.","We also found additional results for you...":"We also found additional results for you...","Additional information required for this domain extension":"Additional information required for this domain extension","Product Add-ons":"Product Add-ons","#":"#","Next Due Date":"Next Due Date","Billing Cycle":"Billing Cycle","Actions":"Actions","Not Applicable":"Not Applicable","Reset password":"Reset password","Errors encountered. Please review and resubmit.":"Errors encountered. Please review and resubmit.","Create an account":"Create an account","There is":"There is","article that might answer your question.":"article that might answer your question.","There are":"There are","articles that might answer your question.":"articles that might answer your question."}